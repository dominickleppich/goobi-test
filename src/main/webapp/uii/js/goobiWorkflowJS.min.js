var goobiWorkflowJS=function(e){"use strict";var t={};return e.buttons={init:function(e){$.extend(!0,t,e),$(".btn").hasClass("btn--toggle")&&$(".btn--toggle").off().on("click",(function(){$(this).next("div").slideToggle(300)}))}},e}((goobiWorkflowJS=function(e){"use strict";var t={};function o(){var e=JSON.parse(sessionStorage.getItem("wf_boxStatus"));$(".module__box--collapsable").each((function(){var t=$(this).attr("id"),o=$(this).find('[data-toggle="box-body"]').hasClass("closed");e[t]=!o})),sessionStorage.setItem("wf_boxStatus",JSON.stringify(e))}return e.box={init:function(){null==sessionStorage.getItem("wf_boxStatus")&&sessionStorage.setItem("wf_boxStatus",JSON.stringify(t)),this.getBoxStatus(),o(),$("body").on("click",".module__box--collapsable .module__box-title h1",(function(){$(this).find('[data-toggle="box-body"]').toggleClass("closed"),$(this).parents(".module__box-title").next().slideToggle(200,(function(){o()}))}))},getBoxStatus:function(){var e=JSON.parse(sessionStorage.getItem("wf_boxStatus"));null!=e&&$.each(e,(function(e,t){t?($("#"+e).find('[data-toggle="box-body"]').removeClass("closed"),$("#"+e).find(".module__box-body").show()):($("#"+e).find('[data-toggle="box-body"]').addClass("closed"),$("#"+e).find(".module__box-body").hide())}))}},e}((goobiWorkflowJS=function(e){"use strict";return e.bookmarks={init:function(){this.loadColorbox()},loadColorbox:function(){$.colorbox.remove(),$(".colorbox-image").colorbox({transition:"fade",rel:"colorbox-image",maxWidth:"90%",maxHeight:"90%"})}},e}(goobiWorkflowJS||{},jQuery))||{},jQuery))||{},jQuery);function reloadAllHandler(){$('a[id*="geonamesIndexTrigger-"]').on("click",(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype");$("#rowIndex").val(e),$("#rowType").val(t)})),$('a[id*="gndIndexTrigger-"]').on("click",(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype");$("#rowIndex").val(e),$("#rowType").val(t)})),$('a[id*="gndPersonIndexTrigger-"]').on("click",(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype");$("#rowIndex").val(e),$("#rowType").val(t)})),$("body").on("click",'a[id*="danteIndexTrigger-"]',(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype"),o=$(this).attr("data-groupindex");$("#rowIndex").val(e),$("#groupIndex").val(o),$("#rowType").val(t),$("#resultList").empty(),$("#danteInput").val(""),$("#updatePluginButton").click()})),$("body").on("click",'a[id*="processIndexTrigger-"]',(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype"),o=$(this).attr("data-groupindex");$("#rowIndex").val(e),$("#groupIndex").val(o),$("#rowType").val(t),$("#updatePluginButton").click()})),$("body").on("click",'a[id*="viafIndexTrigger-"]',(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-datatype"),o=$(this).attr("data-groupindex");$("#rowIndex").val(e),$("#groupIndex").val(o),$("#rowType").val(t),$("#updatePluginButton").click()})),$("body").on("click",'a[id*="viafPersonIndexTrigger-"]',(function(){var e=$(this).attr("data-row"),t=$(this).attr("data-groupindex");$("#rowIndex").val(e),$("#groupIndex").val(t),$("#rowType").val("viafperson"),$("#updatePluginButton").click()}))}function addPaginationButtons(){$(".pagination-thumb")&&$(".pagination-thumb").remove()}function paginierungWertAnzeigen(){var e=document.getElementById("paginationInputFields"),t=document.getElementById("fictitious"),o=document.getElementById("paginierungWert");e.style.display=3==$("#paginationType").val()?"none":"",t.style.display=3==$("#paginationType").val()?"none":"",2!=$("#paginationType").val()&&5!=$("#paginationType").val()||(o.value="I"),1!=$("#paginationType").val()&&4!=$("#paginationType").val()||(o.value="1")}function selectClickedThumbnail(e){var t;t=document.getElementsByClassName("goobi-thumbnail");for(var o=0;o<t.length;o++)return t[o].className="goobi-thumbnail font-light",e.parentElement.parentElement.className="goobi-thumbnail img-active",document.getElementById("menu-form:scrollToThumb").value="false",!0}function loadThumbnails(){var e=parseInt($(".thumbnails").val());e&&($(".goobi-thumbnail").css("height",e+25+"px"),$(".goobi-thumbnail .thumb").css("max-height",e+"px"),$(".goobi-thumbnail .thumb canvas").css("max-height",e+"px"),$(".goobi-thumbnail").css("max-width",e+"px"),scrollToThumbnail())}function scrollToThumbnail(){$("#thumb_#{Metadaten.image.order}"),document.getElementById("menu-form:scrollToThumb").value}function setScrollPosition(){var e=$("#left").scrollTop();document.getElementById("menu-form:scrollPosition").value=e;var t=$("#structdata");if(null!=t){var o=t.scrollTop();document.getElementById("menu-form:scrollPositionStructData").value=o}}goobiWorkflowJS=function(e){"use strict";var t={selector:".textarea-html"};return e.tinymce={init:function(o){$.extend(!0,t,o),this.extendedTinyMceConfig={selector:t.selector,extended_valid_elements:"p",statusbar:!0,height:200,menu:{},plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste"],content_css:"css/content.css",toolbar:"undo redo | styleselect | bold italic underline strikethrough | bullist numlist | image table | fullscreen code",spellchecker_languages:"English=en_US,German=de_DE_frami",spellchecker_callback:function(e,t,o,i){tinymce.util.JSONRequest.sendRPC({url:"template/js/plugins/tinymce/js/tinymce/plugins/spellchecker/spellchecker.php",method:"spellcheck",params:{lang:this.getLanguage(),words:t.match(this.getWordCharPattern())},success:function(e){o(e)},error:function(e,t){console.log(e,t),i("Spellcheck error:"+t.status)}})},style_formats:[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"}]}],init_instance_callback:function(e){"readonly"===$("#"+e.id.replace(":","\\:")).attr("readonly")&&e.setMode("readonly");try{resizeReferenceFields(),$(e.getWin()).bind("resize",(function(){resizeReferenceFields()}))}catch(e){}},setup:function(e){e.on("blur",(function(t,o,i){e.save(),console.log("input id = ",e.id.replace(/:/g,"\\:")),$("#"+e.id.replace(/:/g,"\\:")).trigger("change")})),e.on("change",(function(){tinymce.triggerSave()}))}},e.tinymce.renderInputFields()},initTinyMce:function(){tinymce.init(e.tinymce.extendedTinyMceConfig)},renderInputFields:function(t){if("undefined"!=typeof tinyMCE){if(void 0===t||"begin"==t.status)for(var o in tinyMCE.editors)try{tinyMCE.editors[o].remove(),console.log("Removed editor "+o)}catch(e){console.log("Error occured during removing editors; ",e)}void 0!==t&&"success"!=t.status||e.tinymce.initTinyMce(t)}}},e}((goobiWorkflowJS=function(e){"use strict";var t={maxParallelRequests:100},o={};function i(e){return new Promise((function(t,i){setTimeout((function(){if(null!=e){var i=e.getContext("2d"),r=e.dataset;r||((r={}).image_small=e.getAttribute("data-image_small"),r.image_large=e.getAttribute("data-image_large"));var s=new Image;s.onload=function(){e.width,this.width,e.width=this.width,e.height=this.height,i.drawImage(s,0,0,this.width,this.height),o[e.id]={smallWidth:this.width-10,smallHeight:this.height-10,largeUrl:r.image_large},t()};var l=r.image_small;s.src=l,e.addEventListener("mouseout",n,!1),e.addEventListener("mousemove",a,!1)}}),100)}))}function n(e){i(e.currentTarget)}function a(e){var t=e.currentTarget,i=new Image;i.onload=function(){if(null!=o[t.id]){o[t.id].scaleX=(i.width-o[t.id].smallWidth)/o[t.id].smallWidth,o[t.id].scaleY=(i.height-o[t.id].smallHeight)/o[t.id].smallHeight;var n=function(e,t){var o=e.getBoundingClientRect();return{x:t.clientX-o.left-5,y:t.clientY-o.top-5}}(t,e);if(0!=$("#"+t.id+":hover").length){var a=o[t.id].scaleX,r=o[t.id].scaleY,s=t.getContext("2d");s.fillStyle="white",s.fillRect(0,0,t.width,t.height);var l=n.x*a,c=n.y*r;l<0&&(l=0),c<0&&(c=0),i.width-l<t.width&&(l=i.width-t.width),i.height-c<t.height&&(c=i.height-t.height),s.drawImage(i,-l,-c)}}},o[t.id]&&(i.src=o[t.id].largeUrl)}return e.thumbnails={init:function(e){e&&(this.config=$.extend(!0,{},t,e));var o=[];$(".thumbnails__thumb-canvas").each((function(e,t){o.push(t)}));let n=(a=o,r=this.config.maxParallelRequests,a.reduce(((e,t)=>(e[e.length-1].length<r?e[e.length-1].push(t):e.push([t]),e)),[[]]));var a,r;let s=new rxjs.Subject,l=rxjs.from(n).pipe(rxjs.operators.concatMap((e=>{let t=rxjs.from(e).pipe(rxjs.operators.mergeMap((e=>{let t=i(e);return s.next(t),this.isActiveElement(e)&&s.complete(),t})));return rxjs.forkJoin(t)})));rxjs.forkJoin(l).subscribe();var c=document.querySelector("#pageContentRight");c.querySelector("#thumbnails")&&c.scrollTo(0,0);var d=document.querySelector(".thumbnails__thumb.active");if(d){let e=[];s.subscribe({next:t=>e.push(t),error:t=>e.push(t),complete:()=>{Promise.all(e).then((()=>{d.scrollIntoView({block:"center"})}))}})}},isActiveElement:function(e){return e.parentElement.parentElement.parentElement.classList.contains("active")}},e.updateSelectedThumbnail=function(e){var t;t=document.getElementsByClassName("thumbnails__thumb");for(var o=0;o<t.length;o++)t[o].className="thumbnails__thumb";return e.parentElement.parentElement.className="thumbnails__thumb active",!0},e}((goobiWorkflowJS=function(e){"use strict";var t={metseditorPagesOverview:!0,metseditorPagesAllPages:!1,metseditorPagesQuickassign:!1},o={};function i(){var e=JSON.parse(o);$.each(e,(function(e,t){t&&$("#"+e).addClass("show")}))}function n(){var e=JSON.parse(o);$("body").on("click",'[data-target="#metseditorPagesOverview"], [data-target="#metseditorPagesAllPages"], [data-target="#metseditorPagesQuickassign"]',(function(){var t=$(this).attr("aria-controls");$.each(e,(function(o){e[o]=o==t,sessionStorage.setItem("wf_structdataTabStatus",JSON.stringify(e))}))}))}return e.structdata={init:function(){null==sessionStorage.getItem("wf_structdataTabStatus")||null==sessionStorage.getItem("wf_structdataTabStatus")?(sessionStorage.setItem("wf_structdataTabStatus",JSON.stringify(t)),o=sessionStorage.getItem("wf_structdataTabStatus"),i(),n()):(o=sessionStorage.getItem("wf_structdataTabStatus"),i(),n())}},e}((goobiWorkflowJS=function(e){"use strict";var t={selectPage:{label:0},structure:{link:0}};return e.scrollPositions={init:function(){(function(){var e;null==sessionStorage.getItem("wf_scrollPositions")?(sessionStorage.setItem("wf_scrollPositions",JSON.stringify(t)),e=JSON.parse(sessionStorage.getItem("wf_scrollPositions")),$("#pageContentLeft").scrollTop(e.structure.link)):(e=JSON.parse(sessionStorage.getItem("wf_scrollPositions")),$("#pageContentLeft").scrollTop(e.structure.link))})(),$("body").on("click","#meStructure button",(function(){t.structure.link=$(this).parents("tr").position().top,sessionStorage.setItem("wf_scrollPositions",JSON.stringify(t))}))}},e}((goobiWorkflowJS=function(e){"use strict";return e.progress={init:function(e){},displayProgressBar:function(){var e=document.getElementById("progressPanel");"block"==e.style.display?e.style.display="none":e.style.display="block",document.getElementById("progressbutton").click()}},e}((goobiWorkflowJS=function(e){"use strict";return e.printpage={init:function(e){},print:function(e){var t=document.getElementById("pageContentLeft").innerHTML,o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e+"/uii/template/css/intranda.css?version=1";var i=window.open("","","");i.document.getElementsByTagName("head")[0].appendChild(o),i.document.body.innerHTML=t,i.window.print(),i.close()}},e}((goobiWorkflowJS=function(e){"use strict";var t=null,o=null,i=null,n=[],a=["#ff4433"],r={global:{divId:"mainImage",useTiles:!0,footerHeight:0,adaptContainerHeight:!1,zoomSlider:".zoom-slider",zoomSliderHandle:".zoom-slider-handle",zoomSliderLabel:"#zoomSliderLabel input",persistZoom:!1,persistRotation:!1,persistenceId:""},image:{mimeType:"image/jpeg",tileSource:""}},s={borderWidth:2,borderColor:"#ff4433"},l={controls:{xAxis:{rotateLeft:"#rotate-left-x",rotateRight:"#rotate-right-x"},yAxis:{rotateLeft:"#rotate-left-y",rotateRight:"#rotate-right-y"},zAxis:{rotateLeft:"#rotate-left-z",rotateRight:"#rotate-right-z"},position:{reset:"#reset-position"},zoom:{resetZoom:"#reset#zoom"}},container:{id:"mainImage"},resourcesPath:"template/js/"};return e.object={init:function(){$("#mainImage").length>0&&this.imageLoadHandler()},initControls(){$("#rotate-right-x").on("click",(function(){t.controls.rotateRight()})),$("#rotate-left-x").on("click",(function(){t.controls.rotateLeft()})),$("#reset-position").on("click",(function(){t.controls.reset(!0)}))},imageLoadHandler:function(){if("image"==(i=$("#mediaType").val())){goobiWorkflowJS.object.freeJSResources();let o=$("#persistenceId").val();o&&o.length>0&&(r.global.persistenceId=o,r.global.persistZoom=!0,r.global.persistRotation=!0);var n=$("#tileSource").val();r.image.tileSource=n,(t=new ImageView.Image(r)).load().then((function(){goobiWorkflowJS.layout.setObjectViewHeight(),e.object.initControls(),e.object.initAreas(),t.controls.goHome(),t.observables&&t.observables.firstTileLoaded.subscribe((()=>{}),(e=>{console.error("imageLoadHandler: Error loading image",e),$("#"+r.global.divId).html("Failed to load image tile: "+e.message)}))})).then((()=>{let e=$("#tileSource_next").val();e&&this.preCache(e,"precacheNext")})).then((()=>{let e=$("#tileSource_previous").val();e&&this.preCache(e,"precachePrevious")})).catch((function(e){console.error("imageLoadHandler: Error opening image",e),$("#"+r.global.divId).html("Failed to load image: "+e.message)}))}else if("object"==i)$("#imageLoader").show(),goobiWorkflowJS.layout.setObjectViewHeight(),(o=WorldGenerator.create(l)).loadObject({url:$("#objectUrl").val(),position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},size:10,material:{color:4504371},focus:!0}).then((function(e){$("#imageLoader").fadeOut(2e3),console.info("imageLoadHandler: loaded",e),o.render()})).catch((function(e){$("#imageLoader").fadeOut(2e3),console.error("imageLoadHandler: failed to load: ",e)}));else if("x3dom"==i){var a=$("#objectUrl").val();$("#imageLoader").show(),(new X3DLoader).load($("#mainImage"),a,(function(){$("#imageLoader").fadeOut(2e3),console.info("imageLoadHandler: loaded")}),(function(){console.info("imageLoadHandler: progress")}),(function(e){$("#imageLoader").fadeOut(2e3),console.info("imageLoadHandler: error",e)}))}},setDrawArea(e,t){this.drawArea=e,this.areaId=t},isDrawArea(){return this.drawArea},initAreas(){if($("#disable-interaction-overlay").hide(),this.drawer=new ImageView.Draw(t.viewer,s,(()=>this.isDrawArea())),this.drawer.finishedDrawing().subscribe(function(e){console.log("finished drawing",this),e.style=$.extend({},s,{borderColor:this.colors.next()}),e.draw(),this.addOverlay(e),this.setDrawArea(!1),this.drawnOverlay=e,this.transformer.addOverlay(e),this.endDrawArea(),this.addArea(e),"current"==this.areaTarget&&this.highlight(e),$("#disable-interaction-overlay").hide()}.bind(this)),this.transformer=new ImageView.Transform(t.viewer,s,(()=>!this.isDrawArea())),this.transformer.finishedTransforming().subscribe(function(e){this.setArea(e)}.bind(this)),this.areaString=$("#pageareas").text(),this.areaString){let e=JSON.parse(this.areaString);this.drawnOverlay=void 0,this.drawAreas(e)}else this.drawAreas([]);e.jsfAjax.success.subscribe((e=>{let t=$("#pageareas").text();if(this.areaString!=t)if(this.areaString=t,this.areaString){let e=JSON.parse(this.areaString);this.drawnOverlay=void 0,this.drawAreas(e)}else this.drawAreas([])})),this.initDeletePageAreas()},addOverlay(e){e&&(this.overlays.push(e),this.overlays.sort(((e,t)=>e.highlight?-1:t.highlight?1:0)))},startDrawArea(e,t){console.log("start draw area",e,t),this.drawnOverlay&&t==this.getAreaTarget()&&this.drawnOverlay.remove(),this.setDrawArea(!0),this.setAreaTarget(t),$(e).hide(),$(".cancel-area-edition").hide(),$(e).next(".cancel-area-edition").show(),$("#disable-interaction-overlay").show()},cancelDrawArea(){this.isDrawArea()?(this.setDrawArea(!1),this.endDrawArea()):(this.drawnOverlay&&this.drawnOverlay.remove(),this.endDrawArea(),cancelPageAreaEdition()),$(".cancel-area-edition").hide()},endDrawArea(){$("#disable-interaction-overlay").hide(),$(".start-area-edition").show()},setAreaTarget(e){this.areaTarget=e},getAreaTarget(){return this.areaTarget},addArea(e){let t=this.writeArea(e);t.addTo=this.areaTarget,addPageArea(t),"current"==this.areaTarget&&(this.drawnOverlay=void 0,$(".cancel-area-edition").hide(),$(".start-area-edition").show())},setArea(e){let t=this.writeArea(e);console.log("set area",e,t),setPageArea(t)},deleteArea(e){deletePageArea({areaId:e.areaId})},cancelPageAreaEdition(){cancelPageAreaEdition()},initDeletePageAreas(){this.endDeletePageMode(),$(document).off("click","[data-pagearea-delete='start']").on("click","[data-pagearea-delete='start']",(e=>{this.startDeletePageMode()})),$(document).off("click","[data-pagearea-delete='cancel']").on("click","[data-pagearea-delete='cancel']",(e=>{this.endDeletePageMode()}))},startDeletePageMode(){$("[data-pagearea-delete='start']").hide(),$("[data-pagearea-delete='cancel']").show(),null==this.deleteHandler&&(this.deleteHandler=e=>{this.overlays.every((t=>!t.contains(e.position,5,!0)||(deletePageArea({areaId:t.areaId}),t.remove(),this.transformer.removeOverlay(t),this.endDeletePageMode(),!1)))}),t.viewer.addHandler("canvas-click",this.deleteHandler)},endDeletePageMode(){$("[data-pagearea-delete='cancel']").hide(),$("[data-pagearea-delete='start']").show(),null!=this.deleteHandler&&(t.viewer.removeHandler("canvas-click",this.deleteHandler),this.deleteHandler=null)},drawAreas(e){this.overlays&&this.overlays.forEach((e=>{e.remove(),this.transformer.removeOverlay(e)})),$("#pageAreaName").val(""),this.overlays=[],this.colors=new ImageView.ColorIterator(a);var o=!1;for(var i of e){if(i.x)try{var n=new OpenSeadragon.Rect(parseInt(i.x),parseInt(i.y),parseInt(i.w),parseInt(i.h)),r=ImageView.CoordinateConversion.convertRectFromImageToOpenSeadragon(n,t.viewer,t.getOriginalImageSize()),l=new ImageView.Overlay(r,t.viewer,s,!0);l.style=$.extend({},s,{borderColor:this.colors.next()}),l.areaId=i.areaId,i.highlight&&this.highlight(l),l.draw(),this.transformer.addOverlay(l),this.addOverlay(l)}catch(e){}else o=!0;i.label&&!i.logId&&$("#pageAreaName").val(i.label)}o?($("#disable-interaction-overlay").show(),this.setDrawArea(!0,i.id)):this.setDrawArea(!1,null)},highlight(e){e.highlight=!0,e.style.fillColor=e.style.borderColor,e.style.opacity=.3,t.viewer.forceRedraw()},unHighlight(e){e.highlight=!1,e.style.fillColor=null,t.viewer.forceRedraw()},writeArea(e){var o={},i=ImageView.CoordinateConversion.convertRectFromOpenSeadragonToImage(e.rect,t.viewer,t.getOriginalImageSize());return i&&(o.areaId=e.areaId,o.x=Math.round(i.x),o.y=Math.round(i.y),o.w=Math.round(i.width),o.h=Math.round(i.height)),o},freeJSResources:function(e){if(e&&"begin"!=e.status);else if(t&&t.close(),o&&o.dispose(),n!=[]){for(var i in n)n[i].close();n=[]}},preCache(e,t){if(!document.querySelector("#"+t)){let e=$("<div id='"+t+"' />");$("main").append(e)}let o={global:{divId:t,imageControlsActive:!1,tabIndex:-1},image:{tileSource:e}};var i=new ImageView.Image(o);i.load().catch((t=>console.log("error precaching url "+e))),n.push(i)}},e}((goobiWorkflowJS=function(e){"use strict";var t={};function o(){if(!window.imageNavBlockers)return!1;let e=!1;for(let t of window.imageNavBlockers)t.check()&&!confirm(t.confirm)&&(e=!0);return e}return e.navigation={init:function(e){$.extend(!0,t,e),$(document).bind("keyup",t.navigationShortcut+"+right",(function(e){if(!o()){var t=document.getElementById("nextImage");null!=t&&t.click()}})),$(document).bind("keyup",t.navigationShortcut+"+left",(function(){if(!o()){var e=document.getElementById("prevImage");null!=e&&e.click()}})),$(document).bind("keyup",t.navigationShortcut+"+up",(function(){if(!o()){var e=document.getElementById("imageNext20");null!=e&&e.click()}})),$(document).bind("keyup",t.navigationShortcut+"+down",(function(){if(!o()){var e=document.getElementById("imageBack20");null!=e&&e.click()}})),$(document).bind("keyup",t.navigationShortcut+"+home",(function(){if(!o()){var e=document.getElementById("imageFirst");null!=e&&e.click()}})),$(document).bind("keyup",t.navigationShortcut+"+end",(function(){if(!o()){var e=document.getElementById("imageLast");null!=e&&e.click()}})),$(document).bind("keyup",t.navigationShortcut+"+return",(function(){var e=document.getElementById("meMenuActionsForm:saveMetsFileButtonAjax");null!=e&&e.click()})),$(document).bind("keyup",t.navigationShortcut+"+v",(function(){var e=document.getElementById("meMenuActionsForm:startValidationButton");null!=e&&e.click()})),$(document).bind("keyup",t.navigationShortcut+"+space",(function(){var e=$("#hiddenImageNo").val();null==e&&(e=$("#hiddenImageNoThumb").val());var t=document.getElementById("pagesList:"+e+":checkbox");t.checked?t.checked=!1:t.checked=!0,t.focus(),t.blur()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+right",(function(){var e=document.getElementById("nextImage");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+left",(function(){var e=document.getElementById("prevImage");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+up",(function(){var e=document.getElementById("imageNext20");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+down",(function(){var e=document.getElementById("imageBack20");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+home",(function(){var e=document.getElementById("imageFirst");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+end",(function(){var e=document.getElementById("imageLast");null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+return",(function(){var e=document.getElementById("meMenuActionsForm:saveMetsFileButtonAjax");console.log(e),null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+v",(function(){var e=document.getElementById("meMenuActionsForm:startValidationButton");console.log(e),null!=e&&e.click()})),$("input:checkbox").bind("keyup",t.navigationShortcut+"+space",(function(){var e=$("#hiddenImageNo").val();for(i=0;i<document.getElementsByName("myCheckboxes").length;i++)if(i==e){var t=document.getElementsByName("myCheckboxes")[i];t.checked?t.checked=!1:t.checked=!0}}))}},e}((goobiWorkflowJS=function(e){"use strict";return e.modals={init:function(){}},e}((goobiWorkflowJS=function(e){"use strict";return e.menu={init:function(){$("body").on("click",'[data-show="submenu"]',(function(e){$(this).next().is(":visible")?($(".submenu").hide(),$(this).next().hide()):($(".submenu").hide(),$(this).next().show())})),$("body").on("click",(function(e){"navigation"==e.target.id||$(e.target).closest("#navigation").length||"navigationActions"==e.target.id||$(e.target).closest(".navigationActions").length||$(".submenu").hide()})),$("body").on("click",'[data-toggle="mobile-menu"]',(function(){$("#navigation").slideToggle(200)})),$("body").on("click",'[data-toggle="mobile-image"]',(function(){$(this).toggleClass("in"),$("#pageContentRight").toggleClass("in")}))}},e}((goobiWorkflowJS=function(e){"use strict";return e.meScrollPos={init:function(e,{view:t=goobiWorkflowConfig.currentView,saveScrollPos:o=!0}={}){this.updateView(e,t),this.restoreScrollPosCenter(e,o)},updateView:function(e,t){"success"===e.status&&(goobiWorkflowConfig.currentView=t)},getScrollPosKey:function(e){const t={Paginierung:"mePagination",Strukturdaten:"meStructData",Metadaten:"meMetadata",File:"meFile",default:"default"};return t[e]||t.default},getErrorMsgHeight:function(){const e=document.querySelector("#messages"),t=getComputedStyle(e);let o=e.offsetHeight;return o+=parseInt(t.marginTop),o+=parseInt(t.marginBottom),o},restoreScrollPosCenter:function(e,t){t&&"begin"===e.status&&this.storeScrollPos(),"success"===e.status&&this.restoreScrollPos()},storeScrollPos:function(){const e=document.querySelector("#pageContentLeft"),t=document.querySelector("#pageContentCenter"),o=goobiWorkflowConfig.currentView,i=this.getScrollPosKey(o),n=sessionStorage.getItem("gw_me_scrollPos"),a=t.scrollTop-this.getErrorMsgHeight();let r={};n&&(r=JSON.parse(n)),r.default="0",r.meLeft=e.scrollTop,r[i]=a,sessionStorage.setItem("gw_me_scrollPos",JSON.stringify(r))},restoreScrollPos:function(){const e=document.querySelector("#pageContentLeft"),t=document.querySelector("#pageContentCenter"),o=goobiWorkflowConfig.currentView,i=this.getScrollPosKey(o),n=JSON.parse(sessionStorage.getItem("gw_me_scrollPos"));if(!n)return;const a=n[i];goobiWorkflowJS.box.getBoxStatus(),e.scrollTop=n.meLeft,t.scrollTop=a+this.getErrorMsgHeight()},destroyScrollPos:function(){sessionStorage.removeItem("gw_me_scrollPos")}},e}((goobiWorkflowJS=function(e){"use strict";var t=!1,o={left:0,center:0,right:0,handles:{left:0,right:0}},i={};function n(){t&&console.log("EXECUTE: _setColumnWidth"),o.left=$("#pageContentLeft").outerWidth(),o.center=$("#pageContentCenter").outerWidth(),o.right=$("#pageContentRight").outerWidth(),o.handles.left=parseInt($("#pageContentLeft .ui-resizable-handle").css("left")),o.handles.right=parseInt($("#pageContentRight .ui-resizable-handle").css("right")),sessionStorage.setItem("wf_columnWidths",JSON.stringify(o))}function a(){t&&console.log("EXECUTE: _setResizeEvents"),t&&console.log("EXECUTE: _resetResizableElements"),$("#pageContentLeft").css("width","20%"),i.displayImageArea?$("#pageContentCenter, #pageContentRight").css("width","40%"):$("#pageContentCenter").css("width","80%"),$("#pageContentLeft .ui-resizable-handle").css("left",$("#pageContentLeft").outerWidth()),$("#pageContentLeft .ui-resizable-handle").attr("tabindex","-1"),$("#pageContentRight .ui-resizable-handle").css("right",$("#pageContentRight").outerWidth()-7),$("#pageContentRight .ui-resizable-handle").attr("tabindex","-1"),$("#structureActions").css("left",$("#pageContentLeft").width()-45),n(),r(),goobiWorkflowJS.layout.setObjectViewHeight(),s()}function r(){t&&console.log("EXECUTE: _getSavedWidths"),null!=sessionStorage.getItem("wf_columnWidths")&&(o=JSON.parse(sessionStorage.getItem("wf_columnWidths")),i.displayImageArea?($(window).outerWidth()<o.left+o.center+o.right||null==o.right?($("#pageContentLeft").outerWidth(Math.floor(o.left)),$("#pageContentCenter").outerWidth(Math.floor(($(window).width()-$("#pageContentLeft").outerWidth())/2)),$("#pageContentRight").outerWidth(Math.floor($(window).width()-$("#pageContentLeft").outerWidth())/2)):($("#pageContentLeft").outerWidth(Math.floor(o.left)),$("#pageContentCenter").outerWidth(Math.floor(o.center)),$("#pageContentRight").outerWidth(Math.floor(o.right)-1)),$("#pageContentLeft .ui-resizable-handle").css("left",o.handles.left),$("#pageContentRight .ui-resizable-handle").css("right",o.handles.right)):($("#pageContentLeft").outerWidth(o.left),$("#pageContentCenter").outerWidth($(window).width()-$("#pageContentLeft").outerWidth()),$("#pageContentLeft .ui-resizable-handle").css("left",o.handles.left)))}function s(){t&&console.log("EXECUTE: _setFlexibleRowColumns"),$(".row-flexible").width()>0&&$(".row-flexible").width()<550?$(".row-flexible").addClass("fullwidth"):$(".row-flexible").removeClass("fullwidth")}return e.layout={init:function(e){t&&console.log("Initializing: goobiWorkflowJS.layout.init"),$.extend(!0,i,e),window.matchMedia("(min-width: 993px)").matches&&(window.addEventListener("resize",a),window.addEventListener("orientationchange",a),t&&console.log("EXECUTE: _setResizableElements"),$("#pageContentLeft").resizable({handles:"e",minWidth:200,maxWidth:.45*$(window).width(),resize:function(e,t){i.displayImageArea?($("#pageContentCenter").outerWidth($(window).outerWidth()-$("#pageContentRight").outerWidth()-$("#pageContentLeft").outerWidth()-1),$("#pageContentLeft .ui-resizable-handle").css("left",$("#pageContentLeft").outerWidth()),$("#structureActions").css("left",$("#pageContentLeft").width()-45)):($("#pageContentCenter").outerWidth($(window).outerWidth()-$("#pageContentLeft").outerWidth()),$("#pageContentLeft .ui-resizable-handle").css("left",$("#pageContentLeft").outerWidth()),$("#structureActions").css("left",$("#pageContentLeft").width()-45)),goobiWorkflowJS.layout.setObjectViewHeight(),s(),n()}}).on("resize",(function(e){e.stopPropagation()})),$("#pageContentRight").resizable({handles:"w",minWidth:400,maxWidth:$(window).width()/2,resize:function(e,t){$("#pageContentCenter").outerWidth($(window).outerWidth()-$("#pageContentRight").outerWidth()-$("#pageContentLeft").outerWidth()-1),$("#pageContentRight .ui-resizable-handle").css("right",$("#pageContentRight").outerWidth()-7),goobiWorkflowJS.layout.setObjectViewHeight(),s(),n()}}).on("resize",(function(e){e.stopPropagation()})),$("#pageContentLeft .ui-resizable-handle").attr("tabindex","-1"),$("#pageContentRight .ui-resizable-handle").attr("tabindex","-1"),r()),t&&console.log("EXECUTE: _setThumbnailsMargin"),$("#pageContentWrapper").show(),s(),$("#structureActions").css("left",$("#pageContentLeft").width()-45),t&&console.log(" EXECUTE: _setTabindex"),$(".focusableChildCss input").addClass("focusable"),$(".focusable").attr("tabindex","0"),$(".focusableChild input").attr("tabindex","0"),$(".notFocusable").attr("tabindex","-1"),$(".notFocusableChild").children().attr("tabindex","-1"),this.setImageCommentHeight()},setObjectViewHeight:function(){t&&console.log("EXECUTE: goobiWorkflowJS.layout.setObjectViewHeight");var e=$("#pageContentRight").outerHeight(),o=$("#imageNavigation").outerHeight(),i=$("#imageCommentArea").outerHeight();i||(i=0),$("#mainImage").css("height",e-o-i-45)},setImageCommentHeight:function(){var e=document.querySelector("#Comment");if(e){function t(){var t=Math.max(1,e.value.split("\n").length);e.style.height=17*t+13+"px"}t(),e.addEventListener("input",t)}}},e}((goobiWorkflowJS=function(e){"use strict";return e.jumpToPage={init:function(){$("body").on("click","#currentPage, #currentPagePrefix",(function(){var e=$("#currentPagePrefix"),t=e[0].getBoundingClientRect().width,o=e[0].getBoundingClientRect().height;e.next().css("width",t),e.next().css("height",o),e.hide(),e.next().css("display","inline-block"),$("#jumpToImageAutocomplete input").focus()})),$("body").on("blur","#jumpToImageAutocomplete input",(function(){$("#jumpToImageAutocomplete").hide(),$("#currentPagePrefix").show()})),$("body").on("click","#jumpToPage",(function(){$(this).hide(),$(this).next().css("display","inherit"),$("#jumpToThumbAutocomplete input").focus()})),$("body").on("blur","#jumpToThumbAutocomplete input",(function(){$("#jumpToThumbAutocomplete").hide(),$("#jumpToPage").show()}))}},e}((goobiWorkflowJS=function(e){"use strict";var t={};return e.jsfAjax={begin:new rxjs.Subject,complete:new rxjs.Subject,success:new rxjs.Subject,init:function(o){$.extend(!0,t,o),"undefined"!=typeof jsf&&jsf.ajax.addOnEvent((function(o){var i=document.getElementById("ajaxloader");switch(o.status){case"begin":e.jsfAjax.begin.next(o),$(".btn").hasClass("btn--loader")&&$(".btn-ajax-loader").addClass("in"),i.style.display="block","true"==o?.source?.dataset.renderimage&&goobiWorkflowJS.object.freeJSResources(),e.tinymce.renderInputFields(o);break;case"complete":e.jsfAjax.complete.next(o),i.style.display="none";break;case"success":if(e.jsfAjax.success.next(o),$(".btn").hasClass("btn--loader")&&$(".btn-ajax-loader").removeClass("in"),goobiWorkflowJS.cleanUpBootstrapFeatures(),goobiWorkflowJS.initBootstrapFeatures(),goobiWorkflowJS.layout.init(),"true"==o?.source?.dataset.renderimage&&(goobiWorkflowJS.object.imageLoadHandler(),goobiWorkflowJS.thumbnails.init()),"saveAltoChanges"!=o?.source?.id&&"altoEditorAutocompleteScript"!=o?.source?.id){var n=document.querySelector("alto-editor");n&&n._tag&&(n._tag.unmount(!0),"undefined"!=typeof riot&&openAltoEditor(!0))}if(window.riot_mounts&&"undefined"!=typeof riot)for(let e of Object.keys(window.riot_mounts))if(document.querySelector(e))if(document.querySelector(e)._tag){let t=riot_mounts[e]();riot.update(e,t)}else riot.mount(e,riot_mounts[e]());setTimeout((function(){$('*[data-fadeoutmessages="true"] li').fadeOut(1e3)}),1500),goobiWorkflowJS.box.getBoxStatus(),goobiWorkflowJS.buttons.init(),goobiWorkflowJS.bookmarks.init(),goobiWorkflowJS.tinymce.init(t),goobiWorkflowJS.setAutocompleteListHandler(),goobiWorkflowJS.layout.setImageCommentHeight()}}))}},e}((goobiWorkflowJS=function(){"use strict";var e={metseditor:{thumbnails:{maxParallelRequests:100}}},t={init:function(t){$.extend(!0,e,t),console.info("Current View: ",e.currentView),goobiWorkflowJS.initBootstrapFeatures(),goobiWorkflowJS.layout.init(e),goobiWorkflowJS.menu.init(),goobiWorkflowJS.box.init(),goobiWorkflowJS.buttons.init(e),goobiWorkflowJS.tinymce.init(e),goobiWorkflowJS.object.init(),goobiWorkflowJS.bookmarks.init(),goobiWorkflowJS.jumpToPage.init(),goobiWorkflowJS.scrollPositions.init(),goobiWorkflowJS.navigation.init(e),goobiWorkflowJS.buttons.init(e),"false"===e.readOnlyMode&&goobiWorkflowJS.autoSave(e.autoSaveInterval),goobiWorkflowJS.structdata.init(),goobiWorkflowJS.modals.init(),goobiWorkflowJS.thumbnails.init(e.metseditor.thumbnails),goobiWorkflowJS.jsfAjax.init(e),$(".focusable").attr("tabindex","0"),$(".focusableChild input").attr("tabindex","0"),$(".notFocusable").attr("tabindex","-1"),$(".notFocusableChild").children().attr("tabindex","-1")},initBootstrapFeatures:function(){$('[data-toggle="tooltip"]').tooltip({trigger:"hover focus"}),$('[data-toggle-second="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover({html:!0})},cleanUpBootstrapFeatures:function(){$(".popover").length>0?$(".popover").remove():$(".tooltip").length>0&&$(".tooltip").remove()},printPage:function(){var e=document.getElementById("left").innerHTML,t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="#{HelperForm.servletPathWithHostAsUrl}/uii/template/css/intranda.css?version=1";var o=window.open("","","");o.document.getElementsByTagName("head")[0].appendChild(t),o.document.body.innerHTML=e,o.window.print(),o.close()},submitEnter:function(e,t){var o;if(window.event)o=window.event.keyCode;else{if(!t)return!0;o=t.which}return 13!=o||(document.getElementById(e).click(),!1)},setAutocompleteListHandler:function(e,o){if(!t.submitEnter(e,o))return!1;setTimeout((function(){$(".ui-autocomplete-panel li").length>0&&$(".ui-autocomplete-panel li").on("click",(function(){null!=document.getElementById("goButton")?document.getElementById("goButton").click():document.getElementById("goButtonThumbs").click()}))}),1e3)},displayProgressBar:function(){var e=document.getElementById("progressPanel");"block"==e.style.display?e.style.display="none":e.style.display="block",document.getElementById("progressbutton").click()},autoSave:function(e){var t=parseInt(e);t>0&&setInterval((function(){var e=document.getElementById("meMenuActionsForm:automaticSave");null!=e&&e.click()}),1e3*t*60)},fireOnEnter:function(e,t){$("#"+e).on("keyup",(function(e){e.preventDefault(),13==e.keyCode&&$("#"+t).click()}))},loadPlugin:function(e,t){"success"===e.status&&(console.log(t),$(t).modal("show"))}};return t}(jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery),$(document).ready((function(){target=parseInt($("#contentArea").width())-parseInt($("#pagLeft").width())-10,addPaginationButtons(),0!=$(".popover.fade.right.in").length&&$(".popover.fade.right.in").remove()})),window.onload=function(){loadImages()},loadThumbnails(),freeJSResources({status:"success"}),$(document).ready((function(){$("#left").scrollTop("#{NavigationForm.uiStatus.mets_scrollPosition}");var e=$("#structdata");null!=e&&e.scrollTop("#{NavigationForm.uiStatus.mets_scrollPositionStructData}")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvb2JpV29ya2Zsb3dKUy5taW4uanMiXSwibmFtZXMiOlsiZ29vYmlXb3JrZmxvd0pTIiwiZ29vYmlXb3JrZmxvdyIsIl9kZWZhdWx0cyIsImJ1dHRvbnMiLCJpbml0IiwiY29uZmlnIiwiJCIsImV4dGVuZCIsImhhc0NsYXNzIiwib2ZmIiwib24iLCJ0aGlzIiwibmV4dCIsInNsaWRlVG9nZ2xlIiwiX3N0YXR1cyIsIl9zZXRCb3hTdGF0dXMiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJlYWNoIiwiY3VycklkIiwiYXR0ciIsImlzQ2xvc2VkIiwiZmluZCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJib3giLCJnZXRCb3hTdGF0dXMiLCJ0b2dnbGVDbGFzcyIsInBhcmVudHMiLCJlbGVtZW50IiwicmVtb3ZlQ2xhc3MiLCJzaG93IiwiYWRkQ2xhc3MiLCJoaWRlIiwiYm9va21hcmtzIiwibG9hZENvbG9yYm94IiwiY29sb3Jib3giLCJyZW1vdmUiLCJ0cmFuc2l0aW9uIiwicmVsIiwibWF4V2lkdGgiLCJtYXhIZWlnaHQiLCJqUXVlcnkiLCJyZWxvYWRBbGxIYW5kbGVyIiwiY3VyckluZGV4IiwiY3VyclR5cGUiLCJ2YWwiLCJjdXJyR3JvdXAiLCJlbXB0eSIsImNsaWNrIiwiYWRkUGFnaW5hdGlvbkJ1dHRvbnMiLCJwYWdpbmllcnVuZ1dlcnRBbnplaWdlbiIsInBhZ2luYXRpb25JbnB1dEZpZWxkcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWN0aXRpb3VzRmllbGQiLCJpbnB1dEJveEVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJ2YWx1ZSIsInNlbGVjdENsaWNrZWRUaHVtYm5haWwiLCJnYWxsZXJ5TGlua3MiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSIsImxlbmd0aCIsImNsYXNzTmFtZSIsInBhcmVudEVsZW1lbnQiLCJsb2FkVGh1bWJuYWlscyIsImhlaWdodCIsInBhcnNlSW50IiwiY3NzIiwiZSIsInNjcm9sbFRvVGh1bWJuYWlsIiwic2V0U2Nyb2xsUG9zaXRpb24iLCJzY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvcCIsInN0cnVjdGRhdGEiLCJwb3MiLCJzZWxlY3RvciIsInRpbnltY2UiLCJleHRlbmRlZFRpbnlNY2VDb25maWciLCJleHRlbmRlZF92YWxpZF9lbGVtZW50cyIsInN0YXR1c2JhciIsIm1lbnUiLCJwbHVnaW5zIiwiY29udGVudF9jc3MiLCJ0b29sYmFyIiwic3BlbGxjaGVja2VyX2xhbmd1YWdlcyIsInNwZWxsY2hlY2tlcl9jYWxsYmFjayIsIm1ldGhvZCIsInRleHQiLCJzdWNjZXNzIiwiZmFpbHVyZSIsInV0aWwiLCJKU09OUmVxdWVzdCIsInNlbmRSUEMiLCJ1cmwiLCJwYXJhbXMiLCJsYW5nIiwiZ2V0TGFuZ3VhZ2UiLCJ3b3JkcyIsIm1hdGNoIiwiZ2V0V29yZENoYXJQYXR0ZXJuIiwicmVzdWx0IiwiZXJyb3IiLCJ4aHIiLCJjb25zb2xlIiwibG9nIiwic3R5bGVfZm9ybWF0cyIsInRpdGxlIiwiaXRlbXMiLCJmb3JtYXQiLCJpbml0X2luc3RhbmNlX2NhbGxiYWNrIiwiZWRpdG9yIiwiaWQiLCJyZXBsYWNlIiwic2V0TW9kZSIsInJlc2l6ZVJlZmVyZW5jZUZpZWxkcyIsImdldFdpbiIsImJpbmQiLCJzZXR1cCIsImV2ZW50IiwiYSIsImIiLCJzYXZlIiwidHJpZ2dlciIsInRyaWdnZXJTYXZlIiwicmVuZGVySW5wdXRGaWVsZHMiLCJpbml0VGlueU1jZSIsImFqYXhEYXRhIiwidGlueU1DRSIsImVkSWQiLCJlZGl0b3JzIiwibWF4UGFyYWxsZWxSZXF1ZXN0cyIsIl9pbnRyYW5kYUltYWdlcyIsImRyYXdPbkNhbnZhcyIsImNhbnZhcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2V0VGltZW91dCIsImN0eCIsImdldENvbnRleHQiLCJkIiwiZGF0YXNldCIsImltYWdlX3NtYWxsIiwiZ2V0QXR0cmlidXRlIiwiaW1hZ2VfbGFyZ2UiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIndpZHRoIiwiZHJhd0ltYWdlIiwic21hbGxXaWR0aCIsInNtYWxsSGVpZ2h0IiwibGFyZ2VVcmwiLCJpbWFnZSIsInNyYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmF3T25DYW52YXNNb3VzZU91dCIsIm9uTW91c2VNb3ZlIiwiY3VycmVudFRhcmdldCIsInNjYWxlWCIsInNjYWxlWSIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwiY2xpZW50WCIsImxlZnQiLCJ5IiwiY2xpZW50WSIsInRvcCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicG9zWCIsInBvc1kiLCJ0aHVtYm5haWxzIiwiZWxlbWVudHMiLCJpbmRleCIsImVsIiwicHVzaCIsImVsZW1lbnRHcm91cHMiLCJhcnJheSIsImdyb3VwU2l6ZSIsInJlZHVjZSIsImdyb3VwcyIsIml0ZW0iLCJhY3RpdmVPYnNlcnZhYmxlIiwicnhqcyIsIlN1YmplY3QiLCJ0aHVtYm5haWxMb2FkT2JzZXJ2YWJsZXMiLCJmcm9tIiwicGlwZSIsIm9wZXJhdG9ycyIsImNvbmNhdE1hcCIsInRodW1iR3JvdXAiLCJncm91cE9ic2VydmFibGVzIiwibWVyZ2VNYXAiLCJlbGUiLCJwcm9taXNlIiwiaXNBY3RpdmVFbGVtZW50IiwiY29tcGxldGUiLCJmb3JrSm9pbiIsInN1YnNjcmliZSIsInJpZ2h0Q29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxUbyIsImFjdGl2ZVRodW1ibmFpbCIsInByb21pc2VzIiwicCIsImFsbCIsInRoZW4iLCJzY3JvbGxJbnRvVmlldyIsImJsb2NrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ1cGRhdGVTZWxlY3RlZFRodW1ibmFpbCIsIl90YWJTdGF0dXNEZWZhdWx0IiwibWV0c2VkaXRvclBhZ2VzT3ZlcnZpZXciLCJtZXRzZWRpdG9yUGFnZXNBbGxQYWdlcyIsIm1ldHNlZGl0b3JQYWdlc1F1aWNrYXNzaWduIiwiX3RhYlN0YXR1cyIsIl9nZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cyIsIl9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cyIsInVuZGVmaW5lZCIsIl9wb3NpdGlvbnMiLCJzZWxlY3RQYWdlIiwibGFiZWwiLCJzdHJ1Y3R1cmUiLCJsaW5rIiwic2Nyb2xsUG9zaXRpb25zIiwic3RydWN0TGlua1Bvc2l0aW9uIiwicG9zaXRpb24iLCJwcm9ncmVzcyIsImRpc3BsYXlQcm9ncmVzc0JhciIsInByaW50cGFnZSIsInByaW50IiwicHJpbnRSZXBvcnQiLCJpbm5lckhUTUwiLCJjcmVhdGVFbGVtZW50IiwidHlwZSIsImhyZWYiLCJ3aW4iLCJ3aW5kb3ciLCJvcGVuIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJjbG9zZSIsIl92aWV3SW1hZ2UiLCJfd29ybGQiLCJfbWVkaWFUeXBlIiwiX3ByZWxvYWRlZEltYWdlcyIsIl9jb2xvcnMiLCJfY29uZmlnVmlld2VyIiwiZ2xvYmFsIiwiZGl2SWQiLCJ1c2VUaWxlcyIsImZvb3RlckhlaWdodCIsImFkYXB0Q29udGFpbmVySGVpZ2h0Iiwiem9vbVNsaWRlciIsInpvb21TbGlkZXJIYW5kbGUiLCJ6b29tU2xpZGVyTGFiZWwiLCJwZXJzaXN0Wm9vbSIsInBlcnNpc3RSb3RhdGlvbiIsInBlcnNpc3RlbmNlSWQiLCJtaW1lVHlwZSIsInRpbGVTb3VyY2UiLCJfZHJhd1N0eWxlIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJDb2xvciIsIl93b3JsZENvbmZpZyIsImNvbnRyb2xzIiwieEF4aXMiLCJyb3RhdGVMZWZ0Iiwicm90YXRlUmlnaHQiLCJ5QXhpcyIsInpBeGlzIiwicmVzZXQiLCJ6b29tIiwicmVzZXRab29tIiwiY29udGFpbmVyIiwicmVzb3VyY2VzUGF0aCIsIm9iamVjdCIsImltYWdlTG9hZEhhbmRsZXIiLCJpbml0Q29udHJvbHMiLCJmcmVlSlNSZXNvdXJjZXMiLCJpbWFnZVpvb21QZXJzaXN0ZW56ZUlkIiwiSW1hZ2VWaWV3IiwibG9hZCIsImxheW91dCIsInNldE9iamVjdFZpZXdIZWlnaHQiLCJpbml0QXJlYXMiLCJnb0hvbWUiLCJvYnNlcnZhYmxlcyIsImZpcnN0VGlsZUxvYWRlZCIsImh0bWwiLCJtZXNzYWdlIiwicHJlQ2FjaGUiLCJjYXRjaCIsIldvcmxkR2VuZXJhdG9yIiwiY3JlYXRlIiwibG9hZE9iamVjdCIsInoiLCJyb3RhdGlvbiIsInNpemUiLCJtYXRlcmlhbCIsImNvbG9yIiwiZm9jdXMiLCJmYWRlT3V0IiwiaW5mbyIsInJlbmRlciIsIm9iamVjdFVybCIsIlgzRExvYWRlciIsInNldERyYXdBcmVhIiwiZHJhdyIsImRyYXdBcmVhIiwiYXJlYUlkIiwiaXNEcmF3QXJlYSIsImRyYXdlciIsIkRyYXciLCJ2aWV3ZXIiLCJmaW5pc2hlZERyYXdpbmciLCJvdmVybGF5IiwiY29sb3JzIiwiYWRkT3ZlcmxheSIsImRyYXduT3ZlcmxheSIsInRyYW5zZm9ybWVyIiwiZW5kRHJhd0FyZWEiLCJhZGRBcmVhIiwiYXJlYVRhcmdldCIsImhpZ2hsaWdodCIsIlRyYW5zZm9ybSIsImZpbmlzaGVkVHJhbnNmb3JtaW5nIiwic2V0QXJlYSIsImFyZWFTdHJpbmciLCJhcmVhcyIsImRyYXdBcmVhcyIsImpzZkFqYXgiLCJkYXRhIiwiaW5pdERlbGV0ZVBhZ2VBcmVhcyIsIm92ZXJsYXlzIiwic29ydCIsIm8xIiwibzIiLCJzdGFydERyYXdBcmVhIiwic291cmNlIiwidGFyZ2V0IiwiZ2V0QXJlYVRhcmdldCIsInNldEFyZWFUYXJnZXQiLCJjYW5jZWxEcmF3QXJlYSIsImNhbmNlbFBhZ2VBcmVhRWRpdGlvbiIsImFyZWEiLCJ3cml0ZUFyZWEiLCJhZGRUbyIsImFkZFBhZ2VBcmVhIiwic2V0UGFnZUFyZWEiLCJkZWxldGVBcmVhIiwiZGVsZXRlUGFnZUFyZWEiLCJlbmREZWxldGVQYWdlTW9kZSIsInN0YXJ0RGVsZXRlUGFnZU1vZGUiLCJkZWxldGVIYW5kbGVyIiwiZXZlcnkiLCJvIiwicmVtb3ZlT3ZlcmxheSIsImFkZEhhbmRsZXIiLCJyZW1vdmVIYW5kbGVyIiwiZm9yRWFjaCIsIkNvbG9ySXRlcmF0b3IiLCJzaG91bGREcmF3IiwiT3BlblNlYWRyYWdvbiIsIlJlY3QiLCJ3IiwiaCIsImRpc3BsYXlSZWN0IiwiQ29vcmRpbmF0ZUNvbnZlcnNpb24iLCJjb252ZXJ0UmVjdEZyb21JbWFnZVRvT3BlblNlYWRyYWdvbiIsImdldE9yaWdpbmFsSW1hZ2VTaXplIiwiT3ZlcmxheSIsImxvZ0lkIiwiZmlsbENvbG9yIiwib3BhY2l0eSIsImZvcmNlUmVkcmF3IiwidW5IaWdobGlnaHQiLCJjb252ZXJ0UmVjdEZyb21PcGVuU2VhZHJhZ29uVG9JbWFnZSIsIk1hdGgiLCJyb3VuZCIsImRpc3Bvc2UiLCJhcHBlbmQiLCJ2aWV3Q29uZmlnIiwiaW1hZ2VDb250cm9sc0FjdGl2ZSIsInRhYkluZGV4IiwicHJlbG9hZCIsIl9jaGVja05hdmlnYXRpb25CbG9ja2VkIiwiaW1hZ2VOYXZCbG9ja2VycyIsImJsb2NrZWQiLCJibG9ja2VyIiwiY2hlY2siLCJjb25maXJtIiwibmF2aWdhdGlvbiIsIm5hdmlnYXRpb25TaG9ydGN1dCIsIm15QnV0dG9uIiwiaGlkZGVuSW1hZ2VObyIsImNoZWNrYm94IiwiY2hlY2tlZCIsImJsdXIiLCJnZXRFbGVtZW50c0J5TmFtZSIsIm1vZGFscyIsImlzIiwiY2xvc2VzdCIsIm1lU2Nyb2xsUG9zIiwidmlldyIsImdvb2JpV29ya2Zsb3dDb25maWciLCJjdXJyZW50VmlldyIsInNhdmVTY3JvbGxQb3MiLCJ1cGRhdGVWaWV3IiwicmVzdG9yZVNjcm9sbFBvc0NlbnRlciIsImdldFNjcm9sbFBvc0tleSIsImtleXMiLCJQYWdpbmllcnVuZyIsIlN0cnVrdHVyZGF0ZW4iLCJNZXRhZGF0ZW4iLCJGaWxlIiwiZGVmYXVsdCIsImdldEVycm9yTXNnSGVpZ2h0IiwibWVzc2FnZXMiLCJtZXNzYWdlc1N0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJtZXNzYWdlSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwic3RvcmVTY3JvbGxQb3MiLCJyZXN0b3JlU2Nyb2xsUG9zIiwiY29udGVudExlZnQiLCJjb250ZW50Q2VudGVyIiwia2V5IiwicmVzdG9yZWRTY3JvbGxQb3NBbGwiLCJjdXJTY3JvbGxQb3MiLCJzY3JvbGxQb3NBbGwiLCJtZUxlZnQiLCJvbGRQb3MiLCJkZXN0cm95U2Nyb2xsUG9zIiwicmVtb3ZlSXRlbSIsIl9kZWJ1ZyIsIl9jb2x1bW5zIiwiY2VudGVyIiwicmlnaHQiLCJoYW5kbGVzIiwiX3NldENvbHVtbldpZHRoIiwib3V0ZXJXaWR0aCIsIl9zZXRSZXNpemVFdmVudHMiLCJkaXNwbGF5SW1hZ2VBcmVhIiwiX2dldFNhdmVkV2lkdGhzIiwiX3NldEZsZXhpYmxlUm93Q29sdW1ucyIsImZsb29yIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJyZXNpemFibGUiLCJtaW5XaWR0aCIsInJlc2l6ZSIsInVpIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hpbGRyZW4iLCJzZXRJbWFnZUNvbW1lbnRIZWlnaHQiLCJwYWdlQ29udGVudFJpZ2h0SGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJjb250cm9sV3JhcHBlckhlaWdodCIsImltYWdlQ29tbWVudEhlaWdodCIsImNvbW1lbnRBcmVhIiwic2V0SGVpZ2h0IiwibGluZXMiLCJtYXgiLCJzcGxpdCIsImp1bXBUb1BhZ2UiLCJjdXJQYWdlUHJlIiwiY3VycmVudFBhZ2VXaWR0aCIsImN1cnJlbnRQYWdlSGVpZ2h0IiwiYmVnaW4iLCJqc2YiLCJhamF4IiwiYWRkT25FdmVudCIsImFqYXhsb2FkZXIiLCJyZW5kZXJpbWFnZSIsImNsZWFuVXBCb290c3RyYXBGZWF0dXJlcyIsImluaXRCb290c3RyYXBGZWF0dXJlcyIsImFsdG9FZGl0b3JFbGVtZW50IiwiX3RhZyIsInVubW91bnQiLCJyaW90Iiwib3BlbkFsdG9FZGl0b3IiLCJyaW90X21vdW50cyIsIk9iamVjdCIsIm9wdHMiLCJ1cGRhdGUiLCJtb3VudCIsInNldEF1dG9jb21wbGV0ZUxpc3RIYW5kbGVyIiwibWV0c2VkaXRvciIsInJlYWRPbmx5TW9kZSIsImF1dG9TYXZlIiwiYXV0b1NhdmVJbnRlcnZhbCIsInRvb2x0aXAiLCJwb3BvdmVyIiwia2V5Y29kZSIsImtleUNvZGUiLCJ3aGljaCIsInN1Ym1pdEVudGVyIiwiaW50ZXJ2YWwiLCJpbnRlcnZhbFZhbHVlIiwic2V0SW50ZXJ2YWwiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGFsIiwicmVhZHkiLCJsb2FkSW1hZ2VzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQW1LSUEsZ0JBQWtCLFNBQVdDLEdBQzdCLGFBRUEsSUFDSUMsRUFBWSxDQUFDLEVBcUNqQixPQW5DQUQsRUFBY0UsUUFBVSxDQUtwQkMsS0FBTSxTQUFVQyxHQUtaQyxFQUFFQyxVQUFjTCxFQUFXRyxHQUV2QkMsRUFBRSxRQUFRRSxTQUFTLGdCQWUzQkYsRUFBRSxnQkFBZ0JHLE1BQU1DLEdBQUcsb0JBQ3ZCSixFQUFFSyxNQUFNQyxLQUFLLE9BQU9DLFlBQVksSUFDcEMsR0FkQSxHQW9CR1osQ0FFVixDQTNDcUIsRUFuR2xCRCxnQkFBa0IsU0FBWUMsR0FDOUIsYUFFQSxJQUVJYSxFQUFVLENBQUMsRUFvRGYsU0FBU0MsSUFLTCxJQUFJQyxFQUFTQyxLQUFLQyxNQUFPQyxlQUFlQyxRQUFTLGlCQUVqRGQsRUFBRyw2QkFBOEJlLGlCQUM3QixJQUFJQyxFQUFTaEIsRUFBR0ssTUFBT1ksS0FBTSxNQUN6QkMsRUFBV2xCLEVBQUdLLE1BQU9jLEtBQU0sNEJBQTZCakIsU0FBVSxVQUdsRVEsRUFBUU0sSUFEUEUsQ0FNVCxJQUVBTCxlQUFlTyxRQUFTLGVBQWdCVCxLQUFLVSxVQUFXWCxHQUM1RCxDQW1CQSxPQXpGQWYsRUFBYzJCLElBQU0sQ0FLbkJ4QixLQUFNLFdBTWtELE1BQTVDZSxlQUFlQyxRQUFTLGlCQUN6QkQsZUFBZU8sUUFBUyxlQUFnQlQsS0FBS1UsVUFBV2IsSUFJNURILEtBQUtrQixlQUNMZCxJQWdFSlQsRUFBRyxRQUFTSSxHQUFJLFFBQVMsOERBQ3JCSixF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QUlEbkQsV0FBMkIsU0FBVXFWLEVBQU1yUSxHQUN4QixZQUFoQnFRLEVBQUt0VSxTQUNSNkYsUUFBUUMsSUFBSTdCLEdBQ1ozRSxFQUFFMkUsR0FBVWliLE1BQU0sUUFFcEIsR0FFRyxPQUFPamdCLENBRVQsQ0FwUm9CLENBb1JqQjRDLFVBc0htQixDQUFDLEVBQUdBLFVBNERKLENBQUMsRUFBR0EsVUE4UkosQ0FBQyxFQUFHQSxVQTJLSixDQUFDLEVBQUdBLFVBeUVKLENBQUMsRUFBR0EsVUFzQkosQ0FBQyxFQUFHQSxVQXdOSixDQUFDLEVBQUdBLFVBcWdCSixDQUFDLEVBQUdBLFVBK0NKLENBQUMsRUFBR0EsVUF3Q04sQ0FBQyxFQUFHQSxVQXlFRixDQUFDLEVBQUdBLFVBdUZKLENBQUMsRUFBR0EsVUFrT0osQ0FBQyxFQUFHQSxVQW9JSixDQUFDLEVBQUdBLFFBMEY1QnZDLEVBQUVrRCxVQUFVMmMsa0JBQ1JySyxPQUFTdFIsU0FBU2xFLEVBQUUsZ0JBQWdCb0osU0FBV2xGLFNBQVNsRSxFQUFFLFlBQVlvSixTQUFXLEdBQ2pGckcsdUJBRTBDLEdBQXRDL0MsRUFBRSwwQkFBMEI2RCxRQUM1QjdELEVBQUUsMEJBQTBCa0MsUUFFcEMsSUFHQThNLE9BQU83RixPQUFTLFdBQ1oyVyxZQUNKLEVBc0JBOWIsaUJBQ0EyTixnQkFBZ0IsQ0FBRWpSLE9BQVEsWUE4QjFCVixFQUFFa0QsVUFBVTJjLGtCQUdSN2YsRUFBRSxTQUFTd0UsVUFGSSxrREFHZixJQUFJQyxFQUFhekUsRUFBRSxlQUVELE1BQWR5RSxHQUNBQSxFQUFXRCxVQUxKLDJEQU9mIiwiZmlsZSI6Imdvb2JpV29ya2Zsb3dKUy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7fTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93LmJvb2ttYXJrcyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgbWVudSBtb2R1bGUuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICBcdGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdJbml0aWFsaXppbmc6IGdvb2JpV29ya2Zsb3dKUy5ib29rbWFya3MuaW5pdCcgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2V0IGR5bmFtaWMgdG8gcG9zaXRpb24gb2YgYm9va21hcmtzXG4vLyAgICAgICAgICAgIF9zZXRUb3BQb3NpdGlvbigpO1xuICAgICAgICAgICAgLy8gc2V0IHJlc2l6ZSBldmVudFxuLy8gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIF9zZXRUb3BQb3NpdGlvbiApO1xuLy8gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ29yaWVudGF0aW9uY2hhbmdlJywgX3NldFRvcFBvc2l0aW9uICk7XG5cbiAgICAgICAgICAgIC8vIGxvYWQganF1ZXJ5IHBsdWdpbiBcImNvbG9yYm94XCJcbiAgICAgICAgICAgIHRoaXMubG9hZENvbG9yYm94KCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGxvYWQgYSBjb2xvcmJveCBmb3IgYm9va21hcmtzLlxuICAgICAgICAgKiBAbWV0aG9kIGxvYWRDb2xvcmJveFxuICAgICAgICAgKi9cbiAgICAgICAgbG9hZENvbG9yYm94OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLmJvb2ttYXJrcy5sb2FkQ29sb3Jib3gnICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlc2V0IGFsbCBjb2xvcmJveGVzXG4gICAgICAgICAgICAkLmNvbG9yYm94LnJlbW92ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBzZXQgY29sb3Jib3hlc1xuICAgICAgICAgICAgJCggJy5jb2xvcmJveC1pbWFnZScgKS5jb2xvcmJveCgge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICdmYWRlJyxcbiAgICAgICAgICAgICAgICByZWw6ICdjb2xvcmJveC1pbWFnZScsXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6ICc5MCUnLFxuICAgICAgICAgICAgICAgIG1heEhlaWdodDogJzkwJScsXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgYm9va21hcmtzLlxuICAgICAqIEBtZXRob2QgX3NldFRvcFBvc2l0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gX3NldFRvcFBvc2l0aW9uKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogX3NldFRvcFBvc2l0aW9uJyApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgY29udHJvbFdyYXBwZXJIZWlnaHQgPSAkKCAnI29iamVjdENvbnRyb2xXcmFwcGVyJyApLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgJCggJyNib29rbWFya3MnICkuY3NzKCAndG9wJywgY29udHJvbFdyYXBwZXJIZWlnaHQgKyA5MCApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuICAgIHZhciBfc3RhdHVzID0ge307XG5cbiAgICBnb29iaVdvcmtmbG93LmJveCA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgYm94IG1vZHVsZS5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLmJveC5pbml0JyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB3cml0ZSBib3ggc3RhdHVzIHRvIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICAgICAgaWYgKCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCAnd2ZfYm94U3RhdHVzJyApID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSggJ3dmX2JveFN0YXR1cycsIEpTT04uc3RyaW5naWZ5KCBfc3RhdHVzICkgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZXhlY3V0ZSBib3ggbWV0aG9kc1xuICAgICAgICAgICAgdGhpcy5nZXRCb3hTdGF0dXMoKTtcbiAgICAgICAgICAgIF9zZXRCb3hTdGF0dXMoKTtcbiAgICAgICAgICAgIF9zZXRUb2dnbGVCb3hCb2R5RXZlbnQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gZ2V0IHRoZSBzdGF0dXMgb2YgdGhlIGJveGVzLlxuICAgICAgICAgKiBAbWV0aG9kIGdldEJveFN0YXR1c1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Qm94U3RhdHVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLmJveC5nZXRCb3hTdGF0dXMnICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBKU09OLnBhcnNlKCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCAnd2ZfYm94U3RhdHVzJyApICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICggc3RhdHVzICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKCBzdGF0dXMsIGZ1bmN0aW9uKCBlbGVtZW50LCBzdGF0dXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggIXN0YXR1cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoICcjJyArIGVsZW1lbnQgKS5maW5kKCAnW2RhdGEtdG9nZ2xlPVwiYm94LWJvZHlcIl0nICkuYWRkQ2xhc3MoICdjbG9zZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnIycgKyBlbGVtZW50ICkuZmluZCggJy5tb2R1bGVfX2JveC1ib2R5JyApLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoICcjJyArIGVsZW1lbnQgKS5maW5kKCAnW2RhdGEtdG9nZ2xlPVwiYm94LWJvZHlcIl0nICkucmVtb3ZlQ2xhc3MoICdjbG9zZWQnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnIycgKyBlbGVtZW50ICkuZmluZCggJy5tb2R1bGVfX2JveC1ib2R5JyApLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIHN0YXR1cyBvZiB0aGUgYm94ZXMuXG4gICAgICogQG1ldGhvZCBfc2V0Qm94U3RhdHVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gX3NldEJveFN0YXR1cygpIHtcbiAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ0VYRUNVVEU6IF9zZXRCb3hTdGF0dXMnICk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RhdHVzID0gSlNPTi5wYXJzZSggc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSggJ3dmX2JveFN0YXR1cycgKSApO1xuXG4gICAgICAgICQoICcubW9kdWxlX19ib3gtLWNvbGxhcHNhYmxlJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJJZCA9ICQoIHRoaXMgKS5hdHRyKCAnaWQnICk7XG4gICAgICAgICAgICB2YXIgaXNDbG9zZWQgPSAkKCB0aGlzICkuZmluZCggJ1tkYXRhLXRvZ2dsZT1cImJveC1ib2R5XCJdJyApLmhhc0NsYXNzKCAnY2xvc2VkJyApO1xuXG4gICAgICAgICAgICBpZiAoIGlzQ2xvc2VkICkge1xuICAgICAgICAgICAgICAgIHN0YXR1c1sgY3VycklkIF0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXR1c1sgY3VycklkIF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSggJ3dmX2JveFN0YXR1cycsIEpTT04uc3RyaW5naWZ5KCBzdGF0dXMgKSApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gc2V0IHRoZSBldmVudCBsaXN0ZW5lciB0byB0b2dnbGUgYm94IGJvZHkuXG4gICAgICogQG1ldGhvZCBfc2V0VG9nZ2xlQm94Qm9keUV2ZW50XG4gICAgICovXG4gICAgZnVuY3Rpb24gX3NldFRvZ2dsZUJveEJvZHlFdmVudCgpIHtcbiAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ0VYRUNVVEU6IF9zZXRUb2dnbGVCb3hCb2R5RXZlbnQnICk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCAnYm9keScgKS5vbiggJ2NsaWNrJywgJy5tb2R1bGVfX2JveC0tY29sbGFwc2FibGUgLm1vZHVsZV9fYm94LXRpdGxlIGgxJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCggdGhpcyApLmZpbmQoICdbZGF0YS10b2dnbGU9XCJib3gtYm9keVwiXScgKS50b2dnbGVDbGFzcyggJ2Nsb3NlZCcgKTtcbiAgICAgICAgICAgICQoIHRoaXMgKS5wYXJlbnRzKCAnLm1vZHVsZV9fYm94LXRpdGxlJyApLm5leHQoKS5zbGlkZVRvZ2dsZSggMjAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfc2V0Qm94U3RhdHVzKCk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoZnVuY3Rpb24gKGdvb2JpV29ya2Zsb3cpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuXG4gICAgZ29vYmlXb3JrZmxvdy5idXR0b25zID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBpbml0aWFsaXplIHRoZSBidXR0b25zLlxuICAgICAgICAgKiBAbWV0aG9kIGluaXRcbiAgICAgICAgICovXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nOiBnb29iaVdvcmtmbG93SlMuYnV0dG9ucy5pbml0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQuZXh0ZW5kKCB0cnVlLCBfZGVmYXVsdHMsIGNvbmZpZyApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoJCgnLmJ0bicpLmhhc0NsYXNzKCdidG4tLXRvZ2dsZScpKSB7XG4gICAgICAgICAgICAgICAgX3NldEJ1dHRvblRvZ2dsZUV2ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIGJ1dHRvbiB0b2dnbGUuXG4gICAgICogQG1ldGhvZCBfc2V0QnV0dG9uVG9nZ2xlRXZlbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0QnV0dG9uVG9nZ2xlRXZlbnQoKSB7XG4gICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWEVDVVRFOiBfc2V0QnV0dG9uVG9nZ2xlRXZlbnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5idG4tLXRvZ2dsZScpLm9mZigpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykubmV4dCgnZGl2Jykuc2xpZGVUb2dnbGUoMzAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICBcblxuICAgICAgICAgICAgICAgIFxuICAgIHJldHVybiBnb29iaVdvcmtmbG93O1xuXG59KShnb29iaVdvcmtmbG93SlMgfHwge30sIGpRdWVyeSk7XG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7XG5cdFx0bWV0c2VkaXRvcjoge1xuXHRcdFx0dGh1bWJuYWlsczoge1xuXHRcdFx0XHRtYXhQYXJhbGxlbFJlcXVlc3RzOiAxMDBcblx0XHRcdH1cblx0XHR9XG5cdH07XG4gICAgXG4gICAgdmFyIGdvb2JpV29ya2Zsb3cgPSB7fTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93LmluaXQgPSBmdW5jdGlvbiggY29uZmlnICkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnSW5pdGlhbGl6aW5nOiBnb29iaVdvcmtmbG93SlMuaW5pdCcgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnLS0+IGNvbmZpZyA9ICcsIGNvbmZpZyApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkLmV4dGVuZCggdHJ1ZSwgX2RlZmF1bHRzLCBjb25maWcgKTtcblxuICAgICAgICAvLyB0aHJvdyBzb21lIGNvbnNvbGUgaW5mb3NcbiAgICAgICAgY29uc29sZS5pbmZvKCAnQ3VycmVudCBWaWV3OiAnLCBfZGVmYXVsdHMuY3VycmVudFZpZXcgKTtcblxuICAgICAgICAvLyBpbml0IEJTIGZlYXR1cmVzIC0tPiBuZWVkcyBhamF4IHJlbG9hZFxuICAgICAgICBnb29iaVdvcmtmbG93SlMuaW5pdEJvb3RzdHJhcEZlYXR1cmVzKCk7XG5cbiAgICAgICAgLy8gaW5pdCBsYXlvdXQgLS0+IG5lZWRzIGFqYXggcmVsb2FkXG4gICAgICAgIGdvb2JpV29ya2Zsb3dKUy5sYXlvdXQuaW5pdChfZGVmYXVsdHMpO1xuXG4gICAgICAgIC8vIGluaXQgbWVudVxuICAgICAgICBnb29iaVdvcmtmbG93SlMubWVudS5pbml0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbml0IG1vZHVsZSBib3ggLS0+IG5lZWRzIHBhcnRpYWwgYWpheCByZWxvYWRcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmJveC5pbml0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbml0IGJ1dHRvbnMgLS0+IG5lZWRzIGFqYXggcmVsb2FkXG4gICAgICAgIGdvb2JpV29ya2Zsb3dKUy5idXR0b25zLmluaXQoX2RlZmF1bHRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGluaXQgdGlueU1DRSBpZiBuZWVkZWRcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLnRpbnltY2UuaW5pdChfZGVmYXVsdHMpO1xuICAgICAgICBcbiAgICAgICAgLy8gaW5pdCBvYmplY3QgdmlldyAtLT4gbmVlZHMgYWpheCByZWxvYWRcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLm9iamVjdC5pbml0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbml0IGJvb2ttYXJrcyAtLT4gbmVlZHMgYWpheCByZWxvYWRcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmJvb2ttYXJrcy5pbml0KCk7XG5cbiAgICAgICAgLy8gaW5pdCBqdW1wIHRvIHBhZ2VcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmp1bXBUb1BhZ2UuaW5pdCgpO1xuXG4gICAgICAgIC8vIGluaXQgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgICBnb29iaVdvcmtmbG93SlMuc2Nyb2xsUG9zaXRpb25zLmluaXQoKTtcblxuICAgICAgICAvLyBpbml0IHByb2dyZXNzYmFyXG4gICAgICAgIC8vIGdvb2JpV29ya2Zsb3dKUy4uaW5pdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gaW5pdCBzaG9ydGN1dHMgZm9yIG5hdmlnYXRpb25cbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLm5hdmlnYXRpb24uaW5pdChfZGVmYXVsdHMpO1xuICAgICAgICBcbiAgICAgICAgLy8gaW5pdCBidXR0b25zIC0tPiBuZWVkcyBhamF4IHJlbG9hZFxuICAgICAgICBnb29iaVdvcmtmbG93SlMuYnV0dG9ucy5pbml0KF9kZWZhdWx0cyk7XG4gICAgICAgIFxuICAgICAgICAvLyBleGVjdXRlIGF1dG9zYXZlIGludGVydmFsXG4gICAgICAgIGlmIChfZGVmYXVsdHMucmVhZE9ubHlNb2RlID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBnb29iaVdvcmtmbG93SlMuYXV0b1NhdmUoX2RlZmF1bHRzLmF1dG9TYXZlSW50ZXJ2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5pdCBzdHJ1Y3RkYXRhIG1vZHVsZVxuICAgICAgICBnb29iaVdvcmtmbG93SlMuc3RydWN0ZGF0YS5pbml0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBpbml0IG1vZGFsc1xuICAgICAgICBnb29iaVdvcmtmbG93SlMubW9kYWxzLmluaXQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGluaXQgdGh1bWJuYWlscyAtLT4gbmVlZHMgYWpheCByZWxvYWRcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLnRodW1ibmFpbHMuaW5pdChfZGVmYXVsdHMubWV0c2VkaXRvci50aHVtYm5haWxzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGluaXQganNmIGFqYXggbGlzdGVuZXJcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmpzZkFqYXguaW5pdCggX2RlZmF1bHRzICk7XG4gICAgICAgIFxuICAgICAgICAkKFwiLmZvY3VzYWJsZVwiKS5hdHRyKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgIFx0JChcIi5mb2N1c2FibGVDaGlsZCBpbnB1dFwiKS5hdHRyKFwidGFiaW5kZXhcIiwgXCIwXCIpXHQvL3RhYmluZGV4IDAgbm90IHdvcmtpbmc/P1xuICAgIFx0JChcIi5ub3RGb2N1c2FibGVcIikuYXR0cihcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgXHQkKFwiLm5vdEZvY3VzYWJsZUNoaWxkXCIpLmNoaWxkcmVuKCkuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKTtcblxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGluaXRpYWxpemUgQm9vdHN0cmFwIGZlYXR1cmVzLlxuICAgICAqIEBtZXRob2QgaW5pdEJvb3RzdHJhcEZlYXR1cmVzXG4gICAgICovXG4gICAgZ29vYmlXb3JrZmxvdy5pbml0Qm9vdHN0cmFwRmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VYRUNVVEU6IGdvb2JpV29ya2Zsb3dKUy5pbml0Qm9vdHN0cmFwRmVhdHVyZXMnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJCggJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nICkudG9vbHRpcCgge1xuICAgICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyIGZvY3VzJ1xuICAgICAgICB9ICk7XG4gICAgICAgICQoICdbZGF0YS10b2dnbGUtc2Vjb25kPVwidG9vbHRpcFwiXScgKS50b29sdGlwKCk7XG4gICAgICAgICQoICdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJyApLnBvcG92ZXIoe1xuICAgICAgICAgICAgaHRtbDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGNsZWFuIHVwIEJvb3RzdHJhcCBmZWF0dXJlcy5cbiAgICAgKiBAbWV0aG9kIGNsZWFuVXBCb290c3RyYXBGZWF0dXJlc1xuICAgICAqL1xuICAgIGdvb2JpV29ya2Zsb3cuY2xlYW5VcEJvb3RzdHJhcEZlYXR1cmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWEVDVVRFOiBnb29iaVdvcmtmbG93SlMuY2xlYW5VcEJvb3RzdHJhcEZlYXR1cmVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICQoICcucG9wb3ZlcicgKS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgJCggJy5wb3BvdmVyJyApLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCAkKCAnLnRvb2x0aXAnICkubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICQoICcudG9vbHRpcCcgKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gcHJpbnQgcGFydHMgb2YgdGhlIHBhZ2UuXG4gICAgICogQG1ldGhvZCBwcmludFBhZ2VcbiAgICAgKi9cbiAgICBnb29iaVdvcmtmbG93LnByaW50UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLnByaW50UGFnZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByaW50UmVwb3J0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdsZWZ0JyApLmlubmVySFRNTDtcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnbGluaycgKTtcbiAgICAgICAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgIGxpbmsudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgIGxpbmsuaHJlZiA9ICcje0hlbHBlckZvcm0uc2VydmxldFBhdGhXaXRoSG9zdEFzVXJsfS91aWkvdGVtcGxhdGUvY3NzL2ludHJhbmRhLmNzcz92ZXJzaW9uPTEnO1xuXG4gICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3BlbihcIlwiLCBcIlwiLCBcIlwiKTtcbiAgICAgICAgdmFyIGhlYWQgPSB3aW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgd2luLmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gcHJpbnRSZXBvcnQ7XG5cbiAgICAgICAgd2luLndpbmRvdy5wcmludCgpO1xuICAgICAgICB3aW4uY2xvc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGNsaWNrIHRoZSBzdWJtaXQgYnV0dG9uIG9uIHByaW1lZmFjZXMgYXV0b2NvbXBsZXRlLlxuICAgICAqIEBtZXRob2Qgc3VibWl0RW50ZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgVGhlIElEIG9mIHRoZSBzdWJtaXQgYnV0dG9uLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGUgQSBKYXZhU2NyaXB0IGV2ZW50IHdoaWNoIGhvbGRzIHRoZSBrZXkgZXZlbnRzLlxuICAgICAqICovXG4gICAgZ29vYmlXb3JrZmxvdy5zdWJtaXRFbnRlciA9IGZ1bmN0aW9uKCBpZCwgZSApIHtcbiAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLnN1Ym1pdEVudGVyJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5Y29kZTtcblxuICAgICAgICBpZiAoIHdpbmRvdy5ldmVudCApIHtcbiAgICAgICAgICAgIGtleWNvZGUgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICggZSApIHtcbiAgICAgICAgICAgIGtleWNvZGUgPSBlLndoaWNoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBrZXljb2RlID09IDEzICkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGlkICkuY2xpY2soKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHNldCBvbiBjbGljayBoYW5kbGVyIHRvIHByaW1lZmFjZXMgYXV0b2NvbXBsZXRlIGl0ZW1zLlxuICAgICAqIEBtZXRob2Qgc2V0QXV0b2NvbXBsZXRlTGlzdEhhbmRsZXJcbiAgICAgKiAqL1xuICAgIGdvb2JpV29ya2Zsb3cuc2V0QXV0b2NvbXBsZXRlTGlzdEhhbmRsZXIgPSBmdW5jdGlvbihpZCwgZSkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWEVDVVRFOiBnb29iaVdvcmtmbG93SlMuc2V0QXV0b2NvbXBsZXRlTGlzdEhhbmRsZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdvb2JpV29ya2Zsb3cuc3VibWl0RW50ZXIoaWQsIGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICggJCgnLnVpLWF1dG9jb21wbGV0ZS1wYW5lbCBsaScgKS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgICQoICcudWktYXV0b2NvbXBsZXRlLXBhbmVsIGxpJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29CdXR0b24nKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2dvQnV0dG9uJyApLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2dvQnV0dG9uVGh1bWJzJyApLmNsaWNrKCk7ICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHNldCBvbiBjbGljayBoYW5kbGVyIHRvIHByaW1lZmFjZXMgYXV0b2NvbXBsZXRlIGl0ZW1zLlxuICAgICAqIEBtZXRob2QgZGlzcGxheVByb2dyZXNzQmFyXG4gICAgICogKi9cbiAgICBnb29iaVdvcmtmbG93LmRpc3BsYXlQcm9ncmVzc0JhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWEVDVVRFOiBnb29iaVdvcmtmbG93SlMuZGlzcGxheVByb2dyZXNzQmFyJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdwcm9ncmVzc1BhbmVsJyApO1xuXG4gICAgICAgIGlmICggZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycgKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAncHJvZ3Jlc3NidXR0b24nICkuY2xpY2soKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byB0cmlnZ2VyIGF1dG9zYXZlLlxuICAgICAqIEBtZXRob2QgYXV0b1NhdmVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW50ZXJ2YWwgVGhlIGludGVydmFsIHdoZW4gYXV0b3NhdmUgc3RhcnRzLlxuICAgICAqICovXG4gICAgZ29vYmlXb3JrZmxvdy5hdXRvU2F2ZSA9IGZ1bmN0aW9uKGludGVydmFsKSB7ICAgICAgICAgICAgXG4gICAgICAgIHZhciBpbnRlcnZhbFZhbHVlID0gcGFyc2VJbnQoaW50ZXJ2YWwpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGludGVydmFsVmFsdWUgPiAwKSB7XG4gICAgICAgICAgICBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZU1lbnVBY3Rpb25zRm9ybTphdXRvbWF0aWNTYXZlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChteUJ1dHRvbiE9bnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGludGVydmFsVmFsdWUgKiAxMDAwICogNjApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHRyaWdnZXIgYSBidXR0b24gb24gZW50ZXIuXG4gICAgICogQG1ldGhvZCBmaXJlT25FbnRlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvYmplY3QgVGhlIG9iamVjdCBzZWxlY3RvciB0byB0cmlnZ2VyIGVudGVyLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvciBUaGUgc2VsZWN0b3Igb2YgdGhlIGJ1dHRvbiB0byBjbGljay5cbiAgICAgKiAqL1xuICAgIGdvb2JpV29ya2Zsb3cuZmlyZU9uRW50ZXIgPSBmdW5jdGlvbiAob2JqZWN0LCBzZWxlY3Rvcikge1xuICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLmZpcmVPbkVudGVyJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnLS0+IG9iamVjdCA9ICcsIG9iamVjdCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnLS0+IHNlbGVjdG9yID0gJywgc2VsZWN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnIycgKyBvYmplY3QpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHNlbGVjdG9yKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFxuICAgIFxuICAgICAgICAgICAgXG5cdCAgZ29vYmlXb3JrZmxvdy5sb2FkUGx1Z2luID0gZnVuY3Rpb24gKGRhdGEsIHNlbGVjdG9yKSB7XG5cdFx0aWYgKGRhdGEuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcblx0XHRcdGNvbnNvbGUubG9nKHNlbGVjdG9yICk7XG5cdFx0XHQkKHNlbGVjdG9yKS5tb2RhbCgnc2hvdycpO1xuXHRcdH1cblx0fTtcblxuICAgIHJldHVybiBnb29iaVdvcmtmbG93O1xuICAgIFxufSApKCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuICAgIFxuICAgIGdvb2JpV29ya2Zsb3cuanNmQWpheCA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUganNmIGFqYXggbGlzdGVuZXIuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICAgICAgYmVnaW46IG5ldyByeGpzLlN1YmplY3QoKSxcbiAgICAgICAgY29tcGxldGU6IG5ldyByeGpzLlN1YmplY3QoKSxcbiAgICAgICAgc3VjY2VzczogbmV3IHJ4anMuU3ViamVjdCgpLFxuICAgIFx0aW5pdDogZnVuY3Rpb24oIGNvbmZpZyApIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnSW5pdGlhbGl6aW5nOiBnb29iaVdvcmtmbG93SlMuanNmQWpheC5pbml0JyApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnLS0+IGNvbmZpZyA9ICcsIGNvbmZpZyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLmV4dGVuZCggdHJ1ZSwgX2RlZmF1bHRzLCBjb25maWcgKTtcblxuICAgICAgICAgICAgLy8gbGlzdGVuIHRvIGpzZiBhamF4IGV2ZW50XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpzZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBqc2YuYWpheC5hZGRPbkV2ZW50KGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKU0YgQUpBWCAtIGRhdGE6ICcsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBhamF4bG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhamF4bG9hZGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdiZWdpbic6XG4gICAgICAgICAgICAgICAgICAgICAgICBcdGdvb2JpV29ya2Zsb3cuanNmQWpheC5iZWdpbi5uZXh0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3cgYnV0dG9uIGFqYXggbG9hZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoJy5idG4nKS5oYXNDbGFzcygnYnRuLS1sb2FkZXInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcuYnRuLWFqYXgtbG9hZGVyJykuYWRkQ2xhc3MoJ2luJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXhsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGE/LnNvdXJjZT8uZGF0YXNldC5yZW5kZXJpbWFnZT09J3RydWUnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYW4gdXAgb2JqZWN0IHJlc291cmNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMub2JqZWN0LmZyZWVKU1Jlc291cmNlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93LnRpbnltY2UucmVuZGVySW5wdXRGaWVsZHMoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBcdGdvb2JpV29ya2Zsb3cuanNmQWpheC5jb21wbGV0ZS5uZXh0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXhsb2FkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgXHRnb29iaVdvcmtmbG93LmpzZkFqYXguc3VjY2Vzcy5uZXh0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX2RlYnVnICl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGFuZGxpbmcganNmIGFqYXggc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBidXR0b24gYWpheCBsb2FkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLmJ0bicpLmhhc0NsYXNzKCdidG4tLWxvYWRlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5idG4tYWpheC1sb2FkZXInKS5yZW1vdmVDbGFzcygnaW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdCBCUyBmZWF0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5jbGVhblVwQm9vdHN0cmFwRmVhdHVyZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMuaW5pdEJvb3RzdHJhcEZlYXR1cmVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdCBsYXlvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMubGF5b3V0LmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YT8uc291cmNlPy5kYXRhc2V0LnJlbmRlcmltYWdlPT0ndHJ1ZScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0IG9iamVjdCB2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5vYmplY3QuaW1hZ2VMb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0IHRodW1ibmFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vYmlXb3JrZmxvd0pTLnRodW1ibmFpbHMuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWQgYWx0by1lZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhPy5zb3VyY2U/LmlkICE9IFwic2F2ZUFsdG9DaGFuZ2VzXCIgJiYgZGF0YT8uc291cmNlPy5pZCAhPSBcImFsdG9FZGl0b3JBdXRvY29tcGxldGVTY3JpcHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0Ly9jb25zb2xlLmxvZyhkYXRhLnNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWx0b0VkaXRvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhbHRvLWVkaXRvcicpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbHRvRWRpdG9yRWxlbWVudCAmJiBhbHRvRWRpdG9yRWxlbWVudC5fdGFnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdGFsdG9FZGl0b3JFbGVtZW50Ll90YWcudW5tb3VudCh0cnVlKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRpZih0eXBlb2YgcmlvdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRcdG9wZW5BbHRvRWRpdG9yKHRydWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHR9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlLW1vdW50IG90aGVyIHJpb3QgY29tcG9uZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdpbmRvdy5yaW90X21vdW50cyAmJiB0eXBlb2YgcmlvdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0Zm9yKGxldCBrZXkgb2YgT2JqZWN0LmtleXMod2luZG93LnJpb3RfbW91bnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0XHRpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFx0XHRpZighZG9jdW1lbnQucXVlcnlTZWxlY3RvcihrZXkpLl90YWcpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0XHRcdHJpb3QubW91bnQoa2V5LCByaW90X21vdW50c1trZXldKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdFx0XHRcdGxldCBvcHRzID0gcmlvdF9tb3VudHNba2V5XSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRcdFx0XHRyaW90LnVwZGF0ZShrZXksIG9wdHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgXHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFx0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmYWRlIG91dCBtZXNzYWdlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHQkKCcqW2RhdGEtZmFkZW91dG1lc3NhZ2VzPVwidHJ1ZVwiXSBsaScpLmZhZGVPdXQoMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcdH0sIDE1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBib3ggc3RhdHVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmJveC5nZXRCb3hTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0IGJ1dHRvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMuYnV0dG9ucy5pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdCBib29rbWFya3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMuYm9va21hcmtzLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0IHRpbnlNQ0UgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vYmlXb3JrZmxvd0pTLnRpbnltY2UuaW5pdChfZGVmYXVsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5zZXRBdXRvY29tcGxldGVMaXN0SGFuZGxlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5sYXlvdXQuc2V0SW1hZ2VDb21tZW50SGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGdvb2JpV29ya2Zsb3c7XG4gICAgXG59ICkoIGdvb2JpV29ya2Zsb3dKUyB8fCB7fSwgalF1ZXJ5ICk7XG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgICAgIG5hdmlnYXRpb25TZWxlY3RvcjogJyNuYXZpZ2F0aW9uJyxcbiAgICAgICAgbmF2aWdhdGlvbkFjdGlvblNlbGVjdG9yOiAnI25hdmlnYXRpb25BY3Rpb25zJ1xuICAgIH07XG4gICAgXG4gICAgZ29vYmlXb3JrZmxvdy5qdW1wVG9QYWdlID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFRvZ2dsZSBiZXR3ZWVuIGN1cnJlbnQgcGFnZSBpbmZvIGFuZCBhbiBpbnB1dCBmaWVsZCBpbiB0aGUgTUVUUyBlZGl0b3IuIFRoZSBpbnB1dCBmaWVsZCBpcyBhY3RpdmF0ZWQgb24gY2xpY2suXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICBcdGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdJbml0aWFsaXppbmc6IGdvb2JpV29ya2Zsb3dKUy5qdW1wVG9QYWdlLmluaXQnICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJCggJ2JvZHknICkub24oICdjbGljaycsICcjY3VycmVudFBhZ2UsICNjdXJyZW50UGFnZVByZWZpeCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgY3VyUGFnZVByZSA9ICQoJyNjdXJyZW50UGFnZVByZWZpeCcpO1xuXG5cdFx0XHRcdC8vIE1ha2UgaW5wdXQgc3BhbiBhdCB0aGUgc2FtZSBzaXplIGFzICNjdXJQYWdlUHJlZml4XG5cdFx0XHRcdC8vIHRoaXMgcHJldmVudHMgbGF5b3V0IHNoaWZ0c1xuXHRcdFx0XHR2YXIgY3VycmVudFBhZ2VXaWR0aCA9ICBjdXJQYWdlUHJlWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuXHRcdFx0XHR2YXIgY3VycmVudFBhZ2VIZWlnaHQgPSAgY3VyUGFnZVByZVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgY3VyUGFnZVByZS5uZXh0KCkuY3NzKCd3aWR0aCcsIGN1cnJlbnRQYWdlV2lkdGgpO1xuICAgICAgICAgICAgICAgIGN1clBhZ2VQcmUubmV4dCgpLmNzcygnaGVpZ2h0JywgY3VycmVudFBhZ2VIZWlnaHQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNob3cgc3BhbiBjb250YWluaW5nIGFuIGlucHV0IGZpZWxkXG4gICAgICAgICAgICAgICAgY3VyUGFnZVByZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgY3VyUGFnZVByZS5uZXh0KCkuY3NzKCBcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIiApXG5cbiAgICAgICAgICAgICAgICAkKCcjanVtcFRvSW1hZ2VBdXRvY29tcGxldGUgaW5wdXQnKS5mb2N1cygpO1xuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCAnYm9keScgKS5vbiggJ2JsdXInLCAnI2p1bXBUb0ltYWdlQXV0b2NvbXBsZXRlIGlucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCggJyNqdW1wVG9JbWFnZUF1dG9jb21wbGV0ZScgKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCggICcjY3VycmVudFBhZ2VQcmVmaXgnICApLnNob3coKTtcbiAgICAgICAgICAgIH0gKTsgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnI2p1bXBUb1BhZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCB0aGlzICkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoIHRoaXMgKS5uZXh0KCkuY3NzKCBcImRpc3BsYXlcIiwgXCJpbmhlcml0XCIgKVxuICAgICAgICAgICAgICAgICQoJyNqdW1wVG9UaHVtYkF1dG9jb21wbGV0ZSBpbnB1dCcpLmZvY3VzKCk7XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoICdib2R5JyApLm9uKCAnYmx1cicsICcjanVtcFRvVGh1bWJBdXRvY29tcGxldGUgaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCAnI2p1bXBUb1RodW1iQXV0b2NvbXBsZXRlJyApLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCAgJyNqdW1wVG9QYWdlJyAgKS5zaG93KCk7XG4gICAgICAgICAgICB9ICk7ICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9jb2x1bW5zID0ge1xuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICBjZW50ZXI6IDAsXG4gICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICBoYW5kbGVzOiB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgX2RlZmF1bHRzID0ge307XG4gICAgXG4gICAgZ29vYmlXb3JrZmxvdy5sYXlvdXQgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGluaXRpYWxpemUgdGhlIGxheW91dCBtb2R1bGUuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLmxheW91dC5pbml0JyApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5leHRlbmQoIHRydWUsIF9kZWZhdWx0cywgY29uZmlnICk7XG5cbiAgICAgICAgICAgIGlmICggd2luZG93Lm1hdGNoTWVkaWEoICcobWluLXdpZHRoOiA5OTNweCknICkubWF0Y2hlcyApIHtcbiAgICAgICAgICAgICAgICAvLyBzZXQgcmVzaXplIGV2ZW50XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdyZXNpemUnLCBfc2V0UmVzaXplRXZlbnRzICk7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdvcmllbnRhdGlvbmNoYW5nZScsIF9zZXRSZXNpemVFdmVudHMgKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldCByZXNpemFibGUgZWxlbWVudHNcbiAgICAgICAgICAgICAgICBfc2V0UmVzaXphYmxlRWxlbWVudHMoKTtcblxuICAgICAgICAgICAgICAgIC8vIGdldCBzYXZlZCB3aWR0aHMgZnJvbSBzZXNzaW9uIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICBfZ2V0U2F2ZWRXaWR0aHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2V0IHRvcCBtYXJnaW4gZm9yIHRodW1ibmFpbHNcbiAgICAgICAgICAgIF9zZXRUaHVtYm5haWxzTWFyZ2luKCk7XG4gICAgICAgICAgICAvLyBzaG93IGNvbnRlbnQgd3JhcHBlclxuICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudFdyYXBwZXInICkuc2hvdygpO1xuLy8gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgLy8gc2V0IGZsZXhpYmxlIHJvdyBjb2x1bW5zICAgICAgICAgICAgXG4gICAgICAgICAgICBfc2V0RmxleGlibGVSb3dDb2x1bW5zKCk7XG4gICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCBwb3NpdGlvbiBvZiB0b2MgYWN0aW9uc1xuICAgICAgICAgICAgJCggJyNzdHJ1Y3R1cmVBY3Rpb25zJyApLmNzcyggJ2xlZnQnLCAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS53aWR0aCgpIC0gNDUgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9zZXQgdGFiSW5kZXhcbiAgICAgICAgICAgIF9zZXRUYWJpbmRleCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL3NldCBpbWFnZSBjb21tZW50cyBoZWlnaHRcbiAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2VDb21tZW50SGVpZ2h0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHNldCB0aGUgY29ycmVjdCBoZWlnaHQgb2YgdGhlIG9iamVjdCB2aWV3IGNvbHVtbi5cbiAgICAgICAgICogQG1ldGhvZCBzZXRPYmplY3RWaWV3SGVpZ2h0XG4gICAgICAgICAqL1xuICAgICAgICBzZXRPYmplY3RWaWV3SGVpZ2h0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLmxheW91dC5zZXRPYmplY3RWaWV3SGVpZ2h0JyApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcGFnZUNvbnRlbnRSaWdodEhlaWdodCA9ICQoICcjcGFnZUNvbnRlbnRSaWdodCcgKS5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2xXcmFwcGVySGVpZ2h0ID0gJCggJyNpbWFnZU5hdmlnYXRpb24nICkub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBpbWFnZUNvbW1lbnRIZWlnaHQgPSAkKCAnI2ltYWdlQ29tbWVudEFyZWEnICkub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICghaW1hZ2VDb21tZW50SGVpZ2h0KXtcbiAgICAgICAgICAgIFx0aW1hZ2VDb21tZW50SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJCggJyNtYWluSW1hZ2UnICkuY3NzKCAnaGVpZ2h0JywgcGFnZUNvbnRlbnRSaWdodEhlaWdodCAtIGNvbnRyb2xXcmFwcGVySGVpZ2h0IC0gaW1hZ2VDb21tZW50SGVpZ2h0IC0gNDUgKTtcbiAgICAgICAgfSxcblx0ICAgIC8qKlxuXHQgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgaW5pdGlhbCBpbWFnZSBjb21tZW50IGhlaWdodFxuXHQgICAgICogQG1ldGhvZCBzZXRJbWFnZUNvbW1lbnRIZWlnaHRcblx0ICAgICAqL1xuXHQgICAgc2V0SW1hZ2VDb21tZW50SGVpZ2h0OiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjb21tZW50QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjQ29tbWVudFwiKTtcblx0XHRcdGlmKGNvbW1lbnRBcmVhKSB7XG5cdFx0XHRcdGZ1bmN0aW9uIHNldEhlaWdodCgpIHtcblx0XHRcdFx0XHR2YXIgbGluZXMgPSBNYXRoLm1heCgxLCBjb21tZW50QXJlYS52YWx1ZS5zcGxpdChcIlxcblwiKS5sZW5ndGgpO1xuXHRcdFx0XHRcdGNvbW1lbnRBcmVhLnN0eWxlLmhlaWdodCA9IChsaW5lcyAqIDE3ICsgMTMpICsgXCJweFwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNldEhlaWdodCgpO1xuXHQgIFx0XHRcdC8vYWxzbyBhZGQgZXZlbnQgbGlzdGVuZXIgb24gaW5wdXRcblx0ICBcdFx0XHRjb21tZW50QXJlYS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgc2V0SGVpZ2h0KTtcblx0XHRcdH1cblx0XHR9XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGFkZCBUYWJpbmRleCB0byBlbGVtZW50cy5cbiAgICAgKiBAbWV0aG9kIF9zZXRUYWJpbmRleFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9zZXRUYWJpbmRleCgpe1xuICAgIFx0aWYgKCBfZGVidWcgKSB7XG4gICAgXHRcdGNvbnNvbGUubG9nKCAnIEVYRUNVVEU6IF9zZXRUYWJpbmRleCcgKTtcbiAgICBcdH1cbiAgICBcdCQoXCIuZm9jdXNhYmxlQ2hpbGRDc3MgaW5wdXRcIikuYWRkQ2xhc3MoXCJmb2N1c2FibGVcIik7XG4gICAgXHQkKFwiLmZvY3VzYWJsZVwiKS5hdHRyKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICBcdCQoXCIuZm9jdXNhYmxlQ2hpbGQgaW5wdXRcIikuYXR0cihcInRhYmluZGV4XCIsIFwiMFwiKTtcdC8vdGFiaW5kZXggMCBub3Qgd29ya2luZz8/XG4gICAgIFx0JChcIi5ub3RGb2N1c2FibGVcIikuYXR0cihcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgIFx0JChcIi5ub3RGb2N1c2FibGVDaGlsZFwiKS5jaGlsZHJlbigpLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIik7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gc2V0IHRoZSByZXNpemFibGUgZWxlbWVudHMuXG4gICAgICogQG1ldGhvZCBfc2V0UmVzaXphYmxlRWxlbWVudHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0UmVzaXphYmxlRWxlbWVudHMoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfc2V0UmVzaXphYmxlRWxlbWVudHMnICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgbGVmdCBjb2x1bW4gcmVzaXphYmxlXG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLnJlc2l6YWJsZSh7XG4gICAgICAgICAgICBoYW5kbGVzOiAnZScsXG4gICAgICAgICAgICBtaW5XaWR0aDogMjAwLFxuICAgICAgICAgICAgbWF4V2lkdGg6ICQod2luZG93KS53aWR0aCgpICogMC40NSxcbiAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgIGlmIChfZGVmYXVsdHMuZGlzcGxheUltYWdlQXJlYSkgeyAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50Q2VudGVyJyApLm91dGVyV2lkdGgoICQoIHdpbmRvdyApLm91dGVyV2lkdGgoKSAtICQoICcjcGFnZUNvbnRlbnRSaWdodCcgKS5vdXRlcldpZHRoKCkgLSAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS5vdXRlcldpZHRoKCkgLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudExlZnQgLnVpLXJlc2l6YWJsZS1oYW5kbGUnICkuY3NzKCAnbGVmdCcsICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLm91dGVyV2lkdGgoKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCggJyNzdHJ1Y3R1cmVBY3Rpb25zJyApLmNzcyggJ2xlZnQnLCAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS53aWR0aCgpIC0gNDUgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudENlbnRlcicgKS5vdXRlcldpZHRoKCAkKCB3aW5kb3cgKS5vdXRlcldpZHRoKCkgLSAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS5vdXRlcldpZHRoKCkgKTtcbiAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdsZWZ0JywgJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpICk7XG4gICAgICAgICAgICAgICAgJCggJyNzdHJ1Y3R1cmVBY3Rpb25zJyApLmNzcyggJ2xlZnQnLCAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS53aWR0aCgpIC0gNDUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMubGF5b3V0LnNldE9iamVjdFZpZXdIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICBfc2V0RmxleGlibGVSb3dDb2x1bW5zKCk7XG4gICAgICAgICAgICAgICAgX3NldENvbHVtbldpZHRoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm9uKCAncmVzaXplJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0gKTtcbiAgICAgICAvLyBpZiAoX2RlZmF1bHRzLmRpc3BsYXlJbWFnZUFyZWEpIHtcbiAgICAgICAgICAgIC8vIHNldCByaWdodCBjb2x1bW4gcmVzaXphYmxlXG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRSaWdodCcgKS5yZXNpemFibGUoe1xuICAgICAgICAgICAgaGFuZGxlczogJ3cnLFxuICAgICAgICAgICAgbWluV2lkdGg6IDQwMCxcbiAgICAgICAgICAgIG1heFdpZHRoOiAkKHdpbmRvdykud2lkdGgoKSAvIDIsXG4gICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG4gICAgICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudENlbnRlcicgKS5vdXRlcldpZHRoKCAkKCB3aW5kb3cgKS5vdXRlcldpZHRoKCkgLSAkKCAnI3BhZ2VDb250ZW50UmlnaHQnICkub3V0ZXJXaWR0aCgpIC0gJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpIC0xKTtcbiAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50UmlnaHQgLnVpLXJlc2l6YWJsZS1oYW5kbGUnICkuY3NzKCAncmlnaHQnLCAkKCAnI3BhZ2VDb250ZW50UmlnaHQnICkub3V0ZXJXaWR0aCgpIC0gNyApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5sYXlvdXQuc2V0T2JqZWN0Vmlld0hlaWdodCgpO1xuICAgICAgICAgICAgICAgIF9zZXRGbGV4aWJsZVJvd0NvbHVtbnMoKTtcbiAgICAgICAgICAgICAgICBfc2V0Q29sdW1uV2lkdGgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkub24oICdyZXNpemUnLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSApO1xuICAgICAgICBcbiAgICAgICAgJCggJyNwYWdlQ29udGVudExlZnQgLnVpLXJlc2l6YWJsZS1oYW5kbGUnICkuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgJCggJyNwYWdlQ29udGVudFJpZ2h0IC51aS1yZXNpemFibGUtaGFuZGxlJyApLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gcmVzZXQgdGhlIHJlc2l6YWJsZSBlbGVtZW50cy5cbiAgICAgKiBAbWV0aG9kIF9yZXNldFJlc2l6YWJsZUVsZW1lbnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gX3Jlc2V0UmVzaXphYmxlRWxlbWVudHMoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfcmVzZXRSZXNpemFibGVFbGVtZW50cycgKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLmNzcyggJ3dpZHRoJywgJzIwJScgKTtcbiAgICAgICAgaWYgKF9kZWZhdWx0cy5kaXNwbGF5SW1hZ2VBcmVhKSB7XG5cbiAgICAgICAgJCggJyNwYWdlQ29udGVudENlbnRlciwgI3BhZ2VDb250ZW50UmlnaHQnICkuY3NzKCAnd2lkdGgnLCAnNDAlJyApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudENlbnRlcicpLmNzcyggJ3dpZHRoJywgJzgwJScgKTtcbiAgICAgICAgfVxuICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdsZWZ0JywgJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpICk7XG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRMZWZ0IC51aS1yZXNpemFibGUtaGFuZGxlJyApLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRSaWdodCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdyaWdodCcsICQoICcjcGFnZUNvbnRlbnRSaWdodCcgKS5vdXRlcldpZHRoKCkgLSA3ICk7XG4gICAgICAgICQoICcjcGFnZUNvbnRlbnRSaWdodCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICAkKCAnI3N0cnVjdHVyZUFjdGlvbnMnICkuY3NzKCAnbGVmdCcsICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLndpZHRoKCkgLSA0NSApO1xuICAgICAgICBfc2V0Q29sdW1uV2lkdGgoKTtcbiAgICAgICAgX2dldFNhdmVkV2lkdGhzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIGNvbHVtbiB3aWR0aHMgZnJvbSBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgICogQG1ldGhvZCBfc2V0Q29sdW1uV2lkdGhcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0Q29sdW1uV2lkdGgoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfc2V0Q29sdW1uV2lkdGgnICk7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICBfY29sdW1ucy5sZWZ0ID0gJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpO1xuICAgICAgICBfY29sdW1ucy5jZW50ZXIgPSAkKCAnI3BhZ2VDb250ZW50Q2VudGVyJyApLm91dGVyV2lkdGgoKTtcbiAgICAgICAgX2NvbHVtbnMucmlnaHQgPSAkKCAnI3BhZ2VDb250ZW50UmlnaHQnICkub3V0ZXJXaWR0aCgpO1xuICAgICAgICBfY29sdW1ucy5oYW5kbGVzLmxlZnQgPSBwYXJzZUludCggJCggJyNwYWdlQ29udGVudExlZnQgLnVpLXJlc2l6YWJsZS1oYW5kbGUnICkuY3NzKCAnbGVmdCcgKSApO1xuICAgICAgICBfY29sdW1ucy5oYW5kbGVzLnJpZ2h0ID0gcGFyc2VJbnQoICQoICcjcGFnZUNvbnRlbnRSaWdodCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdyaWdodCcgKSApO1xuXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oICd3Zl9jb2x1bW5XaWR0aHMnLCBKU09OLnN0cmluZ2lmeSggX2NvbHVtbnMgKSApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHNldCB0aGUgd2luZG93IHJlemlzZSBldmVudC5cbiAgICAgKiBAbWV0aG9kIF9zZXRSZXNpemVFdmVudHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0UmVzaXplRXZlbnRzKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogX3NldFJlc2l6ZUV2ZW50cycgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9yZXNldFJlc2l6YWJsZUVsZW1lbnRzKCk7XG4gICAgICAgIGdvb2JpV29ya2Zsb3dKUy5sYXlvdXQuc2V0T2JqZWN0Vmlld0hlaWdodCgpO1xuICAgICAgICBfc2V0RmxleGlibGVSb3dDb2x1bW5zKCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gZ2V0IHRoZSBzYXZlZCB3aWR0aHMgZnJvbSBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgICogQG1ldGhvZCBfZ2V0U2F2ZWRXaWR0aHNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfZ2V0U2F2ZWRXaWR0aHMoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfZ2V0U2F2ZWRXaWR0aHMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oICd3Zl9jb2x1bW5XaWR0aHMnICkgIT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgX2NvbHVtbnMgPSBKU09OLnBhcnNlKCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCAnd2ZfY29sdW1uV2lkdGhzJyApICk7XG4gICAgICAgICAgICBpZiAoX2RlZmF1bHRzLmRpc3BsYXlJbWFnZUFyZWEpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCggd2luZG93ICkub3V0ZXJXaWR0aCgpIDwgX2NvbHVtbnMubGVmdCArICBfY29sdW1ucy5jZW50ZXIgKyBfY29sdW1ucy5yaWdodCB8fCBfY29sdW1ucy5yaWdodCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLm91dGVyV2lkdGgoTWF0aC5mbG9vcihfY29sdW1ucy5sZWZ0KSApO1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50Q2VudGVyJyApLm91dGVyV2lkdGgoTWF0aC5mbG9vcigoJCh3aW5kb3cpLndpZHRoKCkgLSAgJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpKS8yICkpO1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50UmlnaHQnICkub3V0ZXJXaWR0aCggKE1hdGguZmxvb3IoJCh3aW5kb3cpLndpZHRoKCkgLSAgJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCgpICkgLzIpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS5vdXRlcldpZHRoKE1hdGguZmxvb3IoIF9jb2x1bW5zLmxlZnQgKSk7XG4gICAgICAgICAgICAgICAgICAgICQoICcjcGFnZUNvbnRlbnRDZW50ZXInICkub3V0ZXJXaWR0aChNYXRoLmZsb29yKCBfY29sdW1ucy5jZW50ZXIgKSk7XG4gICAgICAgICAgICAgICAgICAgICQoICcjcGFnZUNvbnRlbnRSaWdodCcgKS5vdXRlcldpZHRoKE1hdGguZmxvb3IoIF9jb2x1bW5zLnJpZ2h0ICkgLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdsZWZ0JywgX2NvbHVtbnMuaGFuZGxlcy5sZWZ0ICk7XG4gICAgICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudFJpZ2h0IC51aS1yZXNpemFibGUtaGFuZGxlJyApLmNzcyggJ3JpZ2h0JywgX2NvbHVtbnMuaGFuZGxlcy5yaWdodCApOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCggJyNwYWdlQ29udGVudExlZnQnICkub3V0ZXJXaWR0aCggX2NvbHVtbnMubGVmdCApO1xuICAgICAgICAgICAgICAgICQoICcjcGFnZUNvbnRlbnRDZW50ZXInICkub3V0ZXJXaWR0aCgkKHdpbmRvdykud2lkdGgoKSAtICAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS5vdXRlcldpZHRoKCkgKTtcbiAgICAgICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCAudWktcmVzaXphYmxlLWhhbmRsZScgKS5jc3MoICdsZWZ0JywgX2NvbHVtbnMuaGFuZGxlcy5sZWZ0ICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdG9wIG1hcmdpbiBvZiB0aGUgdGh1bWJuYWlsIHdyYXBwZXIuXG4gICAgICogQG1ldGhvZCBfc2V0VGh1bWJuYWlsc01hcmdpblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9zZXRUaHVtYm5haWxzTWFyZ2luKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogX3NldFRodW1ibmFpbHNNYXJnaW4nICk7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuLy8gICAgICAgIHZhciB0aHVtYm5haWxzTmF2aWdhdGlvbkhlaWdodCA9ICQoICcjdGh1bWJuYWlsc05hdmlnYXRpb24nICkuaGVpZ2h0KCk7XG4vLyAgICAgICAgXG4vLyAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA5OTNweCknKS5tYXRjaGVzKSB7XG4vLyAgICAgICAgICAgICQoICcjdGh1bWJuYWlscycgKS5jc3MoICdtYXJnaW4tdG9wJywgdGh1bWJuYWlsc05hdmlnYXRpb25IZWlnaHQgKyAxMCApO1xuLy8gICAgICAgIH1cbi8vICAgICAgICBlbHNlIHtcbi8vICAgICAgICAgICAgJCggJyN0aHVtYm5haWxzJyApLmNzcyggJ21hcmdpbi10b3AnLCA2NiApO1xuLy8gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIGZsZXhpYmxlIHJvdyBjb2x1bW4gd2lkdGguXG4gICAgICogQG1ldGhvZCBfc2V0RmxleGlibGVSb3dDb2x1bW5zXG4gICAgICovXG4gICAgZnVuY3Rpb24gX3NldEZsZXhpYmxlUm93Q29sdW1ucygpIHtcbiAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ0VYRUNVVEU6IF9zZXRGbGV4aWJsZVJvd0NvbHVtbnMnICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQoICcucm93LWZsZXhpYmxlJyApLndpZHRoKCkgPiAwICYmICQoICcucm93LWZsZXhpYmxlJyApLndpZHRoKCkgPCA1NTAgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoICcucm93LWZsZXhpYmxlJyApLmFkZENsYXNzKCAnZnVsbHdpZHRoJyApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJCggJy5yb3ctZmxleGlibGUnICkucmVtb3ZlQ2xhc3MoICdmdWxsd2lkdGgnICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGdvb2JpV29ya2Zsb3c7XG4gICAgXG59ICkoIGdvb2JpV29ya2Zsb3dKUyB8fCB7fSwgalF1ZXJ5ICk7XG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIFxuICAgIGdvb2JpV29ya2Zsb3cubWVTY3JvbGxQb3MgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplIHRoaXMgbW9kdWxlOiBVcGRhdGUgdGhlIGN1cnJlbnQgdmlldywgXG4gICAgICAgICAqIHNhdmUgYW5kIHJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9ucy5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLS0ganNmIGRhdGEgb2JqLCBhdmFpbGFibGUgaW4gYDxmOmFqYXg+YFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48c3RyaW5nPn0gW29wdHNdIC0tIG9wdGlvbnMgdG8gYmUgcGFzc2VkXG4gICAgICAgICAqL1xuICAgICAgaW5pdDogZnVuY3Rpb24oZGF0YSwge3ZpZXcgPSBnb29iaVdvcmtmbG93Q29uZmlnLmN1cnJlbnRWaWV3LCBzYXZlU2Nyb2xsUG9zID0gdHJ1ZX0gPSB7fSkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIGNvbnNvbGUubG9nKCAnSW5pdDogZ29vYmlXb3JrZmxvd0pTLm1lU2Nyb2xsUG9zLmluaXQnICk7XG4gICAgICAgIGlmICggX2RlYnVnICkgY29uc29sZS5sb2coICd2aWV3OicsIHZpZXcsJ3x8fCcsICdzYXZlU2Nyb2xsUG9zOicsIHNhdmVTY3JvbGxQb3MpO1xuXG4gICAgICAgIC8vIFNldCBnb29iaVdvcmtmbG93Q29uZmlnLmN1cnJlbnRWaWV3XG4gICAgICAgIHRoaXMudXBkYXRlVmlldyhkYXRhLCB2aWV3KVxuICAgICAgICAvLyBTYXZlIGFuZCByZXN0b3JlIHNjcm9sbCBwb3NpdGlvblxuICAgICAgICB0aGlzLnJlc3RvcmVTY3JvbGxQb3NDZW50ZXIoZGF0YSwgc2F2ZVNjcm9sbFBvcylcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlIHN0YXRlID0+IHNldCBnb29iaVdvcmtmbG93Q29uZmlnLmN1cnJlbnRWaWV3LlxuICAgICAgICogVGhpcyBpcyBkb25lLCBiZWNhdXNlIHRoaXMgdmFyaWFibGUgaXMgbm90IHVwZGF0ZWQgaW4gQUpBWCBjYWxscy5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLS0ganNmIGRhdGEgb2JqLCBhdmFpbGFibGUgaW4gYDxmOmFqYXg+YFxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3ZpZXddIC0tIG5hbWUgb2YgdGhlIGN1cnJlbnQgdmlld1xuICAgICAgICovXG4gICAgICB1cGRhdGVWaWV3OiBmdW5jdGlvbihkYXRhLCB2aWV3KSB7XG4gICAgICAgIGlmKGRhdGEuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICBpZihfZGVidWcpIGNvbnNvbGUubG9nKHt2aWV3fSlcbiAgICAgICAgICBnb29iaVdvcmtmbG93Q29uZmlnLmN1cnJlbnRWaWV3ID0gdmlldztcbiAgICAgICAgfVxuICAgICAgfSxcblxuXG4gICAgICAvKiogTWFwIHZpZXcgbmFtZXMgdG8ga2V5cyB1c2VkIGluIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHZpZXcgLS0gbmFtZSBvZiBhIHZpZXdcbiAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGtleSB0byBhY2Nlc3MgdGhlIHNjcm9sbCBwb3NpdGlvbiBvZiBhIHZpZXdcbiAgICAgICAqL1xuICAgICAgZ2V0U2Nyb2xsUG9zS2V5OiBmdW5jdGlvbih2aWV3KSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSB7XG4gICAgICAgICAgJ1BhZ2luaWVydW5nJzogJ21lUGFnaW5hdGlvbicsXG4gICAgICAgICAgJ1N0cnVrdHVyZGF0ZW4nOiAnbWVTdHJ1Y3REYXRhJyxcbiAgICAgICAgICAnTWV0YWRhdGVuJzogJ21lTWV0YWRhdGEnLFxuICAgICAgICAgICdGaWxlJzogJ21lRmlsZScsXG4gICAgICAgICAgJ2RlZmF1bHQnOiAnZGVmYXVsdCcsXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXNbdmlld10gfHwga2V5c1snZGVmYXVsdCddO1xuICAgICAgfSxcblxuICAgICAgLyoqIENhbGN1bGF0ZSB0aGUgaGVpZ2h0IG9mIGVycm9yIG1lc3NhZ2VzIFxuICAgICAgICogZGlzcGxheWVkIGF0IHRoZSB0b3Agb2YgdGhlIG1lc3NhZ2UgZWRpdG9ycyBjZW50ZXIgY29sdW1uLlxuICAgICAgICogV2hlbiByZXJlbmRlcmluZyBhIHZpZXcgdGhlIG51bWJlciBvZiBtZXNzYWdlIChhbmQgdGh1cyB0aGVpciBoZWlnaHQpIG1heSBjaGFuZ2UuXG4gICAgICAgKiBBY2NvdW50aW5nIGZvciB0aGVzZSBjaGFuZ2VzLCBrZWVwcyB0aGUgc2Nyb2xsIHBvc2l0aW9uIGF0IHRoZSBzYW1lIGxldmVsLlxuICAgICAgICogQHJldHVybnMge251bWJlcn0gbWVzc2FnZUhlaWdodCAtLSBoZWlnaHQgb2YgdGhlIGFnZ3JlZ2F0ZWQgZXJyb3IgbWVzc2FnZXNcbiAgICAgICAqL1xuICAgICAgZ2V0RXJyb3JNc2dIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBHZXQgaGVpZ2h0IGFuZCBtYXJnaW4gb2YgZXJyb3IgbWVzc2FnZXMgYXQgdGhlIHRvcCBvZiB0aGUgY2VudGVyIGNvbFxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlcycpO1xuICAgICAgICBjb25zdCBtZXNzYWdlc1N0eWxlcyA9IGdldENvbXB1dGVkU3R5bGUobWVzc2FnZXMpO1xuICAgICAgICBsZXQgbWVzc2FnZUhlaWdodCA9IG1lc3NhZ2VzLm9mZnNldEhlaWdodDtcbiAgICAgICAgbWVzc2FnZUhlaWdodCArPSBwYXJzZUludChtZXNzYWdlc1N0eWxlcy5tYXJnaW5Ub3ApXG4gICAgICAgIG1lc3NhZ2VIZWlnaHQgKz0gcGFyc2VJbnQobWVzc2FnZXNTdHlsZXMubWFyZ2luQm90dG9tKVxuICAgICAgICByZXR1cm4gbWVzc2FnZUhlaWdodDtcbiAgICAgIH0sXG5cbiAgICAgIC8qKiBTdG9yZSBhbmQgcmVzdG9yZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIGEgdmlldy4gXG4gICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW4gYWpheCBjYWxscy5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0tIGpzZiBkYXRhIG9iamVjdCwgYXZhaWxhYmxlIGluIGA8ZjphamF4PmBcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2F2ZVNjcm9sbFBvcyAtLSBkZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbiBpcyBzdG9yZWQgaW4gc2Vzc2lvbiBzdG9yYWdlXG4gICAgICAgKi9cbiAgICAgIHJlc3RvcmVTY3JvbGxQb3NDZW50ZXI6IGZ1bmN0aW9uKGRhdGEsIHNhdmVTY3JvbGxQb3MpIHtcbiAgICAgICAgaWYoX2RlYnVnKSBjb25zb2xlLmxvZyh7c2F2ZVNjcm9sbFBvc30pXG5cbiAgICAgICAgLy8gU2F2ZSBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgaWYoc2F2ZVNjcm9sbFBvcykge1xuICAgICAgICAgIC8vIEFqYXggY2FsbCBzdGFydHNcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdiZWdpbicpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmVTY3JvbGxQb3MoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBamF4IGNhbGwgaXMgZG9uZVxuICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgIHRoaXMucmVzdG9yZVNjcm9sbFBvcygpXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAvKiogR2V0IHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbiwgYW5kIHN0b3JlIGl0IGluIHNlc3Npb24gc3RvcmFnZSAqL1xuICAgIHN0b3JlU2Nyb2xsUG9zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoX2RlYnVnKSBjb25zb2xlLmxvZygnUkVTVE9SRSBTQ1JPTEwgUE9TJylcblxuICAgICAgICBjb25zdCBjb250ZW50TGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlQ29udGVudExlZnQnKTtcbiAgICAgICAgY29uc3QgY29udGVudENlbnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwYWdlQ29udGVudENlbnRlcicpO1xuICAgICAgICBjb25zdCB2aWV3ID0gZ29vYmlXb3JrZmxvd0NvbmZpZy5jdXJyZW50VmlldztcbiAgICAgICAgY29uc3Qga2V5ID0gIHRoaXMuZ2V0U2Nyb2xsUG9zS2V5KHZpZXcpO1xuXG4gICAgICAgIC8vIFJlc3RvcmUgcHJldmlvdXMgc2Nyb2xsIHBvc2l0aW9ucyBvZiBhbGwgdmlld3NcbiAgICAgICAgY29uc3QgcmVzdG9yZWRTY3JvbGxQb3NBbGwgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdnd19tZV9zY3JvbGxQb3MnKTtcblxuICAgICAgICAvLyBDdXJyZW50IHZpZXc6IGdldCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNlbnRlciBkaXZcbiAgICAgICAgY29uc3QgY2VudGVyU2Nyb2xsUG9zID0gY29udGVudENlbnRlci5zY3JvbGxUb3A7IC8vIGFic29sdXRlIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IGN1clNjcm9sbFBvcyA9IGNlbnRlclNjcm9sbFBvcyAtIHRoaXMuZ2V0RXJyb3JNc2dIZWlnaHQoKTtcblxuICAgICAgICBsZXQgc2Nyb2xsUG9zQWxsID0ge307XG4gICAgICAgIGlmKHJlc3RvcmVkU2Nyb2xsUG9zQWxsKSB7XG4gICAgICAgICAgc2Nyb2xsUG9zQWxsID0gSlNPTi5wYXJzZShyZXN0b3JlZFNjcm9sbFBvc0FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXNzaWduIGEgZGVmYXVsdCBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgc2Nyb2xsUG9zQWxsLmRlZmF1bHQgPSAnMCc7XG5cbiAgICAgICAgLy8gSW5pdCBvciB1cGRhdGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGxlZnQgY29sdW1uXG4gICAgICAgIHNjcm9sbFBvc0FsbC5tZUxlZnQgPSBjb250ZW50TGVmdC5zY3JvbGxUb3A7XG5cbiAgICAgICAgLy8gSW5pdCBvciB1cGRhdGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNlbnRlciBjb2x1bW5cbiAgICAgICAgc2Nyb2xsUG9zQWxsW2tleV0gPSBjdXJTY3JvbGxQb3M7XG5cbiAgICAgICAgLy8gV3JpdGUgdXBkYXRlZCBzY3JvbGwgcG9zaXRpb25zIHRvIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdnd19tZV9zY3JvbGxQb3MnLCBKU09OLnN0cmluZ2lmeShzY3JvbGxQb3NBbGwpKVxuXG4gICAgICAgIC8vIERlYnVnZ2luZ1xuICAgICAgICBpZihfZGVidWcpIGNvbnNvbGUubG9nKHtjdXJTY3JvbGxQb3N9KVxuICAgICAgICBpZihfZGVidWcpIGNvbnNvbGUubG9nKCclY3Njcm9sbFBvcyBzYXZlZCcsICdiYWNrZ3JvdW5kOiBsaW1lOyBjb2xvcjogI2ZmZicpXG4gICAgICAgIGlmKF9kZWJ1ZykgY29uc29sZS50YWJsZSh7c2Nyb2xsUG9zQWxsfSlcbiAgICAgIH0sXG5cbiAgICAgIC8qKiBHZXQgcHJldmlvdXMgc2Nyb2xsIHBvc2l0aW9ucyBmcm9tIHNlc3Npb24gc3RvcmFnZSwgYW5kXG4gICAgICAgKiBjYWxjdWxhdGUgKyByZXN0b3JlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uIGJhc2VkIG9uIHRoZXNlIHZhbHVlcy5cbiAgICAgICAqL1xuICAgICAgcmVzdG9yZVNjcm9sbFBvczogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2VDb250ZW50TGVmdCcpO1xuICAgICAgICBjb25zdCBjb250ZW50Q2VudGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BhZ2VDb250ZW50Q2VudGVyJyk7XG5cbiAgICAgICAgLy8gR2V0IHNjcm9sbCBwb3NpdGlvbiBmcm9tIHNlc3Npb24gc3RvcmFnZVxuICAgICAgICBjb25zdCB2aWV3ID0gZ29vYmlXb3JrZmxvd0NvbmZpZy5jdXJyZW50VmlldztcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRTY3JvbGxQb3NLZXkodmlldylcbiAgICAgICAgY29uc3QgcmVzdG9yZWRTY3JvbGxQb3NBbGwgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2d3X21lX3Njcm9sbFBvcycpKTtcblxuICAgICAgICAvLyBBYm9ydCBpZiBzZXNzaW9uIHN0b3JhZ2UgaXMgZW1wdHlcbiAgICAgICAgaWYoIXJlc3RvcmVkU2Nyb2xsUG9zQWxsKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgb2xkUG9zID0gcmVzdG9yZWRTY3JvbGxQb3NBbGxba2V5XTtcblxuICAgICAgICAvLyBTZXQgYm94IHN0YXR1cyAoY29sbGFwc2VkIC8gb3BlbilcbiAgICAgICAgZ29vYmlXb3JrZmxvd0pTLmJveC5nZXRCb3hTdGF0dXMoKTtcblxuICAgICAgICAvLyBTZXQgbmV3IHNjcm9sbCBwb3NpdGlvbnNcbiAgICAgICAgY29udGVudExlZnQuc2Nyb2xsVG9wID0gcmVzdG9yZWRTY3JvbGxQb3NBbGwubWVMZWZ0O1xuICAgICAgICBjb250ZW50Q2VudGVyLnNjcm9sbFRvcCA9IG9sZFBvcyArIHRoaXMuZ2V0RXJyb3JNc2dIZWlnaHQoKTtcblxuXG5cbiAgICAgICAgLy8gRGVidWdnaW5nXG4gICAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh7b2xkUG9zfSlcbiAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudENlbnRlci5zY3JvbGxUb3A6JywgY29udGVudENlbnRlci5zY3JvbGxUb3ApXG4gICAgICAgIH1cblxuICAgICAgfSxcblxuICAgICAgLyoqIERlbGV0ZSBzY3JvbGwgcG9zaXRpb25zIGZyb20gbG9jYWwgc3RvcmFnZS4gKi9cbiAgICAgIGRlc3Ryb3lTY3JvbGxQb3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdnd19tZV9zY3JvbGxQb3MnKTtcbiAgICAgIH1cblxuICAgIH1cblxuICByZXR1cm4gZ29vYmlXb3JrZmxvdztcblxufSApKCBnb29iaVdvcmtmbG93SlMgfHwge30sIGpRdWVyeSApO1xuXG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgICAgIG5hdmlnYXRpb25TZWxlY3RvcjogJyNuYXZpZ2F0aW9uJyxcbiAgICAgICAgbmF2aWdhdGlvbkFjdGlvblNlbGVjdG9yOiAnLm5hdmlnYXRpb25BY3Rpb25zJ1xuICAgIH07XG4gICAgXG4gICAgZ29vYmlXb3JrZmxvdy5tZW51ID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBpbml0aWFsaXplIHRoZSBtZW51IG1vZHVsZS5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLm1lbnUuaW5pdCcgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3NldFN1Ym1lbnVUb2dnbGVFdmVudCgpO1xuXG4gICAgICAgICAgICAvLyB0b2dnbGUgbW9iaWxlIG5hdmlnYXRpb25cbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPVwibW9iaWxlLW1lbnVcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCgnI25hdmlnYXRpb24nKS5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB0b2dnbGUgbW9iaWxlIGltYWdlXG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXRvZ2dsZT1cIm1vYmlsZS1pbWFnZVwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpbicpO1xuICAgICAgICAgICAgICAgICQoJyNwYWdlQ29udGVudFJpZ2h0JykudG9nZ2xlQ2xhc3MoJ2luJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHRvZ2dsZSBib3ggYm9keS5cbiAgICAgKiBAbWV0aG9kIF9zZXRTdWJtZW51VG9nZ2xlRXZlbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0U3VibWVudVRvZ2dsZUV2ZW50KCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogX3NldFN1Ym1lbnVUb2dnbGVFdmVudCcgKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnW2RhdGEtc2hvdz1cInN1Ym1lbnVcIl0nLCBmdW5jdGlvbiAoIGV2ZW50ICkge1xuICAgICAgICAgICAgaWYgKCAkKCB0aGlzICkubmV4dCgpLmlzKCAnOnZpc2libGUnICkgKSB7XG4gICAgICAgICAgICAgICAgJCggJy5zdWJtZW51JyApLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCB0aGlzICkubmV4dCgpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICQoICcuc3VibWVudScgKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCggdGhpcyApLm5leHQoKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgICAgICAvLyByZXNldCBhbGwgbWVudXMgYnkgY2xpY2tpbmcgb24gYm9keVxuICAgICAgICAkKCAnYm9keScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgaWYgKCBcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuaWQgPT0gJ25hdmlnYXRpb24nIHx8IFxuICAgICAgICAgICAgICAgICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIF9kZWZhdWx0cy5uYXZpZ2F0aW9uU2VsZWN0b3IgKS5sZW5ndGggfHwgXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlkID09ICduYXZpZ2F0aW9uQWN0aW9ucycgfHwgXG4gICAgICAgICAgICAgICAgJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggX2RlZmF1bHRzLm5hdmlnYXRpb25BY3Rpb25TZWxlY3RvciApLmxlbmd0aCBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICQoICcuc3VibWVudScgKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGdvb2JpV29ya2Zsb3c7XG4gICAgXG59ICkoIGdvb2JpV29ya2Zsb3dKUyB8fCB7fSwgalF1ZXJ5ICk7XG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7fTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93Lm1vZGFscyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgbW9kYWxzIG1vZHVsZS5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLm1vZGFscy5pbml0JyApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuICAgIFxuICAgIGdvb2JpV29ya2Zsb3cubmF2aWdhdGlvbiA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgYnV0dG9ucy5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgICAgICBpbml0OiBmdW5jdGlvbiggY29uZmlnICkge1xuICAgICAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdJbml0aWFsaXppbmc6IGdvb2JpV29ya2Zsb3dKUy5uYXZpZ2F0aW9uLmluaXQnICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQuZXh0ZW5kKCB0cnVlLCBfZGVmYXVsdHMsIGNvbmZpZyApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBfc2V0SW1hZ2VOYXZpZ2F0aW9uQnV0dG9uRXZlbnRzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGZ1bmN0aW9uIF9jaGVja05hdmlnYXRpb25CbG9ja2VkKCkge1xuICAgIFx0Ly9UaGUgb2JqZWN0cyBpbiB3aW5kb3cuaW1hZ2VOYXZCbG9ja2VycyBsb29rIGxpa2UgdGhpczpcbiAgICBcdC8ve2NoZWNrOiBmdW5jdGlvbiwgY29uZmlybTogXCJzdHJpbmdcIn1cbiAgICBcdC8vY2hlY2sgaGFzIHRvIGJlIGEgZnVuY3Rpb24uIElmIGNoZWNrKCkgcmV0dXJucyB0cnVlLCBhIGNvbmZpcm0gZGlhbG9nIHdpdGggdGhlXG4gICAgXHQvL3N0cmluZyBpbiBjb25maXJtIHdpbGwgYmUgc2hvd24uIElmIHRoZSBjb25maXJtIGRpYWxvZyBpcyBkaXNtaXNzZWQsXG4gICAgXHQvL25hdmlnYXRpb24gd2l0aCBzaG9ydGN1dCBrZXlzIHdpbGwgYmUgYmxvY2tlZFxuICAgIFx0aWYoIXdpbmRvdy5pbWFnZU5hdkJsb2NrZXJzKSB7XG4gICAgXHRcdHJldHVybiBmYWxzZTtcbiAgICBcdH1cbiAgICBcdGxldCBibG9ja2VkID0gZmFsc2U7XG4gICAgXHRmb3IobGV0IGJsb2NrZXIgb2Ygd2luZG93LmltYWdlTmF2QmxvY2tlcnMpIHtcbiAgICBcdFx0aWYoYmxvY2tlci5jaGVjaygpICYmICFjb25maXJtKGJsb2NrZXIuY29uZmlybSkpIHtcbiAgICBcdFx0XHRibG9ja2VkID0gdHJ1ZTtcbiAgICBcdFx0fVxuICAgIFx0fVxuICAgIFx0cmV0dXJuIGJsb2NrZWQ7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIF9zZXRJbWFnZU5hdmlnYXRpb25CdXR0b25FdmVudHMoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfc2V0SW1hZ2VOYXZpZ2F0aW9uQnV0dG9uRXZlbnRzJyApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkKCBkb2N1bWVudCApLmJpbmQoICdrZXl1cCcsIF9kZWZhdWx0cy5uYXZpZ2F0aW9uU2hvcnRjdXQgKyAnK3JpZ2h0JywgZnVuY3Rpb24oZSkge1xuICAgICAgICBcdGlmKF9jaGVja05hdmlnYXRpb25CbG9ja2VkKCkpIHtcbiAgICAgICAgXHRcdHJldHVybjtcbiAgICAgICAgXHR9XG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJuZXh0SW1hZ2VcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoIGRvY3VtZW50ICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrbGVmdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBcdGlmKF9jaGVja05hdmlnYXRpb25CbG9ja2VkKCkpIHtcbiAgICAgICAgXHRcdHJldHVybjtcbiAgICAgICAgXHR9XG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJwcmV2SW1hZ2VcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoIGRvY3VtZW50ICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrdXAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgXHRpZihfY2hlY2tOYXZpZ2F0aW9uQmxvY2tlZCgpKSB7XG4gICAgICAgIFx0XHRyZXR1cm47XG4gICAgICAgIFx0fVxuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwiaW1hZ2VOZXh0MjBcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoIGRvY3VtZW50ICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrZG93bicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBcdGlmKF9jaGVja05hdmlnYXRpb25CbG9ja2VkKCkpIHtcbiAgICAgICAgXHRcdHJldHVybjtcbiAgICAgICAgXHR9XG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJpbWFnZUJhY2syMFwiICk7XG4gICAgICAgICAgICBpZiAoIG15QnV0dG9uICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgbXlCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgICBcbiAgICAgICAgJCggZG9jdW1lbnQgKS5iaW5kKCAna2V5dXAnLCBfZGVmYXVsdHMubmF2aWdhdGlvblNob3J0Y3V0ICsgJytob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0aWYoX2NoZWNrTmF2aWdhdGlvbkJsb2NrZWQoKSkge1xuICAgICAgICBcdFx0cmV0dXJuO1xuICAgICAgICBcdH1cbiAgICAgICAgICAgIHZhciBteUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcImltYWdlRmlyc3RcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoIGRvY3VtZW50ICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0aWYoX2NoZWNrTmF2aWdhdGlvbkJsb2NrZWQoKSkge1xuICAgICAgICBcdFx0cmV0dXJuO1xuICAgICAgICBcdH1cbiAgICAgICAgICAgIHZhciBteUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcImltYWdlTGFzdFwiICk7XG4gICAgICAgICAgICBpZiAoIG15QnV0dG9uICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgbXlCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgICBcbiAgICAgICAgJCggZG9jdW1lbnQgKS5iaW5kKCAna2V5dXAnLCBfZGVmYXVsdHMubmF2aWdhdGlvblNob3J0Y3V0ICsgJytyZXR1cm4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBteUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcIm1lTWVudUFjdGlvbnNGb3JtOnNhdmVNZXRzRmlsZUJ1dHRvbkFqYXhcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoIGRvY3VtZW50ICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrdicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwibWVNZW51QWN0aW9uc0Zvcm06c3RhcnRWYWxpZGF0aW9uQnV0dG9uXCIgKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCBkb2N1bWVudCApLmJpbmQoICdrZXl1cCcsIF9kZWZhdWx0cy5uYXZpZ2F0aW9uU2hvcnRjdXQgKyAnK3NwYWNlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGlkZGVuSW1hZ2VObyA9ICQoIFwiI2hpZGRlbkltYWdlTm9cIiApLnZhbCgpO1xuICAgICAgICAgICAgaWYgKCBoaWRkZW5JbWFnZU5vID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgaGlkZGVuSW1hZ2VObyA9ICQoIFwiI2hpZGRlbkltYWdlTm9UaHVtYlwiICkudmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJwYWdlc0xpc3Q6XCIgKyBoaWRkZW5JbWFnZU5vICsgXCI6Y2hlY2tib3hcIiApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIGNoZWNrYm94LmNoZWNrZWQgKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja2JveC5mb2N1cygpO1xuICAgICAgICAgICAgY2hlY2tib3guYmx1cigpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gKVxuXG4gICAgICAgICQoICdpbnB1dDpjaGVja2JveCcgKS5iaW5kKCAna2V5dXAnLCBfZGVmYXVsdHMubmF2aWdhdGlvblNob3J0Y3V0ICsgJytyaWdodCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwibmV4dEltYWdlXCIgKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCAnaW5wdXQ6Y2hlY2tib3gnICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrbGVmdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwicHJldkltYWdlXCIgKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCAnaW5wdXQ6Y2hlY2tib3gnICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrdXAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBteUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcImltYWdlTmV4dDIwXCIgKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCAnaW5wdXQ6Y2hlY2tib3gnICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrZG93bicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwiaW1hZ2VCYWNrMjBcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoICdpbnB1dDpjaGVja2JveCcgKS5iaW5kKCAna2V5dXAnLCBfZGVmYXVsdHMubmF2aWdhdGlvblNob3J0Y3V0ICsgJytob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJpbWFnZUZpcnN0XCIgKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCAnaW5wdXQ6Y2hlY2tib3gnICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJpbWFnZUxhc3RcIiApO1xuICAgICAgICAgICAgaWYgKCBteUJ1dHRvbiAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIG15QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcbiAgICAgICAgXG4gICAgICAgICQoICdpbnB1dDpjaGVja2JveCcgKS5iaW5kKCAna2V5dXAnLCBfZGVmYXVsdHMubmF2aWdhdGlvblNob3J0Y3V0ICsgJytyZXR1cm4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIG15QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIFwibWVNZW51QWN0aW9uc0Zvcm06c2F2ZU1ldHNGaWxlQnV0dG9uQWpheFwiICk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyggbXlCdXR0b24gKTtcbiAgICAgICAgICAgIGlmICggbXlCdXR0b24gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBteUJ1dHRvbi5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgICAgICAkKCAnaW5wdXQ6Y2hlY2tib3gnICkuYmluZCggJ2tleXVwJywgX2RlZmF1bHRzLm5hdmlnYXRpb25TaG9ydGN1dCArICcrdicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggXCJtZU1lbnVBY3Rpb25zRm9ybTpzdGFydFZhbGlkYXRpb25CdXR0b25cIiApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coIG15QnV0dG9uICk7XG4gICAgICAgICAgICBpZiAoIG15QnV0dG9uICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgbXlCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgICBcbiAgICAgICAgJCggJ2lucHV0OmNoZWNrYm94JyApLmJpbmQoICdrZXl1cCcsIF9kZWZhdWx0cy5uYXZpZ2F0aW9uU2hvcnRjdXQgKyAnK3NwYWNlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGlkZGVuSW1hZ2VObyA9ICQoIFwiI2hpZGRlbkltYWdlTm9cIiApLnZhbCgpO1xuICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggXCJteUNoZWNrYm94ZXNcIiApLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgICAgIGlmICggaSA9PSBoaWRkZW5JbWFnZU5vICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggXCJteUNoZWNrYm94ZXNcIiApWyBpIF07XG4gICAgICAgICAgICAgICAgICAgIGlmICggY2hlY2tib3guY2hlY2tlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBnb29iaVdvcmtmbG93O1xuICAgIFxufSApKCBnb29iaVdvcmtmbG93SlMgfHwge30sIGpRdWVyeSApO1xuXG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKCBmdW5jdGlvbiggZ29vYmlXb3JrZmxvdyApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIHZhciBfZGVmYXVsdHMgPSB7fTtcbiAgICB2YXIgX3ZpZXdJbWFnZSA9IG51bGw7XG4gICAgdmFyIF93b3JsZCA9IG51bGw7XG4gICAgdmFyIF9tZWRpYVR5cGUgPSBudWxsO1xuICAgIHZhciBfcHJlbG9hZGVkSW1hZ2VzID0gW107XG4gICAgdmFyIF9jb2xvcnMgPSBbJyNmZjQ0MzMnXTtcbiAgICAvL3ZhciBfY29sb3JzID0gWycjZTYxOTRiJywgJyMzY2I0NGInLCAnI2ZmZTExOScsICcjNDM2M2Q4JywgJyNmNTgyMzEnLCAnIzkxMWViNCcsICcjNDZmMGYwJywgJyNmMDMyZTYnLCAnI2JjZjYwYycsICcjZmFiZWJlJywgJyMwMDgwODAnLCAnI2U2YmVmZicsICcjOWE2MzI0JywgJyNmZmZhYzgnLCAnIzgwMDAwMCcsICcjYWFmZmMzJywgJyM4MDgwMDAnLCAnI2ZmZDhiMScsICcjMDAwMDc1JywgJyM4MDgwODAnLCAnI2ZmZmZmZicsICcjMDAwMDAwJ107XG4gICAgdmFyIF9jb25maWdWaWV3ZXIgPSB7XG4gICAgICAgIGdsb2JhbDoge1xuICAgICAgICAgICAgZGl2SWQ6IFwibWFpbkltYWdlXCIsXG4gICAgICAgICAgICB1c2VUaWxlczogdHJ1ZSxcbiAgICAgICAgICAgIGZvb3RlckhlaWdodDogMCxcbiAgICAgICAgICAgIGFkYXB0Q29udGFpbmVySGVpZ2h0OiBmYWxzZSxcbiAgICAgICAgICAgIHpvb21TbGlkZXI6IFwiLnpvb20tc2xpZGVyXCIsXG4gICAgICAgICAgICB6b29tU2xpZGVySGFuZGxlOiBcIi56b29tLXNsaWRlci1oYW5kbGVcIixcbiAgICAgICAgICAgIHpvb21TbGlkZXJMYWJlbDogXCIjem9vbVNsaWRlckxhYmVsIGlucHV0XCIsXG4gICAgICAgICAgICBwZXJzaXN0Wm9vbTogZmFsc2UsXG4gICAgICAgICAgICBwZXJzaXN0Um90YXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcGVyc2lzdGVuY2VJZDogJycsXG4gICAgICAgIH0sIFxuICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgbWltZVR5cGU6IFwiaW1hZ2UvanBlZ1wiLFxuICAgICAgICAgICAgdGlsZVNvdXJjZTogJycsXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBfZHJhd1N0eWxlID0ge1xuICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDIsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogXCIjZmY0NDMzXCJcbiAgICAgICAgfTtcbiAgICB2YXIgX3dvcmxkQ29uZmlnID0ge1xuICAgICAgICBjb250cm9sczoge1xuICAgICAgICAgICAgeEF4aXM6IHtcbiAgICAgICAgICAgICAgICByb3RhdGVMZWZ0OiBcIiNyb3RhdGUtbGVmdC14XCIsXG4gICAgICAgICAgICAgICAgcm90YXRlUmlnaHQ6IFwiI3JvdGF0ZS1yaWdodC14XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5QXhpczoge1xuICAgICAgICAgICAgICAgIHJvdGF0ZUxlZnQ6IFwiI3JvdGF0ZS1sZWZ0LXlcIixcbiAgICAgICAgICAgICAgICByb3RhdGVSaWdodDogXCIjcm90YXRlLXJpZ2h0LXlcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHpBeGlzOiB7XG4gICAgICAgICAgICAgICAgcm90YXRlTGVmdDogXCIjcm90YXRlLWxlZnQtelwiLFxuICAgICAgICAgICAgICAgIHJvdGF0ZVJpZ2h0OiBcIiNyb3RhdGUtcmlnaHQtelwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICByZXNldDogXCIjcmVzZXQtcG9zaXRpb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHpvb206IHtcbiAgICAgICAgICAgICAgICByZXNldFpvb206IFwiI3Jlc2V0I3pvb21cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250YWluZXI6IHtcbiAgICAgICAgICAgIGlkOiBcIm1haW5JbWFnZVwiXG4gICAgICAgIH0sXG4gICAgICAgIHJlc291cmNlc1BhdGg6IFwidGVtcGxhdGUvanMvXCIsXG4gICAgfTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93Lm9iamVjdCA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgb2JqZWN0IHZpZXcuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLm9iamVjdC5pbml0JyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPOiBmaXggaW1hZ2UgY29udHJvbHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gaW5pdCBvYmplY3Qgdmlld1xuICAgICAgICAgICAgaWYgKCAkKCAnI21haW5JbWFnZScgKS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkSGFuZGxlcigpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgKCBfY29uZmlnVmlld2VyLmdsb2JhbC5wZXJzaXN0Wm9vbSB8fCBfY29uZmlnVmlld2VyLmdsb2JhbC5wZXJzaXN0Um90YXRpb24gKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnI2ltYWdlTmF2aWdhdGlvbiBhJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAoIF92aWV3SW1hZ2UgKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgX3ZpZXdJbWFnZS5jb250cm9scy5wZXJzaXN0ZW5jZS5zdG9yZUxvY2F0aW9uXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgIH0gKTtcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRDb250cm9scygpIHtcbiAgICAgICAgICAgICQoJyNyb3RhdGUtcmlnaHQteCcpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3ZpZXdJbWFnZS5jb250cm9scy5yb3RhdGVSaWdodCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICQoJyNyb3RhdGUtbGVmdC14Jykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfdmlld0ltYWdlLmNvbnRyb2xzLnJvdGF0ZUxlZnQoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAkKCcjcmVzZXQtcG9zaXRpb24nKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF92aWV3SW1hZ2UuY29udHJvbHMucmVzZXQodHJ1ZSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgXG5cbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gbG9hZCB0aGUgaW1hZ2UgaGFuZGxlci5cbiAgICAgICAgICogQG1ldGhvZCBpbWFnZUxvYWRIYW5kbGVyXG4gICAgICAgICAqL1xuICAgICAgICBpbWFnZUxvYWRIYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLm9iamVjdC5pbWFnZUxvYWRIYW5kbGVyJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfbWVkaWFUeXBlID0gJCggJyNtZWRpYVR5cGUnICkudmFsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICggX21lZGlhVHlwZSA9PSAnaW1hZ2UnICkge1xuICAgICAgICAgICAgXHRnb29iaVdvcmtmbG93SlMub2JqZWN0LmZyZWVKU1Jlc291cmNlcygpO1xuICAgICAgICAgICAgICAgIGxldCBpbWFnZVpvb21QZXJzaXN0ZW56ZUlkID0gJCggJyNwZXJzaXN0ZW5jZUlkJyApLnZhbCgpO1xuICAgICAgICAgICAgICAgIGlmKGltYWdlWm9vbVBlcnNpc3RlbnplSWQgJiYgaW1hZ2Vab29tUGVyc2lzdGVuemVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKF9kZWJ1Zyljb25zb2xlLmxvZyhcInBlcnNpc3QgaW1hZ2Ugem9vbSB3aXRoIGlkIFwiLCBpbWFnZVpvb21QZXJzaXN0ZW56ZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgX2NvbmZpZ1ZpZXdlci5nbG9iYWwucGVyc2lzdGVuY2VJZCA9IGltYWdlWm9vbVBlcnNpc3RlbnplSWQ7XG4gICAgICAgICAgICAgICAgICAgIF9jb25maWdWaWV3ZXIuZ2xvYmFsLnBlcnNpc3Rab29tID0gIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF9jb25maWdWaWV3ZXIuZ2xvYmFsLnBlcnNpc3RSb3RhdGlvbiA9IHRydWU7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSAkKCAnI3RpbGVTb3VyY2UnICkudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2FkaW5nIHRpbGVTb3VyY2U6XCIsIHRpbGVTb3VyY2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9jb25maWdWaWV3ZXIuaW1hZ2UudGlsZVNvdXJjZSA9IHRpbGVTb3VyY2U7XG4gICAgICAgICAgICAgICAgX3ZpZXdJbWFnZSA9IG5ldyBJbWFnZVZpZXcuSW1hZ2UoX2NvbmZpZ1ZpZXdlcik7XG4gICAgICAgICAgICAgICAgX3ZpZXdJbWFnZS5sb2FkKCkudGhlbiggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93SlMubGF5b3V0LnNldE9iamVjdFZpZXdIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZ29vYmlXb3JrZmxvdy5vYmplY3QuaW5pdENvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3cub2JqZWN0LmluaXRBcmVhcygpO1xuICAgICAgICAgICAgICAgICAgICBfdmlld0ltYWdlLmNvbnRyb2xzLmdvSG9tZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3ZpZXdJbWFnZS5vYnNlcnZhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZpZXdJbWFnZS5vYnNlcnZhYmxlcy5maXJzdFRpbGVMb2FkZWQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHt9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggJ2ltYWdlTG9hZEhhbmRsZXI6IEVycm9yIGxvYWRpbmcgaW1hZ2UnLCBlcnJvciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCAnIycgKyBfY29uZmlnVmlld2VyLmdsb2JhbC5kaXZJZCApLmh0bWwoICdGYWlsZWQgdG8gbG9hZCBpbWFnZSB0aWxlOiAnICsgZXJyb3IubWVzc2FnZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy9wcmVjYWNoZSBuZXh0IGltYWdlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlU291cmNlID0gJChcIiN0aWxlU291cmNlX25leHRcIikudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXZJZCA9IFwicHJlY2FjaGVOZXh0XCI7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRpbGVTb3VyY2UpIHsgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlQ2FjaGUodGlsZVNvdXJjZSwgZGl2SWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbiggKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvL3ByZWNhY2hlIHByZXZpb3VzIGltYWdlXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlU291cmNlID0gJChcIiN0aWxlU291cmNlX3ByZXZpb3VzXCIpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGl2SWQgPSBcInByZWNhY2hlUHJldmlvdXNcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYodGlsZVNvdXJjZSkgeyAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVDYWNoZSh0aWxlU291cmNlLCBkaXZJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCggZnVuY3Rpb24gKCBlcnJvciApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggJ2ltYWdlTG9hZEhhbmRsZXI6IEVycm9yIG9wZW5pbmcgaW1hZ2UnLCBlcnJvciApO1xuICAgICAgICAgICAgICAgICAgICAkKCAnIycgKyBfY29uZmlnVmlld2VyLmdsb2JhbC5kaXZJZCApLmh0bWwoICdGYWlsZWQgdG8gbG9hZCBpbWFnZTogJyArIGVycm9yLm1lc3NhZ2UgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCBfbWVkaWFUeXBlID09ICdvYmplY3QnICkge1xuICAgICAgICAgICAgICAgICQoICcjaW1hZ2VMb2FkZXInICkuc2hvdygpO1xuICAgICAgICAgICAgICAgIGdvb2JpV29ya2Zsb3dKUy5sYXlvdXQuc2V0T2JqZWN0Vmlld0hlaWdodCgpO1xuICAgICAgICAgICAgICAgIF93b3JsZCA9IFdvcmxkR2VuZXJhdG9yLmNyZWF0ZShfd29ybGRDb25maWcpOyBcbiAgICAgICAgICAgICAgICBfd29ybGQubG9hZE9iamVjdCgge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoICcjb2JqZWN0VXJsJyApLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB7IHg6IDAsIHk6IDAsIHo6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogMTAsXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogMHg0NGJiMzNcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXG4vLyAgICAgICAgICAgICAgICAgICAgb25UaWNrOiBmdW5jdGlvbiAoIG9iamVjdCwgdGltZSApIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvYmplY3QgKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3Qucm90YXRpb24uc2V0KCAwLCBNYXRoLlBJIC8gMTgwICogdGltZSwgMCApO1xuLy8gICAgICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuICAgICAgICAgICAgICAgICAgICAkKCAnI2ltYWdlTG9hZGVyJyApLmZhZGVPdXQoIDIwMDAgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCAnaW1hZ2VMb2FkSGFuZGxlcjogbG9hZGVkJywgb2JqZWN0ICk7XG4gICAgICAgICAgICAgICAgICAgIF93b3JsZC5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCggZnVuY3Rpb24gKCBlcnJvciApIHtcbiAgICAgICAgICAgICAgICAgICAgJCggJyNpbWFnZUxvYWRlcicgKS5mYWRlT3V0KCAyMDAwICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoICdpbWFnZUxvYWRIYW5kbGVyOiBmYWlsZWQgdG8gbG9hZDogJywgZXJyb3IgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKCBfbWVkaWFUeXBlID09ICd4M2RvbScgKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFVybCA9ICQoICcjb2JqZWN0VXJsJyApLnZhbCgpO1xuICAgICAgICAgICAgICAgICQoICcjaW1hZ2VMb2FkZXInICkuc2hvdygpO1xuICAgICAgICAgICAgICAgIG5ldyBYM0RMb2FkZXIoKS5sb2FkKCAkKCAnI21haW5JbWFnZScgKSwgb2JqZWN0VXJsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoICcjaW1hZ2VMb2FkZXInICkuZmFkZU91dCggMjAwMCApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oICdpbWFnZUxvYWRIYW5kbGVyOiBsb2FkZWQnICk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyggJ2ltYWdlTG9hZEhhbmRsZXI6IHByb2dyZXNzJyApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCBlcnJvciApIHtcbiAgICAgICAgICAgICAgICAgICAgJCggJyNpbWFnZUxvYWRlcicgKS5mYWRlT3V0KCAyMDAwICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyggJ2ltYWdlTG9hZEhhbmRsZXI6IGVycm9yJywgZXJyb3IgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGVuYWJsZSBkcmF3aW5nIGEgcmVjdCBvbiB0aGUgaW1hZ2UgYnkgcGFzc2luZyBwYXJhbXRlciBkcmF3ID0gdHJ1ZTsgZGlzYWJsZSB3aXRoIGRyYXcgPSBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0RHJhd0FyZWEoZHJhdywgaWQpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd0FyZWEgPSBkcmF3O1xuICAgICAgICAgICAgdGhpcy5hcmVhSWQgPSBpZDtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIGRyYXdpbmcgYW4gYXJlYSBpcyBlbmFibGVkXG4gICAgICAgICAqL1xuICAgICAgICBpc0RyYXdBcmVhKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhd0FyZWE7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbGl6ZSBkcmF3aW5nIGFuZCB0cmFuc2Zvcm1pbmcgYXJlYXMgd2l0aGluIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBpbml0QXJlYXMoKSB7XG4gICAgICAgIFx0aWYoX2RlYnVnKWNvbnNvbGUubG9nKFwiaW5pdCBhcmVhc1wiKTtcbiAgICAgICAgICAgICQoJyNkaXNhYmxlLWludGVyYWN0aW9uLW92ZXJsYXknKS5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdlciA9IG5ldyBJbWFnZVZpZXcuRHJhdyhfdmlld0ltYWdlLnZpZXdlciwgX2RyYXdTdHlsZSwgKCkgPT4gdGhpcy5pc0RyYXdBcmVhKCkpO1xuICAgICAgICAgICAgdGhpcy5kcmF3ZXIuZmluaXNoZWREcmF3aW5nKCkuc3Vic2NyaWJlKGZ1bmN0aW9uKG92ZXJsYXkpIHtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2coXCJmaW5pc2hlZCBkcmF3aW5nXCIsIHRoaXMpO1xuICAgICAgICAgICAgXHRvdmVybGF5LnN0eWxlID0gJC5leHRlbmQoe30sIF9kcmF3U3R5bGUsIHtib3JkZXJDb2xvcjogdGhpcy5jb2xvcnMubmV4dCgpfSk7XG4gICAgICAgICAgICAgICAgb3ZlcmxheS5kcmF3KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRPdmVybGF5KG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJhd0FyZWEoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd25PdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybWVyLmFkZE92ZXJsYXkob3ZlcmxheSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmREcmF3QXJlYSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQXJlYShvdmVybGF5KTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFyZWFUYXJnZXQgPT0gXCJjdXJyZW50XCIpIHtcbiAgICAgICAgICAgICAgICBcdHRoaXMuaGlnaGxpZ2h0KG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcjZGlzYWJsZS1pbnRlcmFjdGlvbi1vdmVybGF5JykuaGlkZSgpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtZXIgPSBuZXcgSW1hZ2VWaWV3LlRyYW5zZm9ybShfdmlld0ltYWdlLnZpZXdlciwgX2RyYXdTdHlsZSwgKCkgPT4gIXRoaXMuaXNEcmF3QXJlYSgpKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtZXIuZmluaXNoZWRUcmFuc2Zvcm1pbmcoKS5zdWJzY3JpYmUoZnVuY3Rpb24ob3ZlcmxheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXJlYShvdmVybGF5KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cblx0XHRcdHRoaXMuYXJlYVN0cmluZyA9ICQoXCIjcGFnZWFyZWFzXCIpLnRleHQoKTtcblx0XHRcdC8vY29uc29sZS5sb2coXCJwYWdlIGFyZWEgc3RyaW5nXCIsIHRoaXMuYXJlYVN0cmluZyk7XG5cdFx0XHRpZiAodGhpcy5hcmVhU3RyaW5nKSB7XG5cdFx0XHRcdGlmKF9kZWJ1Zyljb25zb2xlLmxvZyhcImRyYXdBcmVhc1wiLCB0aGlzLmFyZWFTdHJpbmcpO1xuXHQgICAgICAgICAgICBsZXQgYXJlYXMgPSBKU09OLnBhcnNlKHRoaXMuYXJlYVN0cmluZyk7XG5cdCAgICAgICAgICAgIHRoaXMuZHJhd25PdmVybGF5ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR0aGlzLmRyYXdBcmVhcyhhcmVhcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmRyYXdBcmVhcyhbXSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGdvb2JpV29ya2Zsb3cuanNmQWpheC5zdWNjZXNzLnN1YnNjcmliZShkYXRhID0+IHtcblx0XHRcdFx0bGV0IGFyZWFTdHJpbmcgPSAkKFwiI3BhZ2VhcmVhc1wiKS50ZXh0KCk7XG5cdFx0XHRcdGlmICh0aGlzLmFyZWFTdHJpbmcgIT0gYXJlYVN0cmluZykge1xuXHRcdFx0XHRcdHRoaXMuYXJlYVN0cmluZyA9IGFyZWFTdHJpbmc7XG5cdFx0XHRcdFx0aWYodGhpcy5hcmVhU3RyaW5nKSB7XG5cdFx0ICAgICAgICAgICAgXHRsZXQgYXJlYXMgPSBKU09OLnBhcnNlKHRoaXMuYXJlYVN0cmluZyk7XG5cdFx0ICAgICAgICAgICAgXHR0aGlzLmRyYXduT3ZlcmxheSA9IHVuZGVmaW5lZDtcblx0XHQgICAgICAgICAgICBcdHRoaXMuZHJhd0FyZWFzKGFyZWFzKTtcblx0XHQgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICAgIFx0dGhpcy5kcmF3QXJlYXMoW10pO1xuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcInBhZ2UgYXJlYSBzdHJpbmdcIiwgdGhpcy5hcmVhU3RyaW5nKTtcblx0XHRcdH0pOyBcblx0XHRcdHRoaXMuaW5pdERlbGV0ZVBhZ2VBcmVhcygpO1xuXHRcdH0sXG5cdFx0YWRkT3ZlcmxheShvdmVybGF5KSB7XG5cdFx0XHRpZihvdmVybGF5KSB7XG5cdFx0XHRcdHRoaXMub3ZlcmxheXMucHVzaChvdmVybGF5KTtcblx0XHRcdFx0dGhpcy5vdmVybGF5cy5zb3J0KChvMSxvMikgPT4ge1xuICAgICAgICAgICAgXHRcdHJldHVybiBvMS5oaWdobGlnaHQgPyAtMSA6IG8yLmhpZ2hsaWdodCA/IDEgOiAwO1xuICAgICAgICAgICBcdFx0fSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c3RhcnREcmF3QXJlYShzb3VyY2UsIHRhcmdldCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJzdGFydCBkcmF3IGFyZWFcIiwgc291cmNlLCB0YXJnZXQpO1xuXHRcdFx0aWYodGhpcy5kcmF3bk92ZXJsYXkgJiYgdGFyZ2V0ID09IHRoaXMuZ2V0QXJlYVRhcmdldCgpKSB7XG5cdFx0XHRcdHRoaXMuZHJhd25PdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5zZXREcmF3QXJlYSh0cnVlKTtcblx0XHRcdHRoaXMuc2V0QXJlYVRhcmdldCh0YXJnZXQpO1xuXHRcdFx0JChzb3VyY2UpLmhpZGUoKTtcblx0XHRcdCQoXCIuY2FuY2VsLWFyZWEtZWRpdGlvblwiKS5oaWRlKCk7XG5cdFx0XHQkKHNvdXJjZSkubmV4dChcIi5jYW5jZWwtYXJlYS1lZGl0aW9uXCIpLnNob3coKTtcblx0XHRcdCQoJyNkaXNhYmxlLWludGVyYWN0aW9uLW92ZXJsYXknKS5zaG93KCk7XG5cdFx0fSxcblx0XHRjYW5jZWxEcmF3QXJlYSgpIHtcblx0XHRcdGlmKHRoaXMuaXNEcmF3QXJlYSgpKSB7XG5cdFx0XHRcdHRoaXMuc2V0RHJhd0FyZWEoZmFsc2UpO1xuXHRcdFx0XHR0aGlzLmVuZERyYXdBcmVhKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZih0aGlzLmRyYXduT3ZlcmxheSkge1xuXHRcdFx0XHRcdHRoaXMuZHJhd25PdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuZW5kRHJhd0FyZWEoKTtcblx0XHRcdFx0Y2FuY2VsUGFnZUFyZWFFZGl0aW9uKCk7XG5cdFx0XHR9XG5cdFx0XHQkKFwiLmNhbmNlbC1hcmVhLWVkaXRpb25cIikuaGlkZSgpO1xuXHRcdH0sXG5cdFx0ZW5kRHJhd0FyZWEoKSB7XG5cdFx0XHQkKCcjZGlzYWJsZS1pbnRlcmFjdGlvbi1vdmVybGF5JykuaGlkZSgpO1xuXHRcdFx0JChcIi5zdGFydC1hcmVhLWVkaXRpb25cIikuc2hvdygpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0U2V0IHRvICdjdXJyZW50JyB0byBhZGQgYXJlYSB0byBjdXJyZW50IGRvY1N0cmN0LiBPdGhlcndpc2UgYXJlYSBpcyBhZGRlZCB0byB0aGUgbmV4dCBuZXdseSBjcmVhdGVkIGRvY1N0cnVjdFxuXHRcdCovXG5cdFx0c2V0QXJlYVRhcmdldCh0YXJnZXQpIHtcblx0XHRcdHRoaXMuYXJlYVRhcmdldCA9IHRhcmdldDtcblx0XHR9LFxuXHRcdGdldEFyZWFUYXJnZXQoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hcmVhVGFyZ2V0O1xuXHRcdH0sXG5cdFx0YWRkQXJlYShvdmVybGF5KSB7XG5cdFx0XHRsZXQgYXJlYSA9IHRoaXMud3JpdGVBcmVhKG92ZXJsYXkpO1xuXHRcdFx0YXJlYS5hZGRUbyA9IHRoaXMuYXJlYVRhcmdldDtcblx0XHRcdGFkZFBhZ2VBcmVhKGFyZWEpO1xuXHRcdFx0aWYodGhpcy5hcmVhVGFyZ2V0ID09IFwiY3VycmVudFwiKSB7XG5cdFx0XHRcdHRoaXMuZHJhd25PdmVybGF5ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHQkKFwiLmNhbmNlbC1hcmVhLWVkaXRpb25cIikuaGlkZSgpO1xuXHRcdFx0XHQkKFwiLnN0YXJ0LWFyZWEtZWRpdGlvblwiKS5zaG93KCk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZXRBcmVhKG92ZXJsYXkpIHtcblx0XHRcdGxldCBhcmVhID0gdGhpcy53cml0ZUFyZWEob3ZlcmxheSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcInNldCBhcmVhXCIsIG92ZXJsYXksIGFyZWEpO1xuXHRcdFx0c2V0UGFnZUFyZWEoYXJlYSk7XG5cdFx0fSxcblx0XHRkZWxldGVBcmVhKG92ZXJsYXkpIHtcblx0XHRcdGRlbGV0ZVBhZ2VBcmVhKHthcmVhSWQ6IG92ZXJsYXkuYXJlYUlkfSk7XG5cdFx0fSxcblx0XHRjYW5jZWxQYWdlQXJlYUVkaXRpb24oKSB7XG5cdFx0XHRjYW5jZWxQYWdlQXJlYUVkaXRpb24oKTtcblx0XHR9LFxuICAgICAgICBpbml0RGVsZXRlUGFnZUFyZWFzKCkge1xuXHQgICAgICAgIGlmKF9kZWJ1Zyljb25zb2xlLmxvZyhcImluaXQgZGVsZXRlIHBhZ2UgYXJlYXNcIik7XG5cdCAgICAgICAgdGhpcy5lbmREZWxldGVQYWdlTW9kZSgpOy8vcmVtb3ZlIHByZXZpb3VzIGluaVxuICAgICAgICBcdCQoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsIFwiW2RhdGEtcGFnZWFyZWEtZGVsZXRlPSdzdGFydCddXCIpLm9uKFwiY2xpY2tcIiwgXCJbZGF0YS1wYWdlYXJlYS1kZWxldGU9J3N0YXJ0J11cIiwgKGUpID0+IHtcbiAgICAgICAgXHRcdHRoaXMuc3RhcnREZWxldGVQYWdlTW9kZSgpO1xuICAgICAgICBcdH0pO1xuICAgICAgICBcdCQoZG9jdW1lbnQpLm9mZihcImNsaWNrXCIsIFwiW2RhdGEtcGFnZWFyZWEtZGVsZXRlPSdjYW5jZWwnXVwiKS5vbihcImNsaWNrXCIsIFwiW2RhdGEtcGFnZWFyZWEtZGVsZXRlPSdjYW5jZWwnXVwiLCAoZSkgPT4ge1xuICAgICAgICBcdFx0dGhpcy5lbmREZWxldGVQYWdlTW9kZSgpO1xuICAgICAgICBcdH0pO1xuICAgICAgICB9LFxuICAgICAgICBzdGFydERlbGV0ZVBhZ2VNb2RlKCkge1xuICAgICAgICBcdGlmKF9kZWJ1Zyljb25zb2xlLmxvZyhcInN0YXJ0IGRlbGV0ZSBtb2RlXCIpO1xuICAgICAgICBcdCQoXCJbZGF0YS1wYWdlYXJlYS1kZWxldGU9J3N0YXJ0J11cIikuaGlkZSgpO1xuICAgICAgICBcdCQoXCJbZGF0YS1wYWdlYXJlYS1kZWxldGU9J2NhbmNlbCddXCIpLnNob3coKTtcbiAgICAgICAgXHRpZih0aGlzLmRlbGV0ZUhhbmRsZXIgPT0gbnVsbCkge1xuXHQgICAgICAgIFx0dGhpcy5kZWxldGVIYW5kbGVyID0gZXZlbnQgPT4ge1xuXHRcdCAgICAgICAgXHRpZihfZGVidWcpY29uc29sZS5sb2coXCJkZWxldGUgYXJlYSBcIiwgZXZlbnQsIHRoaXMub3ZlcmxheXMpO1xuXHRcdCAgICAgICAgXHR0aGlzLm92ZXJsYXlzLmV2ZXJ5KG8gPT4ge1xuXHRcdFx0XHRcdFx0aWYoby5jb250YWlucyhldmVudC5wb3NpdGlvbiwgNSwgdHJ1ZSkpIHtcblx0XHRcdFx0XHRcdFx0aWYoX2RlYnVnKWNvbnNvbGUubG9nKFwiZGVsZXRlIHBhZ2UgYXJlYSAyXCIsIG8pO1xuXHRcdFx0XHRcdFx0XHRkZWxldGVQYWdlQXJlYSh7XCJhcmVhSWRcIjogby5hcmVhSWR9KTtcblx0XHRcdFx0XHRcdFx0by5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy50cmFuc2Zvcm1lci5yZW1vdmVPdmVybGF5KG8pO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmVuZERlbGV0ZVBhZ2VNb2RlKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdCAgICAgICAgfTtcblx0ICAgICAgICB9XG4gICAgICAgIFx0XG4gICAgICAgIFx0X3ZpZXdJbWFnZS52aWV3ZXIuYWRkSGFuZGxlcihcImNhbnZhcy1jbGlja1wiLCB0aGlzLmRlbGV0ZUhhbmRsZXIpO1xuICAgICAgICBcdFxuICAgICAgICB9LFxuICAgICAgICBlbmREZWxldGVQYWdlTW9kZSgpIHtcbiAgICAgICAgXHRpZihfZGVidWcpY29uc29sZS5sb2coXCJlbmQgZGVsZXRlIHBhZ2UgbW9kZVwiKTtcbiAgICBcdFx0JChcIltkYXRhLXBhZ2VhcmVhLWRlbGV0ZT0nY2FuY2VsJ11cIikuaGlkZSgpO1xuICAgIFx0XHQkKFwiW2RhdGEtcGFnZWFyZWEtZGVsZXRlPSdzdGFydCddXCIpLnNob3coKTtcbiAgICBcdFx0aWYodGhpcy5kZWxldGVIYW5kbGVyICE9IG51bGwpIHtcblx0ICAgICAgICBcdF92aWV3SW1hZ2Uudmlld2VyLnJlbW92ZUhhbmRsZXIoXCJjYW52YXMtY2xpY2tcIiwgdGhpcy5kZWxldGVIYW5kbGVyKTtcblx0ICAgICAgICBcdHRoaXMuZGVsZXRlSGFuZGxlciA9IG51bGw7XG4gICAgXHRcdH1cbiAgICAgICAgfSxcbiAgICAgICAgZHJhd0FyZWFzKGFyZWFzKSB7XG4gICAgICAgIFx0aWYoX2RlYnVnKWNvbnNvbGUubG9nKFwiZHJhdyBhcmVhcyBcIiwgYXJlYXMpO1xuICAgICAgICAgICAgaWYodGhpcy5vdmVybGF5cykge1xuICAgICAgICAgICAgXHR0aGlzLm92ZXJsYXlzLmZvckVhY2gobyA9PiB7XG4gICAgICAgICAgICBcdFx0by5yZW1vdmUoKTtcbiAgICAgICAgICAgIFx0XHR0aGlzLnRyYW5zZm9ybWVyLnJlbW92ZU92ZXJsYXkobyk7XG4gICAgICAgICAgICBcdH0pO1xuICAgICAgICAgICAgfVxuICAgICAgIFx0XHQkKFwiI3BhZ2VBcmVhTmFtZVwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlzID0gW107XG4gICAgICAgICAgICB0aGlzLmNvbG9ycyA9IG5ldyBJbWFnZVZpZXcuQ29sb3JJdGVyYXRvcihfY29sb3JzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHNob3VsZERyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvcih2YXIgYXJlYSBvZiBhcmVhcykge1xuICAgICAgICAgICAgICAgIGlmKCFhcmVhLngpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkRHJhdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBPcGVuU2VhZHJhZ29uLlJlY3QocGFyc2VJbnQoYXJlYS54KSwgcGFyc2VJbnQoYXJlYS55KSwgcGFyc2VJbnQoYXJlYS53KSwgcGFyc2VJbnQoYXJlYS5oKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlSZWN0ID0gSW1hZ2VWaWV3LkNvb3JkaW5hdGVDb252ZXJzaW9uLmNvbnZlcnRSZWN0RnJvbUltYWdlVG9PcGVuU2VhZHJhZ29uKHJlY3QsIF92aWV3SW1hZ2Uudmlld2VyLCBfdmlld0ltYWdlLmdldE9yaWdpbmFsSW1hZ2VTaXplKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBvdmVybGF5ID0gbmV3IEltYWdlVmlldy5PdmVybGF5KGRpc3BsYXlSZWN0LCBfdmlld0ltYWdlLnZpZXdlciwgX2RyYXdTdHlsZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5zdHlsZSA9ICQuZXh0ZW5kKHt9LCBfZHJhd1N0eWxlLCB7Ym9yZGVyQ29sb3I6IHRoaXMuY29sb3JzLm5leHQoKX0pO1xuXHQgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuYXJlYUlkID0gYXJlYS5hcmVhSWQ7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYoYXJlYS5oaWdobGlnaHQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBcdHRoaXMuaGlnaGxpZ2h0KG92ZXJsYXkpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmRyYXcoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZihfZGVidWcpY29uc29sZS5sb2coXCJkcmF3IG92ZXJsYXlcIiwgb3ZlcmxheSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1lci5hZGRPdmVybGF5KG92ZXJsYXkpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkT3ZlcmxheShvdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYXJlYS5sYWJlbCAmJiAhYXJlYS5sb2dJZCkge1xuICAgICAgICAgICAgICAgIFx0Ly9uZXcgYXJlYS4gVXBkYXRlIFwiQmlsZGJlcmVpY2hcIiBpbnB1dFxuICAgICAgICAgICAgICAgIFx0JChcIiNwYWdlQXJlYU5hbWVcIikudmFsKGFyZWEubGFiZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBpZihzaG91bGREcmF3KSB7XG4gICAgICAgICAgICAgICAgJCgnI2Rpc2FibGUtaW50ZXJhY3Rpb24tb3ZlcmxheScpLnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERyYXdBcmVhKHRydWUsIGFyZWEuaWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERyYXdBcmVhKGZhbHNlLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaGlnaGxpZ2h0KG92ZXJsYXkpIHsgXG4gICAgICAgIFx0b3ZlcmxheS5oaWdobGlnaHQgPSB0cnVlO1xuICAgICAgICBcdG92ZXJsYXkuc3R5bGUuZmlsbENvbG9yID0gb3ZlcmxheS5zdHlsZS5ib3JkZXJDb2xvcjtcbiAgICAgICAgXHRvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAwLjM7XG4gICAgICAgIFx0X3ZpZXdJbWFnZS52aWV3ZXIuZm9yY2VSZWRyYXcoKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5IaWdobGlnaHQob3ZlcmxheSkge1xuICAgICAgICBcdG92ZXJsYXkuaGlnaGxpZ2h0ID0gZmFsc2U7XG4gICAgICAgIFx0b3ZlcmxheS5zdHlsZS5maWxsQ29sb3IgPSBudWxsO1xuICAgICAgICBcdF92aWV3SW1hZ2Uudmlld2VyLmZvcmNlUmVkcmF3KCk7XG4gICAgICAgIH0sIFxuICAgICAgICB3cml0ZUFyZWEob3ZlcmxheSkge1xuICAgICAgICAgICAgdmFyIGFyZWEgPSB7fTtcbiAgICAgICAgICAgIHZhciByZWN0ID0gSW1hZ2VWaWV3LkNvb3JkaW5hdGVDb252ZXJzaW9uLmNvbnZlcnRSZWN0RnJvbU9wZW5TZWFkcmFnb25Ub0ltYWdlKG92ZXJsYXkucmVjdCwgX3ZpZXdJbWFnZS52aWV3ZXIsIF92aWV3SW1hZ2UuZ2V0T3JpZ2luYWxJbWFnZVNpemUoKSk7XG4gICAgICAgICAgICBpZihyZWN0KSB7ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhcmVhLmFyZWFJZCA9IG92ZXJsYXkuYXJlYUlkO1xuICAgICAgICAgICAgICAgIGFyZWEueCA9IE1hdGgucm91bmQocmVjdC54KTtcbiAgICAgICAgICAgICAgICBhcmVhLnkgPSBNYXRoLnJvdW5kKHJlY3QueSk7XG4gICAgICAgICAgICAgICAgYXJlYS53ID0gTWF0aC5yb3VuZChyZWN0LndpZHRoKTtcbiAgICAgICAgICAgICAgICBhcmVhLmggPSBNYXRoLnJvdW5kKHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcmVhO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBjbGVhbiB1cCBqYXZhc2NyaXB0IHJlc291cmNlcyBmb3IgZGlmZmVyZW50IG9iamVjdCB2aWV3cy5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgQSBkYXRhIG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGZyZWVKU1Jlc291cmNlczogZnVuY3Rpb24oIGRhdGEgKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogZ29vYmlXb3JrZmxvd0pTLm9iamVjdC5mcmVlSlNSZXNvdXJjZXMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCAhZGF0YSB8fCBkYXRhLnN0YXR1cyA9PSAnYmVnaW4nICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfdmlld0ltYWdlICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyggJ2ZyZWVKU1Jlc291cmNlczogY2xvc2luZyBPcGVuU2VhZHJhZ29uIHZpZXdlcicgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdmlld0ltYWdlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICggX3dvcmxkICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyggJ2ZyZWVKU1Jlc291cmNlczogZGlzcG9zaW5nIDNkIHNjZW5lJyApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF93b3JsZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKF9wcmVsb2FkZWRJbWFnZXMgIT0gW10pIHtcbiAgICAgICAgICAgICAgICBcdGlmIChfZGVidWcpIHtcbiAgICAgICAgICAgICAgICBcdFx0Y29uc29sZS5pbmZvKCAnZnJlZUpTUmVzb3VyY2VzOiBkaXNwb3NpbmcgcHJlbG9hZCcpO1xuICAgICAgICAgICAgICAgIFx0fVxuICAgICAgICAgICAgICAgIFx0Zm9yKHZhciBpIGluIF9wcmVsb2FkZWRJbWFnZXMpe1xuICAgICAgICAgICAgICAgIFx0XHRfcHJlbG9hZGVkSW1hZ2VzW2ldLmNsb3NlKClcbiAgICAgICAgICAgICAgICBcdH1cbiAgICAgICAgICAgICAgICBcdF9wcmVsb2FkZWRJbWFnZXMgPSBbXVxuICAgICAgICAgICAgICAgIFx0XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcHJlQ2FjaGUodXJsLCBpZCkge1xuICAgICAgICBcdGlmKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytpZCkpIHtcblx0ICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9ICQoXCI8ZGl2IGlkPSdcIiArIGlkICsgXCInIC8+XCIpXG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICAkKFwibWFpblwiKS5hcHBlbmQoY29udGFpbmVyKTtcbiAgICAgICAgXHR9XG4gICAgICAgICAgICBsZXQgdmlld0NvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsOiB7ZGl2SWQ6IGlkLCBpbWFnZUNvbnRyb2xzQWN0aXZlOiBmYWxzZSwgdGFiSW5kZXg6IC0xfSxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHt0aWxlU291cmNlOiB1cmx9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJlbG9hZCA9IG5ldyBJbWFnZVZpZXcuSW1hZ2Uodmlld0NvbmZpZylcbiAgICAgICAgICAgIHByZWxvYWQubG9hZCgpXG4gICAgICAgICAgICAuY2F0Y2goIGVycm9yID0+IGNvbnNvbGUubG9nKFwiZXJyb3IgcHJlY2FjaGluZyB1cmwgXCIgKyB1cmwpKTtcbiAgICAgICAgICAgIF9wcmVsb2FkZWRJbWFnZXMucHVzaChwcmVsb2FkKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH07XG5cbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuICAgIFxuICAgIGdvb2JpV29ya2Zsb3cucHJpbnRwYWdlID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBpbml0aWFsaXplIGEgcHJpbnQgc3R5bGVzaGVldC5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oIGNvbmZpZyApIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnSW5pdGlhbGl6aW5nOiBnb29iaVdvcmtmbG93SlMucHJpbnRwYWdlLmluaXQnICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIG9wZW4gdGhlIHN0cnVjdHVyZSB0cmVlIGluIGEgbmV3IHdpbmRvdyBmb3IgcHJpbnQuXG4gICAgICAgICAqIEBtZXRob2QgcHJpbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaW50OiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWEVDVVRFOiBnb29iaVdvcmtmbG93SlMucHJpbnRwYWdlLnByaW50Jyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICctLT4gdXJsID0gJywgdXJsICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBwcmludFJlcG9ydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlQ29udGVudExlZnQnKS5pbm5lckhUTUw7XG4gICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgICAgIGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICAgICAgbGluay50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybCArICcvdWlpL3RlbXBsYXRlL2Nzcy9pbnRyYW5kYS5jc3M/dmVyc2lvbj0xJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHdpbiA9IHdpbmRvdy5vcGVuKFwiXCIsIFwiXCIsIFwiXCIpO1xuICAgICAgICAgICAgdmFyIGhlYWQgPSB3aW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICB3aW4uZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBwcmludFJlcG9ydDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luLndpbmRvdy5wcmludCgpO1xuICAgICAgICAgICAgd2luLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuXG4gICAgXG4gICAgcmV0dXJuIGdvb2JpV29ya2Zsb3c7XG4gICAgXG59ICkoIGdvb2JpV29ya2Zsb3dKUyB8fCB7fSwgalF1ZXJ5ICk7XG52YXIgZ29vYmlXb3JrZmxvd0pTID0gKGZ1bmN0aW9uIChnb29iaVdvcmtmbG93KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuICAgIFxuICAgIGdvb2JpV29ya2Zsb3cucHJvZ3Jlc3MgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGluaXRpYWxpemUgdGhlIHByb2dyZXNzIGJhciBtb2R1bGUuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmc6IGdvb2JpV29ya2Zsb3dKUy5wcm9ncmVzcy5pbml0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHNob3cgdGhlIHByb2dyZXNzYmFyIHBhbmVsLlxuICAgICAgICAgKiBAbWV0aG9kIGRpc3BsYXlQcm9ncmVzc0JhclxuICAgICAgICAgKi9cbiAgICAgICAgZGlzcGxheVByb2dyZXNzQmFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VYRUNVVEU6IGdvb2JpV29ya2Zsb3dKUy5wcm9ncmVzcy5kaXNwbGF5UHJvZ3Jlc3NCYXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3NQYW5lbCcpO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzYnV0dG9uJykuY2xpY2soKTtcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGdvb2JpV29ya2Zsb3c7XG5cbn0pKGdvb2JpV29ya2Zsb3dKUyB8fCB7fSwgalF1ZXJ5KTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9wb3NpdGlvbnMgPSB7XG4gICAgICAgIHNlbGVjdFBhZ2U6IHtcbiAgICAgICAgICAgIGxhYmVsOiAwXG4gICAgICAgIH0sXG4gICAgICAgIHN0cnVjdHVyZToge1xuICAgICAgICAgICAgbGluazogMFxuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93LnNjcm9sbFBvc2l0aW9ucyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgYm94IG1vZHVsZS5cbiAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAqL1xuICAgIFx0aW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLnNjcm9sbFBvc2l0aW9ucy5pbml0JyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBnZXQgc2Nyb2xsIHN0YXR1c1xuICAgICAgICAgICAgX2dldFNjcm9sbFN0YXR1cygpO1xuXG4gICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIHN0YXR1c1xuICAgICAgICAgICAgX3NldFNjcm9sbFN0YXR1cygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gc2V0IHRoZSBzY3JvbGwgc3RhdHVzIG9mIHRoZSBib3hlcy5cbiAgICAgKiBAbWV0aG9kIF9zZXRTY3JvbGxTdGF0dXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBfc2V0U2Nyb2xsU3RhdHVzKCkge1xuICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnRVhFQ1VURTogX3NldFNjcm9sbFN0YXR1cycgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCBzY3JvbGwgc3RhdHVzIG9mIHN0cnVjdHVyZSBsaW5rXG4gICAgICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnI21lU3RydWN0dXJlIGJ1dHRvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3Bvc2l0aW9ucy5zdHJ1Y3R1cmUubGluayA9ICQoIHRoaXMgKS5wYXJlbnRzKCd0cicpLnBvc2l0aW9uKCkudG9wO1xuXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCAnd2Zfc2Nyb2xsUG9zaXRpb25zJywgSlNPTi5zdHJpbmdpZnkoIF9wb3NpdGlvbnMgKSApO1xuICAgICAgICB9ICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBnZXQgdGhlIHNjcm9sbCBzdGF0dXMgb2YgdGhlIGJveGVzLlxuICAgICAqIEBtZXRob2QgX2dldFNjcm9sbFN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9nZXRTY3JvbGxTdGF0dXMoKSB7XG4gICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coICdFWEVDVVRFOiBfZ2V0U2Nyb2xsU3RhdHVzJyApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0cnVjdExpbmtQb3NpdGlvbjtcbiAgICAgICAgXG4gICAgICAgIGlmICggc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSggJ3dmX3Njcm9sbFBvc2l0aW9ucycgKSA9PSBudWxsICkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSggJ3dmX3Njcm9sbFBvc2l0aW9ucycsIEpTT04uc3RyaW5naWZ5KCBfcG9zaXRpb25zICkgKTtcbiAgICAgICAgICAgIHN0cnVjdExpbmtQb3NpdGlvbiA9IEpTT04ucGFyc2UoIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oICd3Zl9zY3JvbGxQb3NpdGlvbnMnICkgKTtcbiAgICAgICAgICAgICQoICcjcGFnZUNvbnRlbnRMZWZ0JyApLnNjcm9sbFRvcCggc3RydWN0TGlua1Bvc2l0aW9uLnN0cnVjdHVyZS5saW5rICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJ1Y3RMaW5rUG9zaXRpb24gPSBKU09OLnBhcnNlKCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCAnd2Zfc2Nyb2xsUG9zaXRpb25zJyApICk7XG4gICAgICAgICAgICAkKCAnI3BhZ2VDb250ZW50TGVmdCcgKS5zY3JvbGxUb3AoIHN0cnVjdExpbmtQb3NpdGlvbi5zdHJ1Y3R1cmUubGluayApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBnb29iaVdvcmtmbG93O1xuICAgIFxufSApKCBnb29iaVdvcmtmbG93SlMgfHwge30sIGpRdWVyeSApO1xudmFyIGdvb2JpV29ya2Zsb3dKUyA9ICggZnVuY3Rpb24oIGdvb2JpV29ya2Zsb3cgKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBfZGVidWcgPSBmYWxzZTtcbiAgICB2YXIgX3RhYlN0YXR1c0RlZmF1bHQgPSB7XG4gICAgICAgIG1ldHNlZGl0b3JQYWdlc092ZXJ2aWV3OiB0cnVlLFxuICAgICAgICBtZXRzZWRpdG9yUGFnZXNBbGxQYWdlczogZmFsc2UsXG4gICAgICAgIG1ldHNlZGl0b3JQYWdlc1F1aWNrYXNzaWduOiBmYWxzZVxuICAgIH07XG4gICAgdmFyIF90YWJTdGF0dXMgPSB7fTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93LnN0cnVjdGRhdGEgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGluaXRpYWxpemUgdGhlIHN0cnVjdGRhdGEgbW9kdWxlLlxuICAgICAgICAgKiBAbWV0aG9kIGluaXRcbiAgICAgICAgICovXG4gICAgXHRpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggX2RlYnVnICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnSW5pdGlhbGl6aW5nOiBnb29iaVdvcmtmbG93SlMuc3RydWN0ZGF0YS5pbml0JyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjaGVjayBzZXNzaW9uIHN0b3JhZ2UgZm9yIHRhYiBzdGF0dXNcbiAgICAgICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd3Zl9zdHJ1Y3RkYXRhVGFiU3RhdHVzJykgPT0gbnVsbCB8fCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd3Zl9zdHJ1Y3RkYXRhVGFiU3RhdHVzJykgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnd2Zfc3RydWN0ZGF0YVRhYlN0YXR1cycsIEpTT04uc3RyaW5naWZ5KF90YWJTdGF0dXNEZWZhdWx0KSk7XG4gICAgICAgICAgICAgICAgX3RhYlN0YXR1cyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3dmX3N0cnVjdGRhdGFUYWJTdGF0dXMnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBwYWdlIGFzc2lnbm1lbnQgdGFiIHN0YXR1c1xuICAgICAgICAgICAgICAgIF9nZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cygpO1xuICAgICAgICAgICAgICAgIF9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RhYlN0YXR1cyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3dmX3N0cnVjdGRhdGFUYWJTdGF0dXMnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBwYWdlIGFzc2lnbm1lbnQgdGFiIHN0YXR1c1xuICAgICAgICAgICAgICAgIF9nZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cygpO1xuICAgICAgICAgICAgICAgIF9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGNoZWNrIGFuZCBnZXQgdGhlIHBhZ2UgYXNzaWdubWVudCB0YWIgc3RhdHVzLlxuICAgICAqIEBtZXRob2QgX2dldFBhZ2VBc3NpZ25tZW50VGFiU3RhdHVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gX2dldFBhZ2VBc3NpZ25tZW50VGFiU3RhdHVzKCkge1xuICAgICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRVhFQ1VURTogX2dldFBhZ2VBc3NpZ25tZW50VGFiU3RhdHVzJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RhdHVzID0gSlNPTi5wYXJzZShfdGFiU3RhdHVzKTtcbiAgICAgICAgXG4gICAgICAgICQuZWFjaChzdGF0dXMsIGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyBpbmRleCkuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBjaGVjayBhbmQgc2V0IHRoZSBwYWdlIGFzc2lnbm1lbnQgdGFiIHN0YXR1cy5cbiAgICAgKiBAbWV0aG9kIF9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIF9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cygpIHtcbiAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VYRUNVVEU6IF9zZXRQYWdlQXNzaWdubWVudFRhYlN0YXR1cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YXR1cyA9IEpTT04ucGFyc2UoX3RhYlN0YXR1cyk7XG4gICAgICAgIFxuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXRhcmdldD1cIiNtZXRzZWRpdG9yUGFnZXNPdmVydmlld1wiXSwgW2RhdGEtdGFyZ2V0PVwiI21ldHNlZGl0b3JQYWdlc0FsbFBhZ2VzXCJdLCBbZGF0YS10YXJnZXQ9XCIjbWV0c2VkaXRvclBhZ2VzUXVpY2thc3NpZ25cIl0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGFyZ2V0ID0gJCh0aGlzKS5hdHRyKCdhcmlhLWNvbnRyb2xzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQuZWFjaChzdGF0dXMsIGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSBjdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1tpbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzW2luZGV4XSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd3Zl9zdHJ1Y3RkYXRhVGFiU3RhdHVzJywgSlNPTi5zdHJpbmdpZnkoc3RhdHVzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBnb29iaVdvcmtmbG93O1xuICAgIFxufSApKCBnb29iaVdvcmtmbG93SlMgfHwge30sIGpRdWVyeSApO1xudmFyIGdvb2JpV29ya2Zsb3dKUyA9ICggZnVuY3Rpb24oIGdvb2JpV29ya2Zsb3cgKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBfZGVidWcgPSBmYWxzZTtcbiAgICB2YXIgX2RlZmF1bHRzID0ge1xuXHRcdG1heFBhcmFsbGVsUmVxdWVzdHM6IDEwMFxuXHR9O1xuICAgIHZhciBfaW50cmFuZGFJbWFnZXMgPSB7fTtcbiAgICBcbiAgICBnb29iaVdvcmtmbG93LnRodW1ibmFpbHMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGluaXRpYWxpemUgdGhlIHRodW1ibmFpbCByZW5kZXJpbmcuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICBcdGluaXQ6IGZ1bmN0aW9uKGNvbmZpZykge1xuXHRcdFx0aWYoY29uZmlnKSB7XHRcdFx0XHRcblx0XHRcdFx0dGhpcy5jb25maWcgPSAkLmV4dGVuZCggdHJ1ZSwge30sIF9kZWZhdWx0cywgY29uZmlnICk7XG5cdFx0XHR9XG4gICAgICAgICAgICBpZiAoIF9kZWJ1ZyApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ0luaXRpYWxpemluZzogZ29vYmlXb3JrZmxvd0pTLnRodW1ibmFpbHMuaW5pdCcsIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cblxuXHRcdFx0dmFyIHByb21pc2VzID0gW107XG5cdFx0XHR2YXIgZWxlbWVudHMgPSBbXTtcblx0XHRcdHZhciBhY3RpdmVBZGRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgJCggJy50aHVtYm5haWxzX190aHVtYi1jYW52YXMnICkuZWFjaCggZnVuY3Rpb24oIGluZGV4LCBlbCApIHtcblx0XHRcdFx0ZWxlbWVudHMucHVzaChlbCk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0bGV0IGVsZW1lbnRHcm91cHMgPSBncm91cEFycmF5KGVsZW1lbnRzLCB0aGlzLmNvbmZpZy5tYXhQYXJhbGxlbFJlcXVlc3RzKTtcblx0XHRcdGxldCBhY3RpdmVPYnNlcnZhYmxlID0gbmV3IHJ4anMuU3ViamVjdCgpO1xuXHRcdFx0bGV0IHRodW1ibmFpbExvYWRPYnNlcnZhYmxlcyA9IHJ4anMuZnJvbShlbGVtZW50R3JvdXBzKVxuXHRcdFx0LnBpcGUoXG4gICAgICAgICAgICAgICAgcnhqcy5vcGVyYXRvcnMuY29uY2F0TWFwKHRodW1iR3JvdXAgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBPYnNlcnZhYmxlcyA9IHJ4anMuZnJvbSh0aHVtYkdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAucGlwZShcblx0ICAgICAgICAgICAgICAgIFx0cnhqcy5vcGVyYXRvcnMubWVyZ2VNYXAoZWxlID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHByb21pc2UgPSBkcmF3T25DYW52YXMoIGVsZSApO1xuXHRcdFx0XHRcdFx0XHRhY3RpdmVPYnNlcnZhYmxlLm5leHQocHJvbWlzZSk7XG5cdFx0XHRcdFx0XHRcdGlmKHRoaXMuaXNBY3RpdmVFbGVtZW50KGVsZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRhY3RpdmVPYnNlcnZhYmxlLmNvbXBsZXRlKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdFx0XHRcdFx0XHR9KVxuXHQgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ4anMuZm9ya0pvaW4oZ3JvdXBPYnNlcnZhYmxlcyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgXHQpXG4gICAgICAgICBcdHJ4anMuZm9ya0pvaW4odGh1bWJuYWlsTG9hZE9ic2VydmFibGVzKS5zdWJzY3JpYmUoKTtcblxuICAgICAgICAgICAgdmFyIHJpZ2h0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcjcGFnZUNvbnRlbnRSaWdodCcgKTtcbiAgICAgICAgICAgIGlmKHJpZ2h0Q29udGVudC5xdWVyeVNlbGVjdG9yKCAnI3RodW1ibmFpbHMnICkpIHtcbiAgICAgICAgICAgIFx0cmlnaHRDb250ZW50LnNjcm9sbFRvKDAsMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIFx0dmFyIGFjdGl2ZVRodW1ibmFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aHVtYm5haWxzX190aHVtYi5hY3RpdmUnKTtcbiAgICAgICAgXHRpZihhY3RpdmVUaHVtYm5haWwpIHtcblx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdGFjdGl2ZU9ic2VydmFibGUuc3Vic2NyaWJlKHtcblx0XHRcdFx0XHRuZXh0OiBwID0+IHByb21pc2VzLnB1c2gocCksXG5cdFx0XHRcdFx0ZXJyb3I6IHAgPT4gcHJvbWlzZXMucHVzaChwKSxcblx0XHRcdFx0XHRjb21wbGV0ZTogKCkgPT4ge1xuXHRcdFx0ICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oICgpID0+IHtcblx0XHQgICAgICAgICAgICBcdFx0YWN0aXZlVGh1bWJuYWlsLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJjZW50ZXJcIn0pO1xuXHQgICAgICAgICAgIFx0XHRcdH0pOyBcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuICAgICAgICBcdH1cbiAgICAgICAgfSxcbiAgICAgICAgaXNBY3RpdmVFbGVtZW50OiBmdW5jdGlvbihlbCkge1xuXHRcdFx0cmV0dXJuIGVsLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKTtcblx0XHR9LFxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBzZXQgdGhlIGFjdGl2ZSB0aHVtYm5haWwgd2hlbiBpdCBnZXRzIHNlbGVjdGVkXG4gICAgICovXG4gICAgZ29vYmlXb3JrZmxvdy51cGRhdGVTZWxlY3RlZFRodW1ibmFpbCA9IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xuICAgICAgICB2YXIgZ2FsbGVyeUxpbmtzO1xuICAgICAgICBnYWxsZXJ5TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0aHVtYm5haWxzX190aHVtYicpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbGxlcnlMaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZ2FsbGVyeUxpbmtzW2ldLmNsYXNzTmFtZSA9IFwidGh1bWJuYWlsc19fdGh1bWJcIjsgICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSBcInRodW1ibmFpbHNfX3RodW1iIGFjdGl2ZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBkcmF3IHRoZSB0aHVtYm5haWwgaW1hZ2VzIG9uIGEgY2FudmFzLlxuICAgICAqIEBtZXRob2QgZHJhd09uQ2FudmFzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyBUaGUgY2FudmFzIG9iamVjdCB0byBkcmF3IG9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRyYXdPbkNhbnZhcyggY2FudmFzICkge1xuICAgIFx0cmV0dXJuIG5ldyBQcm9taXNlKCBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgaWYgKCBjYW52YXMgPT0gbnVsbCApIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoICcyZCcgKTtcblx0ICAgICAgICAgICAgdmFyIGQgPSBjYW52YXMuZGF0YXNldDtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIGlmICggIWQgKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBmaXggZm9yIGllIG5vdCBzdXBwb3J0aW5nIGVsZW1lbnQuZGF0YXNldFxuXHQgICAgICAgICAgICAgICAgZCA9IHt9O1xuXHQgICAgICAgICAgICAgICAgZC5pbWFnZV9zbWFsbCA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoICdkYXRhLWltYWdlX3NtYWxsJyApO1xuXHQgICAgICAgICAgICAgICAgZC5pbWFnZV9sYXJnZSA9IGNhbnZhcy5nZXRBdHRyaWJ1dGUoICdkYXRhLWltYWdlX2xhcmdlJyApO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG5cdCAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9ICggY2FudmFzLndpZHRoICogMiApIC8gdGhpcy53aWR0aDtcblx0ICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMud2lkdGg7XG5cdCAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdCAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKCBpbWcsIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICk7XG5cdCAgICAgICAgICAgICAgICBfaW50cmFuZGFJbWFnZXNbIGNhbnZhcy5pZCBdID0ge1xuXHQgICAgICAgICAgICAgICAgICAgIHNtYWxsV2lkdGg6IHRoaXMud2lkdGggLSAxMCxcblx0ICAgICAgICAgICAgICAgICAgICBzbWFsbEhlaWdodDogdGhpcy5oZWlnaHQgLSAxMCxcblx0ICAgICAgICAgICAgICAgICAgICBsYXJnZVVybDogZC5pbWFnZV9sYXJnZVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdmFyIGltYWdlID0gZC5pbWFnZV9zbWFsbDtcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaW1hZ2UpO1xuXHQgICAgICAgICAgICBpbWcuc3JjID0gaW1hZ2U7XG5cdCAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCAnbW91c2VvdXQnLCBkcmF3T25DYW52YXNNb3VzZU91dCwgZmFsc2UgKTtcblx0ICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UgKTtcblx0ICAgICAgICB9LCAxMDAgKTtcblx0ICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBNZXRob2QgdG8gdHJpZ2dlciBtb3VzZW91dCBldmVudC5cbiAgICAgKiBAbWV0aG9kIGRyYXdPbkNhbnZhc01vdXNlT3V0XG4gICAgICovXG4gICAgZnVuY3Rpb24gZHJhd09uQ2FudmFzTW91c2VPdXQoIGV2ZW50ICkge1xuICAgICAgICBkcmF3T25DYW52YXMoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIGdldCB0aGUgcG9zaXRpb24gb2YgdGhlIG1vdXNlIGN1cnNvci5cbiAgICAgKiBAbWV0aG9kIGdldE1vdXNlUG9zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbnZhcyBUaGUgY2FudmFzIG9iamVjdCB0byBkcmF3IG9uLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgZWJ2ZW50IG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgbW91c2UgcG9zaXRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE1vdXNlUG9zKCBjYW52YXMsIGV2ZW50ICkge1xuICAgICAgICB2YXIgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQgLSA1LFxuICAgICAgICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wIC0gNVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gTWV0aG9kIHRvIHByZXZlbnQgdG8gc3VibWl0IGEgZm9ybSB0d2ljZS5cbiAgICAgKiBAbWV0aG9kIHByZXZlbnREb3VibGVTdWJtaXRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgVGhlIGNsaWNrIGV2ZW50IHdoaWNoIHRyaWdnZXJzIHN1Ym1pdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcmV2ZW50RG91YmxlU3VibWl0KGV2ZW50KSB7XG4gICAgICAgIHZhciBwcmV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2xkT25jbGljayA9IGV2ZW50Lm9uY2xpY2s7XG4gICAgICAgIGV2ZW50Lm9uY2xpY2sgPSBwcmV2ZW50O1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXZlbnQub25jbGljayA9IG9sZE9uY2xpY2s7XG4gICAgICAgIH0sIDcwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byB3YXRjaCB0aGUgbW91c2UgbW92ZSBldmVudCBvbiBjYW52YXMuXG4gICAgICogQG1ldGhvZCBvbk1vdXNlTW92ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBUaGUgbW91c2UgbW92ZSBldmVudCB0byB3YXRjaC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZSggZXZlbnQgKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggX2ludHJhbmRhSW1hZ2VzWyBjYW52YXMuaWQgXSA9PSBudWxsICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9pbnRyYW5kYUltYWdlc1sgY2FudmFzLmlkIF0uc2NhbGVYID0gKCBpbWcud2lkdGggLSBfaW50cmFuZGFJbWFnZXNbIGNhbnZhcy5pZCBdLnNtYWxsV2lkdGggKSAvIF9pbnRyYW5kYUltYWdlc1sgY2FudmFzLmlkIF0uc21hbGxXaWR0aDtcbiAgICAgICAgICAgIF9pbnRyYW5kYUltYWdlc1sgY2FudmFzLmlkIF0uc2NhbGVZID0gKCBpbWcuaGVpZ2h0IC0gX2ludHJhbmRhSW1hZ2VzWyBjYW52YXMuaWQgXS5zbWFsbEhlaWdodCApIC8gX2ludHJhbmRhSW1hZ2VzWyBjYW52YXMuaWQgXS5zbWFsbEhlaWdodDtcbiAgICAgICAgICAgIHZhciBwb3MgPSBnZXRNb3VzZVBvcyggY2FudmFzLCBldmVudCApO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgbW91c2UgaXMgc3RpbGwgaG92ZXJpbmcgb3ZlciBjYW52YXNcbiAgICAgICAgICAgIGlmICggJCggJyMnICsgY2FudmFzLmlkICsgJzpob3ZlcicgKS5sZW5ndGggPT0gMCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NhbGVYID0gX2ludHJhbmRhSW1hZ2VzWyBjYW52YXMuaWQgXS5zY2FsZVg7XG4gICAgICAgICAgICB2YXIgc2NhbGVZID0gX2ludHJhbmRhSW1hZ2VzWyBjYW52YXMuaWQgXS5zY2FsZVk7XG4gICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoICcyZCcgKTtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKTtcbiAgICAgICAgICAgIHZhciBwb3NYID0gcG9zLnggKiBzY2FsZVg7XG4gICAgICAgICAgICB2YXIgcG9zWSA9IHBvcy55ICogc2NhbGVZO1xuICAgICAgICAgICAgaWYgKCBwb3NYIDwgMCApIHtcbiAgICAgICAgICAgICAgICBwb3NYID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcG9zWSA8IDAgKSB7XG4gICAgICAgICAgICAgICAgcG9zWSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGltZy53aWR0aCAtIHBvc1ggPCBjYW52YXMud2lkdGggKSB7XG4gICAgICAgICAgICAgICAgcG9zWCA9IGltZy53aWR0aCAtIGNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggaW1nLmhlaWdodCAtIHBvc1kgPCBjYW52YXMuaGVpZ2h0ICkge1xuICAgICAgICAgICAgICAgIHBvc1kgPSBpbWcuaGVpZ2h0IC0gY2FudmFzLmhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoIGltZywgLXBvc1gsIC1wb3NZICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBfaW50cmFuZGFJbWFnZXNbIGNhbnZhcy5pZCBdICkge1xuICAgICAgICAgICAgaW1nLnNyYyA9IF9pbnRyYW5kYUltYWdlc1sgY2FudmFzLmlkIF0ubGFyZ2VVcmw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gZ3JvdXBBcnJheShhcnJheSwgZ3JvdXBTaXplKSB7XG4gICAgICAgIGxldCBhbGxHcm91cHMgPSBhcnJheS5yZWR1Y2UoKGdyb3VwcywgaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYoZ3JvdXBzW2dyb3Vwcy5sZW5ndGggLSAxXS5sZW5ndGggPCBncm91cFNpemUpIHtcbiAgICAgICAgICAgICAgICBncm91cHNbZ3JvdXBzLmxlbmd0aCAtMV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBzLnB1c2goW2l0ZW1dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncm91cHM7XG4gICAgICAgIH0sIFtbXV0pO1xuICAgICAgICByZXR1cm4gYWxsR3JvdXBzO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbnZhciBnb29iaVdvcmtmbG93SlMgPSAoIGZ1bmN0aW9uKCBnb29iaVdvcmtmbG93ICkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcbiAgICB2YXIgX2RlYnVnID0gZmFsc2U7XG4gICAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICAgICAgc2VsZWN0b3I6ICcudGV4dGFyZWEtaHRtbCdcbiAgICB9O1xuICAgIFxuICAgXG4gICAgXG4gICAgZ29vYmlXb3JrZmxvdy50aW55bWNlID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIE1ldGhvZCB0byBpbml0aWFsaXplIHRpbnlNQ0UuXG4gICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgKi9cbiAgICBcdGluaXQ6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAgICAgICAgaWYgKCBfZGVidWcgKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICdJbml0aWFsaXppbmc6IGdvb2JpV29ya2Zsb3dKUy50aW55bWNlLmluaXQnICk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coICctLT4gY29uZmlnID0gJywgY29uZmlnICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuZXh0ZW5kKCB0cnVlLCBfZGVmYXVsdHMsIGNvbmZpZyApO1xuXG4gICAgICAgICAgICB0aGlzLmV4dGVuZGVkVGlueU1jZUNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogX2RlZmF1bHRzLnNlbGVjdG9yLFxuICAgICAgICAgICAgICAgIGV4dGVuZGVkX3ZhbGlkX2VsZW1lbnRzOiAncCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzYmFyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICAgICAgICAgIG1lbnU6IHt9LFxuICAgICAgICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2Fkdmxpc3QgYXV0b2xpbmsgbGluayBpbWFnZSBsaXN0cyBjaGFybWFwIHByaW50IHByZXZpZXcgaHIgYW5jaG9yIHBhZ2VicmVhayBzcGVsbGNoZWNrZXInLFxuICAgICAgICAgICAgICAgICAgICAnc2VhcmNocmVwbGFjZSB3b3JkY291bnQgdmlzdWFsYmxvY2tzIHZpc3VhbGNoYXJzIGNvZGUgaW5zZXJ0ZGF0ZXRpbWUgbWVkaWEgbm9uYnJlYWtpbmcnLFxuICAgICAgICAgICAgICAgICAgICAnc2F2ZSB0YWJsZSBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eSBlbW90aWNvbnMgdGVtcGxhdGUgcGFzdGUnXSxcbiAgICAgICAgICAgICAgICBjb250ZW50X2NzczogJ2Nzcy9jb250ZW50LmNzcycsXG4gICAgICAgICAgICAgICAgdG9vbGJhcjogJ3VuZG8gcmVkbyB8IHN0eWxlc2VsZWN0IHwgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIHN0cmlrZXRocm91Z2ggfCBidWxsaXN0IG51bWxpc3QgfCBpbWFnZSB0YWJsZSB8IGZ1bGxzY3JlZW4gY29kZScsXG4gICAgICAgICAgICAgICAgc3BlbGxjaGVja2VyX2xhbmd1YWdlczogJ0VuZ2xpc2g9ZW5fVVMsR2VybWFuPWRlX0RFX2ZyYW1pJyxcbiAgICAgICAgICAgICAgICAvL1x0c3BlbGxjaGVja2VyX3JwY191cmw6ICdzcGVsbGNoZWNrZXIucGhwJyxcbiAgICAgICAgICAgICAgICBzcGVsbGNoZWNrZXJfY2FsbGJhY2s6IGZ1bmN0aW9uIChtZXRob2QsIHRleHQsIHN1Y2Nlc3MsIGZhaWx1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlueW1jZS51dGlsLkpTT05SZXF1ZXN0LnNlbmRSUEMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcInRlbXBsYXRlL2pzL3BsdWdpbnMvdGlueW1jZS9qcy90aW55bWNlL3BsdWdpbnMvc3BlbGxjaGVja2VyL3NwZWxsY2hlY2tlci5waHBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJzcGVsbGNoZWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLmdldExhbmd1YWdlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHM6IHRleHQubWF0Y2godGhpcy5nZXRXb3JkQ2hhclBhdHRlcm4oKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IsIHhocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLCB4aHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUoXCJTcGVsbGNoZWNrIGVycm9yOlwiICsgeGhyLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3R5bGVfZm9ybWF0czogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0hlYWRpbmdzJywgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRpdGxlOiAnSGVhZGluZyAxJywgZm9ybWF0OiAnaDEnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aXRsZTogJ0hlYWRpbmcgMicsIGZvcm1hdDogJ2gyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGl0bGU6ICdIZWFkaW5nIDMnLCBmb3JtYXQ6ICdoMycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRpdGxlOiAnSGVhZGluZyA0JywgZm9ybWF0OiAnaDQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aXRsZTogJ0hlYWRpbmcgNScsIGZvcm1hdDogJ2g1JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGl0bGU6ICdIZWFkaW5nIDYnLCBmb3JtYXQ6ICdoNicgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Jsb2NrcycsIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aXRsZTogJ1BhcmFncmFwaCcsIGZvcm1hdDogJ3AnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aXRsZTogJ0Jsb2NrcXVvdGUnLCBmb3JtYXQ6ICdibG9ja3F1b3RlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGl0bGU6ICdEaXYnLCBmb3JtYXQ6ICdkaXYnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBpbml0X2luc3RhbmNlX2NhbGxiYWNrOiBmdW5jdGlvbiAoZWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkT25seUF0dHIgPSAkKFwiI1wiICsgZWRpdG9yLmlkLnJlcGxhY2UoXCI6XCIsIFwiXFxcXDpcIikpLmF0dHIoXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVhZE9ubHlBdHRyID09PSBcInJlYWRvbmx5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRNb2RlKFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZVJlZmVyZW5jZUZpZWxkcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChlZGl0b3IuZ2V0V2luKCkpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemVSZWZlcmVuY2VGaWVsZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXR1cDogZnVuY3Rpb24gKGVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iub24oXCJibHVyXCIsIGZ1bmN0aW9uIChldmVudCwgYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5wdXQgaWQgPSBcIiwgZWRpdG9yLmlkLnJlcGxhY2UoLzovZywgXCJcXFxcOlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI1wiICsgZWRpdG9yLmlkLnJlcGxhY2UoLzovZywgXCJcXFxcOlwiKSkudHJpZ2dlcihcImNoYW5nZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlueW1jZS50cmlnZ2VyU2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnb29iaVdvcmtmbG93LnRpbnltY2UucmVuZGVySW5wdXRGaWVsZHMoKTtcbiAgICBcdCAgIH0sXG4gICAgICAgICAgICBpbml0VGlueU1jZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmKF9kZWJ1Zyljb25zb2xlLmxvZyhcImluaXQgdGlueW1jZVwiLCBnb29iaVdvcmtmbG93LnRpbnltY2UuZXh0ZW5kZWRUaW55TWNlQ29uZmlnKTtcbiAgICAgICAgICAgICAgICB0aW55bWNlLmluaXQoZ29vYmlXb3JrZmxvdy50aW55bWNlLmV4dGVuZGVkVGlueU1jZUNvbmZpZyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICByZW5kZXJJbnB1dEZpZWxkcyA6IGZ1bmN0aW9uIChhamF4RGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGlueU1DRSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFqYXhEYXRhID09PSB1bmRlZmluZWQgfHwgYWpheERhdGEuc3RhdHVzID09IFwiYmVnaW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlZElkIGluIHRpbnlNQ0UuZWRpdG9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbnlNQ0UuZWRpdG9yc1tlZElkXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkIGVkaXRvciBcIiArIGVkSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igb2NjdXJlZCBkdXJpbmcgcmVtb3ZpbmcgZWRpdG9yczsgXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFqYXhEYXRhID09PSB1bmRlZmluZWQgfHwgYWpheERhdGEuc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnb29iaVdvcmtmbG93LnRpbnltY2UuaW5pdFRpbnlNY2UoYWpheERhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgIFxuICAgIH07XG5cbiAgICBcbiAgICByZXR1cm4gZ29vYmlXb3JrZmxvdztcbiAgICBcbn0gKSggZ29vYmlXb3JrZmxvd0pTIHx8IHt9LCBqUXVlcnkgKTtcbi8vIHRlbXBsYXRlX21ldHNlZGl0b3IuaHRtbFxuZnVuY3Rpb24gcmVsb2FkQWxsSGFuZGxlcigpIHtcbiAgICAkKCdhW2lkKj1cImdlb25hbWVzSW5kZXhUcmlnZ2VyLVwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN1cnJJbmRleCA9ICQodGhpcykuYXR0cignZGF0YS1yb3cnKTtcbiAgICAgICAgdmFyIGN1cnJUeXBlID0gJCh0aGlzKS5hdHRyKCdkYXRhLWRhdGF0eXBlJyk7XG4gICAgICAgICQoJyNyb3dJbmRleCcpLnZhbChjdXJySW5kZXgpO1xuICAgICAgICAkKCcjcm93VHlwZScpLnZhbChjdXJyVHlwZSk7XG4gICAgfSk7XG5cbiAgICAkKCdhW2lkKj1cImduZEluZGV4VHJpZ2dlci1cIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjdXJySW5kZXggPSAkKHRoaXMpLmF0dHIoJ2RhdGEtcm93Jyk7XG4gICAgICAgIHZhciBjdXJyVHlwZSA9ICQodGhpcykuYXR0cignZGF0YS1kYXRhdHlwZScpO1xuICAgICAgICAkKCcjcm93SW5kZXgnKS52YWwoY3VyckluZGV4KTtcbiAgICAgICAgJCgnI3Jvd1R5cGUnKS52YWwoY3VyclR5cGUpO1xuICAgIH0pO1xuXG4gICAgJCgnYVtpZCo9XCJnbmRQZXJzb25JbmRleFRyaWdnZXItXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VyckluZGV4ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXJvdycpO1xuICAgICAgICB2YXIgY3VyclR5cGUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZGF0YXR5cGUnKTtcbiAgICAgICAgJCgnI3Jvd0luZGV4JykudmFsKGN1cnJJbmRleCk7XG4gICAgICAgICQoJyNyb3dUeXBlJykudmFsKGN1cnJUeXBlKTtcbiAgICB9KTtcblxuICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnYVtpZCo9XCJkYW50ZUluZGV4VHJpZ2dlci1cIl0nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGN1cnJJbmRleCA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1yb3cnICk7XG4gICAgICAgIHZhciBjdXJyVHlwZSA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1kYXRhdHlwZScgKTtcbiAgICAgICAgdmFyIGN1cnJHcm91cCA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1ncm91cGluZGV4JylcbiAgICAgICAgJCggJyNyb3dJbmRleCcgKS52YWwoIGN1cnJJbmRleCApO1xuICAgICAgICAkKCAnI2dyb3VwSW5kZXgnICkudmFsKCBjdXJyR3JvdXAgKTtcbiAgICAgICAgJCggJyNyb3dUeXBlJyApLnZhbCggY3VyclR5cGUgKTtcblxuICAgICAgICAkKCcjcmVzdWx0TGlzdCcpLmVtcHR5KCk7XG4gICAgICAgICQoJyNkYW50ZUlucHV0JykudmFsKCcnKTtcbiAgICAgICAgJCgnI3VwZGF0ZVBsdWdpbkJ1dHRvbicpLmNsaWNrKCk7XG4gICAgfSApO1xuXG4gICAgJCggJ2JvZHknICkub24oICdjbGljaycsICdhW2lkKj1cInByb2Nlc3NJbmRleFRyaWdnZXItXCJdJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjdXJySW5kZXggPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcm93JyApO1xuICAgICAgICB2YXIgY3VyclR5cGUgPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtZGF0YXR5cGUnICk7XG4gICAgICAgIHZhciBjdXJyR3JvdXAgPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtZ3JvdXBpbmRleCcpXG4gICAgICAgICQoICcjcm93SW5kZXgnICkudmFsKCBjdXJySW5kZXggKTtcbiAgICAgICAgJCggJyNncm91cEluZGV4JyApLnZhbCggY3Vyckdyb3VwICk7XG4gICAgICAgICQoICcjcm93VHlwZScgKS52YWwoIGN1cnJUeXBlICk7XG4gICAgICAgICQoJyN1cGRhdGVQbHVnaW5CdXR0b24nKS5jbGljaygpO1xuICAgIH0gKTtcblxuICAgICQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnYVtpZCo9XCJ2aWFmSW5kZXhUcmlnZ2VyLVwiXScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3VyckluZGV4ID0gJCggdGhpcyApLmF0dHIoICdkYXRhLXJvdycgKTtcbiAgICAgICAgdmFyIGN1cnJUeXBlID0gJCggdGhpcyApLmF0dHIoICdkYXRhLWRhdGF0eXBlJyApO1xuICAgICAgICB2YXIgY3Vyckdyb3VwID0gJCggdGhpcyApLmF0dHIoICdkYXRhLWdyb3VwaW5kZXgnKTtcbiAgICAgICAgJCggJyNyb3dJbmRleCcgKS52YWwoIGN1cnJJbmRleCApO1xuICAgICAgICAkKCAnI2dyb3VwSW5kZXgnICkudmFsKCBjdXJyR3JvdXAgKTtcbiAgICAgICAgJCggJyNyb3dUeXBlJyApLnZhbCggY3VyclR5cGUgKTtcbiAgICAgICAgJCgnI3VwZGF0ZVBsdWdpbkJ1dHRvbicpLmNsaWNrKClcbiAgICB9ICk7XG4gICAgJCggJ2JvZHknICkub24oICdjbGljaycsICdhW2lkKj1cInZpYWZQZXJzb25JbmRleFRyaWdnZXItXCJdJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjdXJySW5kZXggPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtcm93JyApO1xuICAgICAgICB2YXIgY3VyclR5cGUgPSAgJ3ZpYWZwZXJzb24nO1xuICAgICAgICB2YXIgY3Vyckdyb3VwID0gJCggdGhpcyApLmF0dHIoICdkYXRhLWdyb3VwaW5kZXgnKTtcbiAgICAgICAgJCggJyNyb3dJbmRleCcgKS52YWwoIGN1cnJJbmRleCApO1xuICAgICAgICAkKCAnI2dyb3VwSW5kZXgnICkudmFsKCBjdXJyR3JvdXAgKTtcbiAgICAgICAgJCggJyNyb3dUeXBlJyApLnZhbCggY3VyclR5cGUgKTtcbiAgICAgICAgJCgnI3VwZGF0ZVBsdWdpbkJ1dHRvbicpLmNsaWNrKClcbiAgICB9ICk7XG59XG5cbmZ1bmN0aW9uIGFkZFBhZ2luYXRpb25CdXR0b25zKCkge1xuICAgIGlmICgkKCcucGFnaW5hdGlvbi10aHVtYicpKSB7XG4gICAgICAgICQoJy5wYWdpbmF0aW9uLXRodW1iJykucmVtb3ZlKCk7XG4gICAgfVxuICAgIHZhciBlc2NhcGVDbGllbnRJZCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBhLnJlcGxhY2UoLzovZywgXCJcXFxcOlwiKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHBhZ2luaWVydW5nV2VydEFuemVpZ2VuKCkge1xuICAgIHZhciBwYWdpbmF0aW9uSW5wdXRGaWVsZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhZ2luYXRpb25JbnB1dEZpZWxkc1wiKTtcbiAgICB2YXIgZmljdGl0aW91c0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWN0aXRpb3VzXCIpO1xuICAgIHZhciBpbnB1dEJveEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhZ2luaWVydW5nV2VydFwiKTtcbiAgICBwYWdpbmF0aW9uSW5wdXRGaWVsZHMuc3R5bGUuZGlzcGxheSA9ICgkKFwiI3BhZ2luYXRpb25UeXBlXCIpLnZhbCgpID09IDMgPyAnbm9uZScgOiAnJyk7XG4gICAgZmljdGl0aW91c0ZpZWxkLnN0eWxlLmRpc3BsYXkgPSAoJChcIiNwYWdpbmF0aW9uVHlwZVwiKS52YWwoKSA9PSAzID8gJ25vbmUnIDogJycpO1xuICAgIGlmICgkKFwiI3BhZ2luYXRpb25UeXBlXCIpLnZhbCgpID09IDIgfHwgJChcIiNwYWdpbmF0aW9uVHlwZVwiKS52YWwoKSA9PSA1KSB7XG4gICAgICAgIGlucHV0Qm94RWxlbWVudC52YWx1ZSA9ICdJJztcbiAgICB9XG4gICAgaWYgKCQoXCIjcGFnaW5hdGlvblR5cGVcIikudmFsKCkgPT0gMSB8fCAkKFwiI3BhZ2luYXRpb25UeXBlXCIpLnZhbCgpID09IDQpIHtcbiAgICAgICAgaW5wdXRCb3hFbGVtZW50LnZhbHVlID0gJzEnO1xuICAgIH1cbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldCA9IHBhcnNlSW50KCQoXCIjY29udGVudEFyZWFcIikud2lkdGgoKSkgLSBwYXJzZUludCgkKFwiI3BhZ0xlZnRcIikud2lkdGgoKSkgLSAxMDtcbiAgICBhZGRQYWdpbmF0aW9uQnV0dG9ucygpO1xuXG4gICAgaWYgKCQoJy5wb3BvdmVyLmZhZGUucmlnaHQuaW4nKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAkKCcucG9wb3Zlci5mYWRlLnJpZ2h0LmluJykucmVtb3ZlKCk7XG4gICAgfVxufSk7XG5cbi8vIG1ldHNlZGl0b3JfaW1hZ2UueGh0bWxcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgbG9hZEltYWdlcygpO1xufVxuZnVuY3Rpb24gc2VsZWN0Q2xpY2tlZFRodW1ibmFpbChlbGVtZW50KSB7XG4gICAgdmFyIGdhbGxlcnlMaW5rcztcbiAgICBnYWxsZXJ5TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdnb29iaS10aHVtYm5haWwnKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbGxlcnlMaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBnYWxsZXJ5TGlua3NbaV0uY2xhc3NOYW1lID0gXCJnb29iaS10aHVtYm5haWwgZm9udC1saWdodFwiO1xuICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSBcImdvb2JpLXRodW1ibmFpbCBpbWctYWN0aXZlXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWZvcm06c2Nyb2xsVG9UaHVtYicpLnZhbHVlID0gXCJmYWxzZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkVGh1bWJuYWlscygpIHtcbiAgICB2YXIgaGVpZ2h0ID0gcGFyc2VJbnQoJCgnLnRodW1ibmFpbHMnKS52YWwoKSk7XG4gICAgaWYgKGhlaWdodCkge1xuICAgICAgICAkKCcuZ29vYmktdGh1bWJuYWlsJykuY3NzKCdoZWlnaHQnLCAoaGVpZ2h0ICsgMjUpICsgJ3B4Jyk7XG4gICAgICAgICQoJy5nb29iaS10aHVtYm5haWwgLnRodW1iJykuY3NzKCdtYXgtaGVpZ2h0JywgaGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICQoJy5nb29iaS10aHVtYm5haWwgLnRodW1iIGNhbnZhcycpLmNzcygnbWF4LWhlaWdodCcsIGhlaWdodCArICdweCcpO1xuICAgICAgICAkKCcuZ29vYmktdGh1bWJuYWlsJykuY3NzKCdtYXgtd2lkdGgnLCAoaGVpZ2h0KSArICdweCcpO1xuXG4gICAgICAgIHNjcm9sbFRvVGh1bWJuYWlsKCk7XG4gICAgfVxufVxubG9hZFRodW1ibmFpbHMoKTtcbmZyZWVKU1Jlc291cmNlcyh7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XG5cbi8vIGluY19tZV9pbWFnZS10aHVtYm5haWxzLnhodG1sXG5mdW5jdGlvbiBzY3JvbGxUb1RodW1ibmFpbCgpIHtcbiAgICB2YXIgdGh1bWIgPSAkKFwiI3RodW1iXyN7TWV0YWRhdGVuLmltYWdlLm9yZGVyfVwiKTtcbiAgICB2YXIgdXNlU2Nyb2xsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtZm9ybTpzY3JvbGxUb1RodW1iJykudmFsdWU7XG4gICAgdmFyIHNoYWxsU2Nyb2xsID0gJyN7TmF2aWdhdGlvbkZvcm0udWlTdGF0dXMubWV0c19zY3JvbGxUb1RodW1ifSc7XG5cbiAgICBpZiAoc2hhbGxTY3JvbGwgPT0gJ3RydWUnICYmIHVzZVNjcm9sbCA9PSBcInRydWVcIikge1xuICAgICAgICBpZiAodGh1bWIgIT0gbnVsbCAmJiB0aHVtYi5wb3NpdGlvbigpICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB0aHVtYlNjcm9sbCA9IHRodW1iLnBvc2l0aW9uKCkudG9wO1xuICAgICAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsVG9wKHRodW1iU2Nyb2xsIC0gMjIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsVG9wKDApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBtZXRzZWRpdG9yX21lbnUueGh0bWxcbmZ1bmN0aW9uIHNldFNjcm9sbFBvc2l0aW9uKCkge1xuICAgIHZhciBzY3JvbGxQb3NpdGlvbiA9ICQoJyNsZWZ0Jykuc2Nyb2xsVG9wKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtZm9ybTpzY3JvbGxQb3NpdGlvbicpLnZhbHVlID0gc2Nyb2xsUG9zaXRpb247XG5cbiAgICB2YXIgc3RydWN0ZGF0YSA9ICQoJyNzdHJ1Y3RkYXRhJyk7XG4gICAgaWYgKHN0cnVjdGRhdGEgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcG9zID0gc3RydWN0ZGF0YS5zY3JvbGxUb3AoKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtZm9ybTpzY3JvbGxQb3NpdGlvblN0cnVjdERhdGEnKS52YWx1ZSA9IHBvcztcbiAgICB9XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcG9zaXRpb24gPSAnI3tOYXZpZ2F0aW9uRm9ybS51aVN0YXR1cy5tZXRzX3Njcm9sbFBvc2l0aW9ufSc7XG4gICAgdmFyIHBvczIgPSAnI3tOYXZpZ2F0aW9uRm9ybS51aVN0YXR1cy5tZXRzX3Njcm9sbFBvc2l0aW9uU3RydWN0RGF0YX0nO1xuICAgICQoJyNsZWZ0Jykuc2Nyb2xsVG9wKHBvc2l0aW9uKTtcbiAgICB2YXIgc3RydWN0ZGF0YSA9ICQoJyNzdHJ1Y3RkYXRhJyk7XG5cbiAgICBpZiAoc3RydWN0ZGF0YSAhPSBudWxsKSB7XG4gICAgICAgIHN0cnVjdGRhdGEuc2Nyb2xsVG9wKHBvczIpO1xuICAgIH1cbn0pOyJdfQ==
